"use strict";var Tp=Object.create;var $r=Object.defineProperty;var Ap=Object.getOwnPropertyDescriptor;var Cp=Object.getOwnPropertyNames;var xp=Object.getPrototypeOf,Pp=Object.prototype.hasOwnProperty;var U=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ga=(r,e)=>{for(var t in e)$r(r,t,{get:e[t],enumerable:!0})},ya=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Cp(e))!Pp.call(r,i)&&i!==t&&$r(r,i,{get:()=>e[i],enumerable:!(n=Ap(e,i))||n.enumerable});return r};var Ip=(r,e,t)=>(t=r!=null?Tp(xp(r)):{},ya(e||!r||!r.__esModule?$r(t,"default",{value:r,enumerable:!0}):t,r)),Np=r=>ya($r({},"__esModule",{value:!0}),r);var Ot=U((To,Uc)=>{var Cn=require("buffer"),st=Cn.Buffer;function Qc(r,e){for(var t in r)e[t]=r[t]}st.from&&st.alloc&&st.allocUnsafe&&st.allocUnsafeSlow?Uc.exports=Cn:(Qc(Cn,To),To.Buffer=$t);function $t(r,e,t){return st(r,e,t)}Qc(st,$t);$t.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return st(r,e,t)};$t.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=st(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};$t.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return st(r)};$t.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Cn.SlowBuffer(r)}});var Ao=U((lx,Vc)=>{var xn=Ot().Buffer,em=require("stream"),tm=require("util");function Pn(r){if(this.buffer=null,this.writable=!0,this.readable=!0,!r)return this.buffer=xn.alloc(0),this;if(typeof r.pipe=="function")return this.buffer=xn.alloc(0),r.pipe(this),this;if(r.length||typeof r=="object")return this.buffer=r,this.writable=!1,process.nextTick(function(){this.emit("end",r),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof r+")")}tm.inherits(Pn,em);Pn.prototype.write=function(e){this.buffer=xn.concat([this.buffer,xn.from(e)]),this.emit("data",e)};Pn.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};Vc.exports=Pn});var Kc=U((fx,zc)=>{"use strict";function Co(r){var e=(r/8|0)+(r%8===0?0:1);return e}var rm={ES256:Co(256),ES384:Co(384),ES512:Co(521)};function nm(r){var e=rm[r];if(e)return e;throw new Error('Unknown algorithm "'+r+'"')}zc.exports=nm});var Zc=U((hx,Yc)=>{"use strict";var In=Ot().Buffer,Gc=Kc(),Nn=128,Hc=0,im=32,sm=16,om=2,Jc=sm|im|Hc<<6,Ln=om|Hc<<6;function am(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xc(r){if(In.isBuffer(r))return r;if(typeof r=="string")return In.from(r,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function um(r,e){r=Xc(r);var t=Gc(e),n=t+1,i=r.length,s=0;if(r[s++]!==Jc)throw new Error('Could not find expected "seq"');var o=r[s++];if(o===(Nn|1)&&(o=r[s++]),i-s<o)throw new Error('"seq" specified length of "'+o+'", only "'+(i-s)+'" remaining');if(r[s++]!==Ln)throw new Error('Could not find expected "int" for "r"');var a=r[s++];if(i-s-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(i-s-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var h=s;if(s+=a,r[s++]!==Ln)throw new Error('Could not find expected "int" for "s"');var d=r[s++];if(i-s!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(i-s)+'"');if(n<d)throw new Error('"s" specified length of "'+d+'", max of "'+n+'" is acceptable');var f=s;if(s+=d,s!==i)throw new Error('Expected to consume entire buffer, but "'+(i-s)+'" bytes remain');var p=t-a,b=t-d,w=In.allocUnsafe(p+a+b+d);for(s=0;s<p;++s)w[s]=0;r.copy(w,s,h+Math.max(-p,0),h+a),s=t;for(var g=s;s<g+b;++s)w[s]=0;return r.copy(w,s,f+Math.max(-b,0),f+d),w=w.toString("base64"),w=am(w),w}function Wc(r,e,t){for(var n=0;e+n<t&&r[e+n]===0;)++n;var i=r[e+n]>=Nn;return i&&--n,n}function cm(r,e){r=Xc(r);var t=Gc(e),n=r.length;if(n!==t*2)throw new TypeError('"'+e+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var i=Wc(r,0,t),s=Wc(r,t,r.length),o=t-i,a=t-s,h=2+o+1+1+a,d=h<Nn,f=In.allocUnsafe((d?2:3)+h),p=0;return f[p++]=Jc,d?f[p++]=h:(f[p++]=Nn|1,f[p++]=h&255),f[p++]=Ln,f[p++]=o,i<0?(f[p++]=0,p+=r.copy(f,p,0,t)):p+=r.copy(f,p,i,t),f[p++]=Ln,f[p++]=a,s<0?(f[p++]=0,r.copy(f,p,t)):r.copy(f,p,t+s),f}Yc.exports={derToJose:um,joseToDer:cm}});var tl=U((px,el)=>{"use strict";var wr=require("buffer").Buffer,xo=require("buffer").SlowBuffer;el.exports=Rn;function Rn(r,e){if(!wr.isBuffer(r)||!wr.isBuffer(e)||r.length!==e.length)return!1;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}Rn.install=function(){wr.prototype.equal=xo.prototype.equal=function(e){return Rn(this,e)}};var lm=wr.prototype.equal,fm=xo.prototype.equal;Rn.restore=function(){wr.prototype.equal=lm,xo.prototype.equal=fm}});var Lo=U((dx,ll)=>{var Bt=Ot().Buffer,ke=require("crypto"),nl=Zc(),rl=require("util"),hm=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Sr="secret must be a string or buffer",qt="key must be a string or a buffer",pm="key must be a string, a buffer or an object",Io=typeof ke.createPublicKey=="function";Io&&(qt+=" or a KeyObject",Sr+="or a KeyObject");function il(r){if(!Bt.isBuffer(r)&&typeof r!="string"&&(!Io||typeof r!="object"||typeof r.type!="string"||typeof r.asymmetricKeyType!="string"||typeof r.export!="function"))throw Ge(qt)}function sl(r){if(!Bt.isBuffer(r)&&typeof r!="string"&&typeof r!="object")throw Ge(pm)}function dm(r){if(!Bt.isBuffer(r)){if(typeof r=="string")return r;if(!Io||typeof r!="object"||r.type!=="secret"||typeof r.export!="function")throw Ge(Sr)}}function No(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ol(r){r=r.toString();var e=4-r.length%4;if(e!==4)for(var t=0;t<e;++t)r+="=";return r.replace(/\-/g,"+").replace(/_/g,"/")}function Ge(r){var e=[].slice.call(arguments,1),t=rl.format.bind(rl,r).apply(null,e);return new TypeError(t)}function mm(r){return Bt.isBuffer(r)||typeof r=="string"}function vr(r){return mm(r)||(r=JSON.stringify(r)),r}function al(r){return function(t,n){dm(n),t=vr(t);var i=ke.createHmac("sha"+r,n),s=(i.update(t),i.digest("base64"));return No(s)}}var Po,gm="timingSafeEqual"in ke?function(e,t){return e.byteLength!==t.byteLength?!1:ke.timingSafeEqual(e,t)}:function(e,t){return Po||(Po=tl()),Po(e,t)};function ym(r){return function(t,n,i){var s=al(r)(t,i);return gm(Bt.from(n),Bt.from(s))}}function ul(r){return function(t,n){sl(n),t=vr(t);var i=ke.createSign("RSA-SHA"+r),s=(i.update(t),i.sign(n,"base64"));return No(s)}}function cl(r){return function(t,n,i){il(i),t=vr(t),n=ol(n);var s=ke.createVerify("RSA-SHA"+r);return s.update(t),s.verify(i,n,"base64")}}function bm(r){return function(t,n){sl(n),t=vr(t);var i=ke.createSign("RSA-SHA"+r),s=(i.update(t),i.sign({key:n,padding:ke.constants.RSA_PKCS1_PSS_PADDING,saltLength:ke.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return No(s)}}function wm(r){return function(t,n,i){il(i),t=vr(t),n=ol(n);var s=ke.createVerify("RSA-SHA"+r);return s.update(t),s.verify({key:i,padding:ke.constants.RSA_PKCS1_PSS_PADDING,saltLength:ke.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function Sm(r){var e=ul(r);return function(){var n=e.apply(null,arguments);return n=nl.derToJose(n,"ES"+r),n}}function vm(r){var e=cl(r);return function(n,i,s){i=nl.joseToDer(i,"ES"+r).toString("base64");var o=e(n,i,s);return o}}function Em(){return function(){return""}}function Tm(){return function(e,t){return t===""}}ll.exports=function(e){var t={hs:al,rs:ul,ps:bm,es:Sm,none:Em},n={hs:ym,rs:cl,ps:wm,es:vm,none:Tm},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw Ge(hm,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:t[s](o),verify:n[s](o)}}});var Ro=U((mx,fl)=>{var Am=require("buffer").Buffer;fl.exports=function(e){return typeof e=="string"?e:typeof e=="number"||Am.isBuffer(e)?e.toString():JSON.stringify(e)}});var yl=U((gx,gl)=>{var Cm=Ot().Buffer,hl=Ao(),xm=Lo(),Pm=require("stream"),pl=Ro(),_o=require("util");function dl(r,e){return Cm.from(r,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Im(r,e,t){t=t||"utf8";var n=dl(pl(r),"binary"),i=dl(pl(e),t);return _o.format("%s.%s",n,i)}function ml(r){var e=r.header,t=r.payload,n=r.secret||r.privateKey,i=r.encoding,s=xm(e.alg),o=Im(e,t,i),a=s.sign(o,n);return _o.format("%s.%s",o,a)}function _n(r){var e=r.secret||r.privateKey||r.key,t=new hl(e);this.readable=!0,this.header=r.header,this.encoding=r.encoding,this.secret=this.privateKey=this.key=t,this.payload=new hl(r.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}_o.inherits(_n,Pm);_n.prototype.sign=function(){try{var e=ml({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};_n.sign=ml;gl.exports=_n});var Pl=U((yx,xl)=>{var wl=Ot().Buffer,bl=Ao(),Nm=Lo(),Lm=require("stream"),Sl=Ro(),Rm=require("util"),_m=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function $m(r){return Object.prototype.toString.call(r)==="[object Object]"}function Om(r){if($m(r))return r;try{return JSON.parse(r)}catch{return}}function vl(r){var e=r.split(".",1)[0];return Om(wl.from(e,"base64").toString("binary"))}function qm(r){return r.split(".",2).join(".")}function El(r){return r.split(".")[2]}function Bm(r,e){e=e||"utf8";var t=r.split(".")[1];return wl.from(t,"base64").toString(e)}function Tl(r){return _m.test(r)&&!!vl(r)}function Al(r,e,t){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}r=Sl(r);var i=El(r),s=qm(r),o=Nm(e);return o.verify(s,i,t)}function Cl(r,e){if(e=e||{},r=Sl(r),!Tl(r))return null;var t=vl(r);if(!t)return null;var n=Bm(r);return(t.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:t,payload:n,signature:El(r)}}function Dt(r){r=r||{};var e=r.secret||r.publicKey||r.key,t=new bl(e);this.readable=!0,this.algorithm=r.algorithm,this.encoding=r.encoding,this.secret=this.publicKey=this.key=t,this.signature=new bl(r.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}Rm.inherits(Dt,Lm);Dt.prototype.verify=function(){try{var e=Al(this.signature.buffer,this.algorithm,this.key.buffer),t=Cl(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Dt.decode=Cl;Dt.isValid=Tl;Dt.verify=Al;xl.exports=Dt});var On=U(ut=>{var Il=yl(),$n=Pl(),Dm=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];ut.ALGORITHMS=Dm;ut.sign=Il.sign;ut.verify=$n.verify;ut.decode=$n.decode;ut.isValid=$n.isValid;ut.createSign=function(e){return new Il(e)};ut.createVerify=function(e){return new $n(e)}});var $o=U((wx,Nl)=>{var Mm=On();Nl.exports=function(r,e){e=e||{};var t=Mm.decode(r,e);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var Er=U((Sx,Ll)=>{var qn=function(r,e){Error.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=r,e&&(this.inner=e)};qn.prototype=Object.create(Error.prototype);qn.prototype.constructor=qn;Ll.exports=qn});var Oo=U((vx,_l)=>{var Rl=Er(),Bn=function(r,e){Rl.call(this,r),this.name="NotBeforeError",this.date=e};Bn.prototype=Object.create(Rl.prototype);Bn.prototype.constructor=Bn;_l.exports=Bn});var qo=U((Ex,Ol)=>{var $l=Er(),Dn=function(r,e){$l.call(this,r),this.name="TokenExpiredError",this.expiredAt=e};Dn.prototype=Object.create($l.prototype);Dn.prototype.constructor=Dn;Ol.exports=Dn});var Bl=U((Tx,ql)=>{var Mt=1e3,jt=Mt*60,kt=jt*60,gt=kt*24,jm=gt*7,km=gt*365.25;ql.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Fm(r);if(t==="number"&&isFinite(r))return e.long?Um(r):Qm(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Fm(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*km;case"weeks":case"week":case"w":return t*jm;case"days":case"day":case"d":return t*gt;case"hours":case"hour":case"hrs":case"hr":case"h":return t*kt;case"minutes":case"minute":case"mins":case"min":case"m":return t*jt;case"seconds":case"second":case"secs":case"sec":case"s":return t*Mt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Qm(r){var e=Math.abs(r);return e>=gt?Math.round(r/gt)+"d":e>=kt?Math.round(r/kt)+"h":e>=jt?Math.round(r/jt)+"m":e>=Mt?Math.round(r/Mt)+"s":r+"ms"}function Um(r){var e=Math.abs(r);return e>=gt?Mn(r,e,gt,"day"):e>=kt?Mn(r,e,kt,"hour"):e>=jt?Mn(r,e,jt,"minute"):e>=Mt?Mn(r,e,Mt,"second"):r+" ms"}function Mn(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Bo=U((Ax,Dl)=>{var Vm=Bl();Dl.exports=function(r,e){var t=e||Math.floor(Date.now()/1e3);if(typeof r=="string"){var n=Vm(r);return typeof n>"u"?void 0:Math.floor(t+n/1e3)}else return typeof r=="number"?t+r:void 0}});var Tr=U((Cx,Ml)=>{"use strict";var zm="2.0.0",Km=Number.MAX_SAFE_INTEGER||9007199254740991,Wm=16,Gm=250,Hm=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Ml.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Wm,MAX_SAFE_BUILD_LENGTH:Gm,MAX_SAFE_INTEGER:Km,RELEASE_TYPES:Hm,SEMVER_SPEC_VERSION:zm,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ar=U((xx,jl)=>{"use strict";var Jm=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};jl.exports=Jm});var Ft=U((Ye,kl)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Do,MAX_SAFE_BUILD_LENGTH:Xm,MAX_LENGTH:Ym}=Tr(),Zm=Ar();Ye=kl.exports={};var eg=Ye.re=[],tg=Ye.safeRe=[],z=Ye.src=[],rg=Ye.safeSrc=[],K=Ye.t={},ng=0,Mo="[a-zA-Z0-9-]",ig=[["\\s",1],["\\d",Ym],[Mo,Xm]],sg=r=>{for(let[e,t]of ig)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},re=(r,e,t)=>{let n=sg(e),i=ng++;Zm(r,i,e),K[r]=i,z[i]=e,rg[i]=n,eg[i]=new RegExp(e,t?"g":void 0),tg[i]=new RegExp(n,t?"g":void 0)};re("NUMERICIDENTIFIER","0|[1-9]\\d*");re("NUMERICIDENTIFIERLOOSE","\\d+");re("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Mo}*`);re("MAINVERSION",`(${z[K.NUMERICIDENTIFIER]})\\.(${z[K.NUMERICIDENTIFIER]})\\.(${z[K.NUMERICIDENTIFIER]})`);re("MAINVERSIONLOOSE",`(${z[K.NUMERICIDENTIFIERLOOSE]})\\.(${z[K.NUMERICIDENTIFIERLOOSE]})\\.(${z[K.NUMERICIDENTIFIERLOOSE]})`);re("PRERELEASEIDENTIFIER",`(?:${z[K.NONNUMERICIDENTIFIER]}|${z[K.NUMERICIDENTIFIER]})`);re("PRERELEASEIDENTIFIERLOOSE",`(?:${z[K.NONNUMERICIDENTIFIER]}|${z[K.NUMERICIDENTIFIERLOOSE]})`);re("PRERELEASE",`(?:-(${z[K.PRERELEASEIDENTIFIER]}(?:\\.${z[K.PRERELEASEIDENTIFIER]})*))`);re("PRERELEASELOOSE",`(?:-?(${z[K.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${z[K.PRERELEASEIDENTIFIERLOOSE]})*))`);re("BUILDIDENTIFIER",`${Mo}+`);re("BUILD",`(?:\\+(${z[K.BUILDIDENTIFIER]}(?:\\.${z[K.BUILDIDENTIFIER]})*))`);re("FULLPLAIN",`v?${z[K.MAINVERSION]}${z[K.PRERELEASE]}?${z[K.BUILD]}?`);re("FULL",`^${z[K.FULLPLAIN]}$`);re("LOOSEPLAIN",`[v=\\s]*${z[K.MAINVERSIONLOOSE]}${z[K.PRERELEASELOOSE]}?${z[K.BUILD]}?`);re("LOOSE",`^${z[K.LOOSEPLAIN]}$`);re("GTLT","((?:<|>)?=?)");re("XRANGEIDENTIFIERLOOSE",`${z[K.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);re("XRANGEIDENTIFIER",`${z[K.NUMERICIDENTIFIER]}|x|X|\\*`);re("XRANGEPLAIN",`[v=\\s]*(${z[K.XRANGEIDENTIFIER]})(?:\\.(${z[K.XRANGEIDENTIFIER]})(?:\\.(${z[K.XRANGEIDENTIFIER]})(?:${z[K.PRERELEASE]})?${z[K.BUILD]}?)?)?`);re("XRANGEPLAINLOOSE",`[v=\\s]*(${z[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${z[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${z[K.XRANGEIDENTIFIERLOOSE]})(?:${z[K.PRERELEASELOOSE]})?${z[K.BUILD]}?)?)?`);re("XRANGE",`^${z[K.GTLT]}\\s*${z[K.XRANGEPLAIN]}$`);re("XRANGELOOSE",`^${z[K.GTLT]}\\s*${z[K.XRANGEPLAINLOOSE]}$`);re("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Do}})(?:\\.(\\d{1,${Do}}))?(?:\\.(\\d{1,${Do}}))?`);re("COERCE",`${z[K.COERCEPLAIN]}(?:$|[^\\d])`);re("COERCEFULL",z[K.COERCEPLAIN]+`(?:${z[K.PRERELEASE]})?(?:${z[K.BUILD]})?(?:$|[^\\d])`);re("COERCERTL",z[K.COERCE],!0);re("COERCERTLFULL",z[K.COERCEFULL],!0);re("LONETILDE","(?:~>?)");re("TILDETRIM",`(\\s*)${z[K.LONETILDE]}\\s+`,!0);Ye.tildeTrimReplace="$1~";re("TILDE",`^${z[K.LONETILDE]}${z[K.XRANGEPLAIN]}$`);re("TILDELOOSE",`^${z[K.LONETILDE]}${z[K.XRANGEPLAINLOOSE]}$`);re("LONECARET","(?:\\^)");re("CARETTRIM",`(\\s*)${z[K.LONECARET]}\\s+`,!0);Ye.caretTrimReplace="$1^";re("CARET",`^${z[K.LONECARET]}${z[K.XRANGEPLAIN]}$`);re("CARETLOOSE",`^${z[K.LONECARET]}${z[K.XRANGEPLAINLOOSE]}$`);re("COMPARATORLOOSE",`^${z[K.GTLT]}\\s*(${z[K.LOOSEPLAIN]})$|^$`);re("COMPARATOR",`^${z[K.GTLT]}\\s*(${z[K.FULLPLAIN]})$|^$`);re("COMPARATORTRIM",`(\\s*)${z[K.GTLT]}\\s*(${z[K.LOOSEPLAIN]}|${z[K.XRANGEPLAIN]})`,!0);Ye.comparatorTrimReplace="$1$2$3";re("HYPHENRANGE",`^\\s*(${z[K.XRANGEPLAIN]})\\s+-\\s+(${z[K.XRANGEPLAIN]})\\s*$`);re("HYPHENRANGELOOSE",`^\\s*(${z[K.XRANGEPLAINLOOSE]})\\s+-\\s+(${z[K.XRANGEPLAINLOOSE]})\\s*$`);re("STAR","(<|>)?=?\\s*\\*");re("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");re("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var jn=U((Px,Fl)=>{"use strict";var og=Object.freeze({loose:!0}),ag=Object.freeze({}),ug=r=>r?typeof r!="object"?og:r:ag;Fl.exports=ug});var jo=U((Ix,Vl)=>{"use strict";var Ql=/^[0-9]+$/,Ul=(r,e)=>{let t=Ql.test(r),n=Ql.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},cg=(r,e)=>Ul(e,r);Vl.exports={compareIdentifiers:Ul,rcompareIdentifiers:cg}});var Pe=U((Nx,Kl)=>{"use strict";var kn=Ar(),{MAX_LENGTH:zl,MAX_SAFE_INTEGER:Fn}=Tr(),{safeRe:Qn,t:Un}=Ft(),lg=jn(),{compareIdentifiers:Qt}=jo(),ko=class r{constructor(e,t){if(t=lg(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>zl)throw new TypeError(`version is longer than ${zl} characters`);kn("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?Qn[Un.LOOSE]:Qn[Un.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Fn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Fn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Fn||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Fn)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(kn("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),Qt(this.major,e.major)||Qt(this.minor,e.minor)||Qt(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(kn("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Qt(n,i)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(kn("build compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Qt(n,i)}while(++t)}inc(e,t,n){if(e.startsWith("pre")){if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let i=`-${t}`.match(this.options.loose?Qn[Un.PRERELEASELOOSE]:Qn[Un.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];n===!1&&(s=[t]),Qt(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Kl.exports=ko});var yt=U((Lx,Gl)=>{"use strict";var Wl=Pe(),fg=(r,e,t=!1)=>{if(r instanceof Wl)return r;try{return new Wl(r,e)}catch(n){if(!t)return null;throw n}};Gl.exports=fg});var Jl=U((Rx,Hl)=>{"use strict";var hg=yt(),pg=(r,e)=>{let t=hg(r,e);return t?t.version:null};Hl.exports=pg});var Yl=U((_x,Xl)=>{"use strict";var dg=yt(),mg=(r,e)=>{let t=dg(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Xl.exports=mg});var tf=U(($x,ef)=>{"use strict";var Zl=Pe(),gg=(r,e,t,n,i)=>{typeof t=="string"&&(i=n,n=t,t=void 0);try{return new Zl(r instanceof Zl?r.version:r,t).inc(e,n,i).version}catch{return null}};ef.exports=gg});var sf=U((Ox,nf)=>{"use strict";var rf=yt(),yg=(r,e)=>{let t=rf(r,null,!0),n=rf(e,null,!0),i=t.compare(n);if(i===0)return null;let s=i>0,o=s?t:n,a=s?n:t,h=!!o.prerelease.length;if(!!a.prerelease.length&&!h){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let f=h?"pre":"";return t.major!==n.major?f+"major":t.minor!==n.minor?f+"minor":t.patch!==n.patch?f+"patch":"prerelease"};nf.exports=yg});var af=U((qx,of)=>{"use strict";var bg=Pe(),wg=(r,e)=>new bg(r,e).major;of.exports=wg});var cf=U((Bx,uf)=>{"use strict";var Sg=Pe(),vg=(r,e)=>new Sg(r,e).minor;uf.exports=vg});var ff=U((Dx,lf)=>{"use strict";var Eg=Pe(),Tg=(r,e)=>new Eg(r,e).patch;lf.exports=Tg});var pf=U((Mx,hf)=>{"use strict";var Ag=yt(),Cg=(r,e)=>{let t=Ag(r,e);return t&&t.prerelease.length?t.prerelease:null};hf.exports=Cg});var Fe=U((jx,mf)=>{"use strict";var df=Pe(),xg=(r,e,t)=>new df(r,t).compare(new df(e,t));mf.exports=xg});var yf=U((kx,gf)=>{"use strict";var Pg=Fe(),Ig=(r,e,t)=>Pg(e,r,t);gf.exports=Ig});var wf=U((Fx,bf)=>{"use strict";var Ng=Fe(),Lg=(r,e)=>Ng(r,e,!0);bf.exports=Lg});var Vn=U((Qx,vf)=>{"use strict";var Sf=Pe(),Rg=(r,e,t)=>{let n=new Sf(r,t),i=new Sf(e,t);return n.compare(i)||n.compareBuild(i)};vf.exports=Rg});var Tf=U((Ux,Ef)=>{"use strict";var _g=Vn(),$g=(r,e)=>r.sort((t,n)=>_g(t,n,e));Ef.exports=$g});var Cf=U((Vx,Af)=>{"use strict";var Og=Vn(),qg=(r,e)=>r.sort((t,n)=>Og(n,t,e));Af.exports=qg});var Cr=U((zx,xf)=>{"use strict";var Bg=Fe(),Dg=(r,e,t)=>Bg(r,e,t)>0;xf.exports=Dg});var zn=U((Kx,Pf)=>{"use strict";var Mg=Fe(),jg=(r,e,t)=>Mg(r,e,t)<0;Pf.exports=jg});var Fo=U((Wx,If)=>{"use strict";var kg=Fe(),Fg=(r,e,t)=>kg(r,e,t)===0;If.exports=Fg});var Qo=U((Gx,Nf)=>{"use strict";var Qg=Fe(),Ug=(r,e,t)=>Qg(r,e,t)!==0;Nf.exports=Ug});var Kn=U((Hx,Lf)=>{"use strict";var Vg=Fe(),zg=(r,e,t)=>Vg(r,e,t)>=0;Lf.exports=zg});var Wn=U((Jx,Rf)=>{"use strict";var Kg=Fe(),Wg=(r,e,t)=>Kg(r,e,t)<=0;Rf.exports=Wg});var Uo=U((Xx,_f)=>{"use strict";var Gg=Fo(),Hg=Qo(),Jg=Cr(),Xg=Kn(),Yg=zn(),Zg=Wn(),ey=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Gg(r,t,n);case"!=":return Hg(r,t,n);case">":return Jg(r,t,n);case">=":return Xg(r,t,n);case"<":return Yg(r,t,n);case"<=":return Zg(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};_f.exports=ey});var Of=U((Yx,$f)=>{"use strict";var ty=Pe(),ry=yt(),{safeRe:Gn,t:Hn}=Ft(),ny=(r,e)=>{if(r instanceof ty)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?Gn[Hn.COERCEFULL]:Gn[Hn.COERCE]);else{let h=e.includePrerelease?Gn[Hn.COERCERTLFULL]:Gn[Hn.COERCERTL],d;for(;(d=h.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||d.index+d[0].length!==t.index+t[0].length)&&(t=d),h.lastIndex=d.index+d[1].length+d[2].length;h.lastIndex=-1}if(t===null)return null;let n=t[2],i=t[3]||"0",s=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return ry(`${n}.${i}.${s}${o}${a}`,e)};$f.exports=ny});var Bf=U((Zx,qf)=>{"use strict";var Vo=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};qf.exports=Vo});var Qe=U((eP,kf)=>{"use strict";var iy=/\s+/g,zo=class r{constructor(e,t){if(t=oy(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof Ko)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(iy," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Mf(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&py(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&fy)|(this.options.loose&&hy))+":"+e,i=Df.get(n);if(i)return i;let s=this.options.loose,o=s?Be[Ne.HYPHENRANGELOOSE]:Be[Ne.HYPHENRANGE];e=e.replace(o,Ty(this.options.includePrerelease)),de("hyphen replace",e),e=e.replace(Be[Ne.COMPARATORTRIM],uy),de("comparator trim",e),e=e.replace(Be[Ne.TILDETRIM],cy),de("tilde trim",e),e=e.replace(Be[Ne.CARETTRIM],ly),de("caret trim",e);let a=e.split(" ").map(p=>dy(p,this.options)).join(" ").split(/\s+/).map(p=>Ey(p,this.options));s&&(a=a.filter(p=>(de("loose invalid filter",p,this.options),!!p.match(Be[Ne.COMPARATORLOOSE])))),de("range list",a);let h=new Map,d=a.map(p=>new Ko(p,this.options));for(let p of d){if(Mf(p))return[p];h.set(p.value,p)}h.size>1&&h.has("")&&h.delete("");let f=[...h.values()];return Df.set(n,f),f}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>jf(n,t)&&e.set.some(i=>jf(i,t)&&n.every(s=>i.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ay(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Ay(this.set[t],e,this.options))return!0;return!1}};kf.exports=zo;var sy=Bf(),Df=new sy,oy=jn(),Ko=xr(),de=Ar(),ay=Pe(),{safeRe:Be,t:Ne,comparatorTrimReplace:uy,tildeTrimReplace:cy,caretTrimReplace:ly}=Ft(),{FLAG_INCLUDE_PRERELEASE:fy,FLAG_LOOSE:hy}=Tr(),Mf=r=>r.value==="<0.0.0-0",py=r=>r.value==="",jf=(r,e)=>{let t=!0,n=r.slice(),i=n.pop();for(;t&&n.length;)t=n.every(s=>i.intersects(s,e)),i=n.pop();return t},dy=(r,e)=>(de("comp",r,e),r=yy(r,e),de("caret",r),r=my(r,e),de("tildes",r),r=wy(r,e),de("xrange",r),r=vy(r,e),de("stars",r),r),Le=r=>!r||r.toLowerCase()==="x"||r==="*",my=(r,e)=>r.trim().split(/\s+/).map(t=>gy(t,e)).join(" "),gy=(r,e)=>{let t=e.loose?Be[Ne.TILDELOOSE]:Be[Ne.TILDE];return r.replace(t,(n,i,s,o,a)=>{de("tilde",r,n,i,s,o,a);let h;return Le(i)?h="":Le(s)?h=`>=${i}.0.0 <${+i+1}.0.0-0`:Le(o)?h=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(de("replaceTilde pr",a),h=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):h=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,de("tilde return",h),h})},yy=(r,e)=>r.trim().split(/\s+/).map(t=>by(t,e)).join(" "),by=(r,e)=>{de("caret",r,e);let t=e.loose?Be[Ne.CARETLOOSE]:Be[Ne.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,s,o,a,h)=>{de("caret",r,i,s,o,a,h);let d;return Le(s)?d="":Le(o)?d=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Le(a)?s==="0"?d=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:h?(de("replaceCaret pr",h),s==="0"?o==="0"?d=`>=${s}.${o}.${a}-${h} <${s}.${o}.${+a+1}-0`:d=`>=${s}.${o}.${a}-${h} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.${a}-${h} <${+s+1}.0.0-0`):(de("no pr"),s==="0"?o==="0"?d=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:d=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),de("caret return",d),d})},wy=(r,e)=>(de("replaceXRanges",r,e),r.split(/\s+/).map(t=>Sy(t,e)).join(" ")),Sy=(r,e)=>{r=r.trim();let t=e.loose?Be[Ne.XRANGELOOSE]:Be[Ne.XRANGE];return r.replace(t,(n,i,s,o,a,h)=>{de("xRange",r,n,i,s,o,a,h);let d=Le(s),f=d||Le(o),p=f||Le(a),b=p;return i==="="&&b&&(i=""),h=e.includePrerelease?"-0":"",d?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&b?(f&&(o=0),a=0,i===">"?(i=">=",f?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",f?s=+s+1:o=+o+1),i==="<"&&(h="-0"),n=`${i+s}.${o}.${a}${h}`):f?n=`>=${s}.0.0${h} <${+s+1}.0.0-0`:p&&(n=`>=${s}.${o}.0${h} <${s}.${+o+1}.0-0`),de("xRange return",n),n})},vy=(r,e)=>(de("replaceStars",r,e),r.trim().replace(Be[Ne.STAR],"")),Ey=(r,e)=>(de("replaceGTE0",r,e),r.trim().replace(Be[e.includePrerelease?Ne.GTE0PRE:Ne.GTE0],"")),Ty=r=>(e,t,n,i,s,o,a,h,d,f,p,b)=>(Le(n)?t="":Le(i)?t=`>=${n}.0.0${r?"-0":""}`:Le(s)?t=`>=${n}.${i}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,Le(d)?h="":Le(f)?h=`<${+d+1}.0.0-0`:Le(p)?h=`<${d}.${+f+1}.0-0`:b?h=`<=${d}.${f}.${p}-${b}`:r?h=`<${d}.${f}.${+p+1}-0`:h=`<=${h}`,`${t} ${h}`.trim()),Ay=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(de(r[n].semver),r[n].semver!==Ko.ANY&&r[n].semver.prerelease.length>0){let i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var xr=U((tP,Kf)=>{"use strict";var Pr=Symbol("SemVer ANY"),Ho=class r{static get ANY(){return Pr}constructor(e,t){if(t=Ff(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Go("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Pr?this.value="":this.value=this.operator+this.semver.version,Go("comp",this)}parse(e){let t=this.options.loose?Qf[Uf.COMPARATORLOOSE]:Qf[Uf.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Vf(n[2],this.options.loose):this.semver=Pr}toString(){return this.value}test(e){if(Go("Comparator.test",e,this.options.loose),this.semver===Pr||e===Pr)return!0;if(typeof e=="string")try{e=new Vf(e,this.options)}catch{return!1}return Wo(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new zf(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new zf(this.value,t).test(e.semver):(t=Ff(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Wo(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Wo(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Kf.exports=Ho;var Ff=jn(),{safeRe:Qf,t:Uf}=Ft(),Wo=Uo(),Go=Ar(),Vf=Pe(),zf=Qe()});var Ir=U((rP,Wf)=>{"use strict";var Cy=Qe(),xy=(r,e,t)=>{try{e=new Cy(e,t)}catch{return!1}return e.test(r)};Wf.exports=xy});var Hf=U((nP,Gf)=>{"use strict";var Py=Qe(),Iy=(r,e)=>new Py(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Gf.exports=Iy});var Xf=U((iP,Jf)=>{"use strict";var Ny=Pe(),Ly=Qe(),Ry=(r,e,t)=>{let n=null,i=null,s=null;try{s=new Ly(e,t)}catch{return null}return r.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Ny(n,t))}),n};Jf.exports=Ry});var Zf=U((sP,Yf)=>{"use strict";var _y=Pe(),$y=Qe(),Oy=(r,e,t)=>{let n=null,i=null,s=null;try{s=new $y(e,t)}catch{return null}return r.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new _y(n,t))}),n};Yf.exports=Oy});var rh=U((oP,th)=>{"use strict";var Jo=Pe(),qy=Qe(),eh=Cr(),By=(r,e)=>{r=new qy(r,e);let t=new Jo("0.0.0");if(r.test(t)||(t=new Jo("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let i=r.set[n],s=null;i.forEach(o=>{let a=new Jo(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||eh(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!t||eh(t,s))&&(t=s)}return t&&r.test(t)?t:null};th.exports=By});var ih=U((aP,nh)=>{"use strict";var Dy=Qe(),My=(r,e)=>{try{return new Dy(r,e).range||"*"}catch{return null}};nh.exports=My});var Jn=U((uP,uh)=>{"use strict";var jy=Pe(),ah=xr(),{ANY:ky}=ah,Fy=Qe(),Qy=Ir(),sh=Cr(),oh=zn(),Uy=Wn(),Vy=Kn(),zy=(r,e,t,n)=>{r=new jy(r,n),e=new Fy(e,n);let i,s,o,a,h;switch(t){case">":i=sh,s=Uy,o=oh,a=">",h=">=";break;case"<":i=oh,s=Vy,o=sh,a="<",h="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Qy(r,e,n))return!1;for(let d=0;d<e.set.length;++d){let f=e.set[d],p=null,b=null;if(f.forEach(w=>{w.semver===ky&&(w=new ah(">=0.0.0")),p=p||w,b=b||w,i(w.semver,p.semver,n)?p=w:o(w.semver,b.semver,n)&&(b=w)}),p.operator===a||p.operator===h||(!b.operator||b.operator===a)&&s(r,b.semver))return!1;if(b.operator===h&&o(r,b.semver))return!1}return!0};uh.exports=zy});var lh=U((cP,ch)=>{"use strict";var Ky=Jn(),Wy=(r,e,t)=>Ky(r,e,">",t);ch.exports=Wy});var hh=U((lP,fh)=>{"use strict";var Gy=Jn(),Hy=(r,e,t)=>Gy(r,e,"<",t);fh.exports=Hy});var mh=U((fP,dh)=>{"use strict";var ph=Qe(),Jy=(r,e,t)=>(r=new ph(r,t),e=new ph(e,t),r.intersects(e,t));dh.exports=Jy});var yh=U((hP,gh)=>{"use strict";var Xy=Ir(),Yy=Fe();gh.exports=(r,e,t)=>{let n=[],i=null,s=null,o=r.sort((f,p)=>Yy(f,p,t));for(let f of o)Xy(f,e,t)?(s=f,i||(i=f)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[f,p]of n)f===p?a.push(f):!p&&f===o[0]?a.push("*"):p?f===o[0]?a.push(`<=${p}`):a.push(`${f} - ${p}`):a.push(`>=${f}`);let h=a.join(" || "),d=typeof e.raw=="string"?e.raw:String(e);return h.length<d.length?h:e}});var Th=U((pP,Eh)=>{"use strict";var bh=Qe(),Yo=xr(),{ANY:Xo}=Yo,Nr=Ir(),Zo=Fe(),Zy=(r,e,t={})=>{if(r===e)return!0;r=new bh(r,t),e=new bh(e,t);let n=!1;e:for(let i of r.set){for(let s of e.set){let o=t0(i,s,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},e0=[new Yo(">=0.0.0-0")],wh=[new Yo(">=0.0.0")],t0=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===Xo){if(e.length===1&&e[0].semver===Xo)return!0;t.includePrerelease?r=e0:r=wh}if(e.length===1&&e[0].semver===Xo){if(t.includePrerelease)return!0;e=wh}let n=new Set,i,s;for(let w of r)w.operator===">"||w.operator===">="?i=Sh(i,w,t):w.operator==="<"||w.operator==="<="?s=vh(s,w,t):n.add(w.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Zo(i.semver,s.semver,t),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let w of n){if(i&&!Nr(w,String(i),t)||s&&!Nr(w,String(s),t))return null;for(let g of e)if(!Nr(w,String(g),t))return!1;return!0}let a,h,d,f,p=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,b=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&s.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let w of e){if(f=f||w.operator===">"||w.operator===">=",d=d||w.operator==="<"||w.operator==="<=",i){if(b&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===b.major&&w.semver.minor===b.minor&&w.semver.patch===b.patch&&(b=!1),w.operator===">"||w.operator===">="){if(a=Sh(i,w,t),a===w&&a!==i)return!1}else if(i.operator===">="&&!Nr(i.semver,String(w),t))return!1}if(s){if(p&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===p.major&&w.semver.minor===p.minor&&w.semver.patch===p.patch&&(p=!1),w.operator==="<"||w.operator==="<="){if(h=vh(s,w,t),h===w&&h!==s)return!1}else if(s.operator==="<="&&!Nr(s.semver,String(w),t))return!1}if(!w.operator&&(s||i)&&o!==0)return!1}return!(i&&d&&!s&&o!==0||s&&f&&!i&&o!==0||b||p)},Sh=(r,e,t)=>{if(!r)return e;let n=Zo(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},vh=(r,e,t)=>{if(!r)return e;let n=Zo(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};Eh.exports=Zy});var Xn=U((dP,xh)=>{"use strict";var ea=Ft(),Ah=Tr(),r0=Pe(),Ch=jo(),n0=yt(),i0=Jl(),s0=Yl(),o0=tf(),a0=sf(),u0=af(),c0=cf(),l0=ff(),f0=pf(),h0=Fe(),p0=yf(),d0=wf(),m0=Vn(),g0=Tf(),y0=Cf(),b0=Cr(),w0=zn(),S0=Fo(),v0=Qo(),E0=Kn(),T0=Wn(),A0=Uo(),C0=Of(),x0=xr(),P0=Qe(),I0=Ir(),N0=Hf(),L0=Xf(),R0=Zf(),_0=rh(),$0=ih(),O0=Jn(),q0=lh(),B0=hh(),D0=mh(),M0=yh(),j0=Th();xh.exports={parse:n0,valid:i0,clean:s0,inc:o0,diff:a0,major:u0,minor:c0,patch:l0,prerelease:f0,compare:h0,rcompare:p0,compareLoose:d0,compareBuild:m0,sort:g0,rsort:y0,gt:b0,lt:w0,eq:S0,neq:v0,gte:E0,lte:T0,cmp:A0,coerce:C0,Comparator:x0,Range:P0,satisfies:I0,toComparators:N0,maxSatisfying:L0,minSatisfying:R0,minVersion:_0,validRange:$0,outside:O0,gtr:q0,ltr:B0,intersects:D0,simplifyRange:M0,subset:j0,SemVer:r0,re:ea.re,src:ea.src,tokens:ea.t,SEMVER_SPEC_VERSION:Ah.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ah.RELEASE_TYPES,compareIdentifiers:Ch.compareIdentifiers,rcompareIdentifiers:Ch.rcompareIdentifiers}});var Ih=U((mP,Ph)=>{var k0=Xn();Ph.exports=k0.satisfies(process.version,">=15.7.0")});var Lh=U((gP,Nh)=>{var F0=Xn();Nh.exports=F0.satisfies(process.version,">=16.9.0")});var ta=U((yP,Rh)=>{var Q0=Ih(),U0=Lh(),V0={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},z0={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Rh.exports=function(r,e){if(!r||!e)return;let t=e.asymmetricKeyType;if(!t)return;let n=V0[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(r))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(Q0)switch(t){case"ec":let i=e.asymmetricKeyDetails.namedCurve,s=z0[r];if(i!==s)throw new Error(`"alg" parameter "${r}" requires curve "${s}".`);break;case"rsa-pss":if(U0){let o=parseInt(r.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:h,saltLength:d}=e.asymmetricKeyDetails;if(a!==`sha${o}`||h!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${r}.`);if(d!==void 0&&d>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${r}.`)}break}}});var ra=U((bP,_h)=>{var K0=Xn();_h.exports=K0.satisfies(process.version,"^6.12.0 || >=8.0.0")});var qh=U((wP,Oh)=>{var pe=Er(),W0=Oo(),$h=qo(),G0=$o(),H0=Bo(),J0=ta(),X0=ra(),Y0=On(),{KeyObject:Z0,createSecretKey:eb,createPublicKey:tb}=require("crypto"),na=["RS256","RS384","RS512"],rb=["ES256","ES384","ES512"],ia=["RS256","RS384","RS512"],nb=["HS256","HS384","HS512"];X0&&(na.splice(na.length,0,"PS256","PS384","PS512"),ia.splice(ia.length,0,"PS256","PS384","PS512"));Oh.exports=function(r,e,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let i;if(n?i=n:i=function(f,p){if(f)throw f;return p},t.clockTimestamp&&typeof t.clockTimestamp!="number")return i(new pe("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return i(new pe("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return i(new pe("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!r)return i(new pe("jwt must be provided"));if(typeof r!="string")return i(new pe("jwt must be a string"));let o=r.split(".");if(o.length!==3)return i(new pe("jwt malformed"));let a;try{a=G0(r,{complete:!0})}catch(f){return i(f)}if(!a)return i(new pe("invalid token"));let h=a.header,d;if(typeof e=="function"){if(!n)return i(new pe("verify must be called asynchronous if secret or public key is provided as a callback"));d=e}else d=function(f,p){return p(null,e)};return d(h,function(f,p){if(f)return i(new pe("error in secret or public key callback: "+f.message));let b=o[2].trim()!=="";if(!b&&p)return i(new pe("jwt signature is required"));if(b&&!p)return i(new pe("secret or public key must be provided"));if(!b&&!t.algorithms)return i(new pe('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof Z0))try{p=tb(p)}catch{try{p=eb(typeof p=="string"?Buffer.from(p):p)}catch{return i(new pe("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(p.type==="secret"?t.algorithms=nb:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?t.algorithms=ia:p.asymmetricKeyType==="ec"?t.algorithms=rb:t.algorithms=na),t.algorithms.indexOf(a.header.alg)===-1)return i(new pe("invalid algorithm"));if(h.alg.startsWith("HS")&&p.type!=="secret")return i(new pe(`secretOrPublicKey must be a symmetric key when using ${h.alg}`));if(/^(?:RS|PS|ES)/.test(h.alg)&&p.type!=="public")return i(new pe(`secretOrPublicKey must be an asymmetric key when using ${h.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{J0(h.alg,p)}catch(c){return i(c)}let w;try{w=Y0.verify(r,a.header.alg,p)}catch(c){return i(c)}if(!w)return i(new pe("invalid signature"));let g=a.payload;if(typeof g.nbf<"u"&&!t.ignoreNotBefore){if(typeof g.nbf!="number")return i(new pe("invalid nbf value"));if(g.nbf>s+(t.clockTolerance||0))return i(new W0("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!t.ignoreExpiration){if(typeof g.exp!="number")return i(new pe("invalid exp value"));if(s>=g.exp+(t.clockTolerance||0))return i(new $h("jwt expired",new Date(g.exp*1e3)))}if(t.audience){let c=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(T){return c.some(function(A){return A instanceof RegExp?A.test(T):A===T})}))return i(new pe("jwt audience invalid. expected: "+c.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&g.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(g.iss)===-1))return i(new pe("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&g.sub!==t.subject)return i(new pe("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&g.jti!==t.jwtid)return i(new pe("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&g.nonce!==t.nonce)return i(new pe("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof g.iat!="number")return i(new pe("iat required when maxAge is specified"));let c=H0(t.maxAge,g.iat);if(typeof c>"u")return i(new pe('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=c+(t.clockTolerance||0))return i(new $h("maxAge exceeded",new Date(c*1e3)))}if(t.complete===!0){let c=a.signature;return i(null,{header:h,payload:g,signature:c})}return i(null,g)})}});var Fh=U((SP,kh)=>{var Bh=1/0,Mh=9007199254740991,ib=17976931348623157e292,Dh=NaN,sb="[object Arguments]",ob="[object Function]",ab="[object GeneratorFunction]",ub="[object String]",cb="[object Symbol]",lb=/^\s+|\s+$/g,fb=/^[-+]0x[0-9a-f]+$/i,hb=/^0b[01]+$/i,pb=/^0o[0-7]+$/i,db=/^(?:0|[1-9]\d*)$/,mb=parseInt;function gb(r,e){for(var t=-1,n=r?r.length:0,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}function yb(r,e,t,n){for(var i=r.length,s=t+(n?1:-1);n?s--:++s<i;)if(e(r[s],s,r))return s;return-1}function bb(r,e,t){if(e!==e)return yb(r,wb,t);for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}function wb(r){return r!==r}function Sb(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function vb(r,e){return gb(e,function(t){return r[t]})}function Eb(r,e){return function(t){return r(e(t))}}var Yn=Object.prototype,oa=Yn.hasOwnProperty,Zn=Yn.toString,Tb=Yn.propertyIsEnumerable,Ab=Eb(Object.keys,Object),Cb=Math.max;function xb(r,e){var t=jh(r)||Rb(r)?Sb(r.length,String):[],n=t.length,i=!!n;for(var s in r)(e||oa.call(r,s))&&!(i&&(s=="length"||Ib(s,n)))&&t.push(s);return t}function Pb(r){if(!Nb(r))return Ab(r);var e=[];for(var t in Object(r))oa.call(r,t)&&t!="constructor"&&e.push(t);return e}function Ib(r,e){return e=e??Mh,!!e&&(typeof r=="number"||db.test(r))&&r>-1&&r%1==0&&r<e}function Nb(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Yn;return r===t}function Lb(r,e,t,n){r=aa(r)?r:Fb(r),t=t&&!n?Mb(t):0;var i=r.length;return t<0&&(t=Cb(i+t,0)),qb(r)?t<=i&&r.indexOf(e,t)>-1:!!i&&bb(r,e,t)>-1}function Rb(r){return _b(r)&&oa.call(r,"callee")&&(!Tb.call(r,"callee")||Zn.call(r)==sb)}var jh=Array.isArray;function aa(r){return r!=null&&Ob(r.length)&&!$b(r)}function _b(r){return ua(r)&&aa(r)}function $b(r){var e=sa(r)?Zn.call(r):"";return e==ob||e==ab}function Ob(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Mh}function sa(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function ua(r){return!!r&&typeof r=="object"}function qb(r){return typeof r=="string"||!jh(r)&&ua(r)&&Zn.call(r)==ub}function Bb(r){return typeof r=="symbol"||ua(r)&&Zn.call(r)==cb}function Db(r){if(!r)return r===0?r:0;if(r=jb(r),r===Bh||r===-Bh){var e=r<0?-1:1;return e*ib}return r===r?r:0}function Mb(r){var e=Db(r),t=e%1;return e===e?t?e-t:e:0}function jb(r){if(typeof r=="number")return r;if(Bb(r))return Dh;if(sa(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=sa(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(lb,"");var t=hb.test(r);return t||pb.test(r)?mb(r.slice(2),t?2:8):fb.test(r)?Dh:+r}function kb(r){return aa(r)?xb(r):Pb(r)}function Fb(r){return r?vb(r,kb(r)):[]}kh.exports=Lb});var Uh=U((vP,Qh)=>{var Qb="[object Boolean]",Ub=Object.prototype,Vb=Ub.toString;function zb(r){return r===!0||r===!1||Kb(r)&&Vb.call(r)==Qb}function Kb(r){return!!r&&typeof r=="object"}Qh.exports=zb});var Gh=U((EP,Wh)=>{var Vh=1/0,Wb=17976931348623157e292,zh=NaN,Gb="[object Symbol]",Hb=/^\s+|\s+$/g,Jb=/^[-+]0x[0-9a-f]+$/i,Xb=/^0b[01]+$/i,Yb=/^0o[0-7]+$/i,Zb=parseInt,ew=Object.prototype,tw=ew.toString;function rw(r){return typeof r=="number"&&r==ow(r)}function Kh(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function nw(r){return!!r&&typeof r=="object"}function iw(r){return typeof r=="symbol"||nw(r)&&tw.call(r)==Gb}function sw(r){if(!r)return r===0?r:0;if(r=aw(r),r===Vh||r===-Vh){var e=r<0?-1:1;return e*Wb}return r===r?r:0}function ow(r){var e=sw(r),t=e%1;return e===e?t?e-t:e:0}function aw(r){if(typeof r=="number")return r;if(iw(r))return zh;if(Kh(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Kh(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Hb,"");var t=Xb.test(r);return t||Yb.test(r)?Zb(r.slice(2),t?2:8):Jb.test(r)?zh:+r}Wh.exports=rw});var Jh=U((TP,Hh)=>{var uw="[object Number]",cw=Object.prototype,lw=cw.toString;function fw(r){return!!r&&typeof r=="object"}function hw(r){return typeof r=="number"||fw(r)&&lw.call(r)==uw}Hh.exports=hw});var ep=U((AP,Zh)=>{var pw="[object Object]";function dw(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}function mw(r,e){return function(t){return r(e(t))}}var gw=Function.prototype,Xh=Object.prototype,Yh=gw.toString,yw=Xh.hasOwnProperty,bw=Yh.call(Object),ww=Xh.toString,Sw=mw(Object.getPrototypeOf,Object);function vw(r){return!!r&&typeof r=="object"}function Ew(r){if(!vw(r)||ww.call(r)!=pw||dw(r))return!1;var e=Sw(r);if(e===null)return!0;var t=yw.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Yh.call(t)==bw}Zh.exports=Ew});var rp=U((CP,tp)=>{var Tw="[object String]",Aw=Object.prototype,Cw=Aw.toString,xw=Array.isArray;function Pw(r){return!!r&&typeof r=="object"}function Iw(r){return typeof r=="string"||!xw(r)&&Pw(r)&&Cw.call(r)==Tw}tp.exports=Iw});var ap=U((xP,op)=>{var Nw="Expected a function",np=1/0,Lw=17976931348623157e292,ip=NaN,Rw="[object Symbol]",_w=/^\s+|\s+$/g,$w=/^[-+]0x[0-9a-f]+$/i,Ow=/^0b[01]+$/i,qw=/^0o[0-7]+$/i,Bw=parseInt,Dw=Object.prototype,Mw=Dw.toString;function jw(r,e){var t;if(typeof e!="function")throw new TypeError(Nw);return r=Vw(r),function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=void 0),t}}function kw(r){return jw(2,r)}function sp(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function Fw(r){return!!r&&typeof r=="object"}function Qw(r){return typeof r=="symbol"||Fw(r)&&Mw.call(r)==Rw}function Uw(r){if(!r)return r===0?r:0;if(r=zw(r),r===np||r===-np){var e=r<0?-1:1;return e*Lw}return r===r?r:0}function Vw(r){var e=Uw(r),t=e%1;return e===e?t?e-t:e:0}function zw(r){if(typeof r=="number")return r;if(Qw(r))return ip;if(sp(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=sp(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(_w,"");var t=Ow.test(r);return t||qw.test(r)?Bw(r.slice(2),t?2:8):$w.test(r)?ip:+r}op.exports=kw});var gp=U((PP,mp)=>{var up=Bo(),Kw=ra(),Ww=ta(),cp=On(),Gw=Fh(),ei=Uh(),lp=Gh(),ca=Jh(),hp=ep(),ct=rp(),Hw=ap(),{KeyObject:Jw,createSecretKey:Xw,createPrivateKey:Yw}=require("crypto"),pp=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];Kw&&pp.splice(3,0,"PS256","PS384","PS512");var Zw={expiresIn:{isValid:function(r){return lp(r)||ct(r)&&r},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(r){return lp(r)||ct(r)&&r},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(r){return ct(r)||Array.isArray(r)},message:'"audience" must be a string or array'},algorithm:{isValid:Gw.bind(null,pp),message:'"algorithm" must be a valid string enum value'},header:{isValid:hp,message:'"header" must be an object'},encoding:{isValid:ct,message:'"encoding" must be a string'},issuer:{isValid:ct,message:'"issuer" must be a string'},subject:{isValid:ct,message:'"subject" must be a string'},jwtid:{isValid:ct,message:'"jwtid" must be a string'},noTimestamp:{isValid:ei,message:'"noTimestamp" must be a boolean'},keyid:{isValid:ct,message:'"keyid" must be a string'},mutatePayload:{isValid:ei,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:ei,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:ei,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},eS={iat:{isValid:ca,message:'"iat" should be a number of seconds'},exp:{isValid:ca,message:'"exp" should be a number of seconds'},nbf:{isValid:ca,message:'"nbf" should be a number of seconds'}};function dp(r,e,t,n){if(!hp(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(i){let s=r[i];if(!s){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!s.isValid(t[i]))throw new Error(s.message)})}function tS(r){return dp(Zw,!1,r,"options")}function rS(r){return dp(eS,!0,r,"payload")}var fp={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},nS=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];mp.exports=function(r,e,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let i=typeof r=="object"&&!Buffer.isBuffer(r),s=Object.assign({alg:t.algorithm||"HS256",typ:i?"JWT":void 0,kid:t.keyid},t.header);function o(d){if(n)return n(d);throw d}if(!e&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof Jw))try{e=Yw(e)}catch{try{e=Xw(typeof e=="string"?Buffer.from(e):e)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&e.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(e.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!t.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof r>"u")return o(new Error("payload is required"));if(i){try{rS(r)}catch(d){return o(d)}t.mutatePayload||(r=Object.assign({},r))}else{let d=nS.filter(function(f){return typeof t[f]<"u"});if(d.length>0)return o(new Error("invalid "+d.join(",")+" option for "+typeof r+" payload"))}if(typeof r.exp<"u"&&typeof t.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof r.nbf<"u"&&typeof t.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{tS(t)}catch(d){return o(d)}if(!t.allowInvalidAsymmetricKeyTypes)try{Ww(s.alg,e)}catch(d){return o(d)}let a=r.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete r.iat:i&&(r.iat=a),typeof t.notBefore<"u"){try{r.nbf=up(t.notBefore,a)}catch(d){return o(d)}if(typeof r.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof r=="object"){try{r.exp=up(t.expiresIn,a)}catch(d){return o(d)}if(typeof r.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(fp).forEach(function(d){let f=fp[d];if(typeof t[d]<"u"){if(typeof r[f]<"u")return o(new Error('Bad "options.'+d+'" option. The payload already has an "'+f+'" property.'));r[f]=t[d]}});let h=t.encoding||"utf8";if(typeof n=="function")n=n&&Hw(n),cp.createSign({header:s,privateKey:e,payload:r,encoding:h}).once("error",n).once("done",function(d){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&d.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));n(null,d)});else{let d=cp.sign({header:s,payload:r,secret:e,encoding:h});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&d.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return d}}});var bp=U((IP,yp)=>{yp.exports={decode:$o(),verify:qh(),sign:gp(),JsonWebTokenError:Er(),NotBeforeError:Oo(),TokenExpiredError:qo()}});var sS={};ga(sS,{handler:()=>iS});module.exports=Np(sS);function ai({statusCode:r,body:e}){return{statusCode:r,body:e?JSON.stringify(e):void 0}}var E=Symbol.for("drizzle:entityKind"),uS=Symbol.for("drizzle:hasOwnEntityKind");function B(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,E))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(E in t&&t[E]===e[E])return!0;t=Object.getPrototypeOf(t)}return!1}var ue=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[E]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Or=class{static[E]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var Ve=Symbol.for("drizzle:Name");var qr=class{static[E]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:n,columns:i,foreignColumns:s}=e();return{name:n,columns:i,foreignTable:s[0].table,foreignColumns:s}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ui(e,this)}},ui=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[E]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(a=>a.name),s=n.map(a=>a.name),o=[this.table[Ve],...i,n[0].table[Ve],...s];return e??`${o.join("_")}_fk`}};function Br(r,...e){return r(...e)}function fi(r,e){return`${r[Ve]}_${e.join("_")}_unique`}var ci=class{constructor(e,t){this.name=t,this.columns=e}static[E]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new li(e,this.columns,this.nullsNotDistinctConfig,this.name)}},ba=class{static[E]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new ci(e,this.name)}},li=class{constructor(e,t,n,i){this.table=e,this.columns=t,this.name=i??fi(this.table,this.columns.map(s=>s.name)),this.nullsNotDistinct=n}static[E]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function wa(r,e,t){for(let n=e;n<r.length;n++){let i=r[n];if(i==="\\"){n++;continue}if(i==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(i===","||i==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function Sa(r,e=0){let t=[],n=e,i=!1;for(;n<r.length;){let s=r[n];if(s===","){(i||n===e)&&t.push(""),i=!0,n++;continue}if(i=!1,s==="\\"){n+=2;continue}if(s==='"'){let[h,d]=wa(r,n+1,!0);t.push(h),n=d;continue}if(s==="}")return[t,n+1];if(s==="{"){let[h,d]=Sa(r,n+1);t.push(h),n=d;continue}let[o,a]=wa(r,n,!1);t.push(o),n=a}return[t,n]}function va(r){let[e]=Sa(r,1);return e}function hi(r){return`{${r.map(e=>Array.isArray(e)?hi(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var V=class extends Or{foreignKeyConfigs=[];static[E]="PgColumnBuilder";array(e){return new di(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>Br((s,o)=>{let a=new qr(()=>{let h=s();return{columns:[e],foreignColumns:[h]}});return o.onUpdate&&a.onUpdate(o.onUpdate),o.onDelete&&a.onDelete(o.onDelete),a.build(t)},n,i))}buildExtraConfigColumn(e){return new pi(e,this.config)}},k=class extends ue{constructor(e,t){t.uniqueName||(t.uniqueName=fi(e,[t.name])),super(e,t),this.table=e}static[E]="PgColumn"},pi=class extends k{static[E]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},Ea=class{static[E]="IndexedColumn";constructor(e,t,n,i){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=i}name;keyAsName;type;indexConfig},di=class extends V{static[E]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new mi(e,this.config,t)}},mi=class r extends k{constructor(e,t,n,i){super(e,t),this.baseColumn=n,this.range=i,this.size=t.size}size;static[E]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=va(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){let n=e.map(i=>i===null?null:B(this.baseColumn,r)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return t?n:hi(n)}};var gi=class extends V{static[E]="PgEnumObjectColumnBuilder";constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new yi(e,this.config)}},yi=class extends k{static[E]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}},Dr=Symbol.for("drizzle:isPgEnum");function Ta(r){return!!r&&typeof r=="function"&&Dr in r&&r[Dr]===!0}var bi=class extends V{static[E]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new wi(e,this.config)}},wi=class extends k{static[E]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}};function Si(r,e){return Array.isArray(e)?Lp(r,[...e],void 0):Rp(r,e,void 0)}function Lp(r,e,t){let n=Object.assign(i=>new bi(i??"",n),{enumName:r,enumValues:e,schema:t,[Dr]:!0});return n}function Rp(r,e,t){let n=Object.assign(i=>new gi(i??"",n),{enumName:r,enumValues:Object.values(e),schema:t,[Dr]:!0});return n}var ge=class{static[E]="Subquery";constructor(e,t,n,i=!1,s=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:i,usedTables:s}}},St=class extends ge{static[E]="WithSubquery"};var Aa="0.44.3";var vi,Ei,we={startActiveSpan(r,e){return vi?(Ei||(Ei=vi.trace.getTracer("drizzle-orm",Aa)),Br((t,n)=>n.startActiveSpan(r,i=>{try{return e(i)}catch(s){throw i.setStatus({code:t.SpanStatusCode.ERROR,message:s instanceof Error?s.message:"Unknown error"}),s}finally{i.end()}}),vi,Ei)):e()}};var he=Symbol.for("drizzle:ViewBaseConfig");var ft=Symbol.for("drizzle:Schema"),Mr=Symbol.for("drizzle:Columns"),Ca=Symbol.for("drizzle:ExtraConfigColumns"),Ti=Symbol.for("drizzle:OriginalName"),Ai=Symbol.for("drizzle:BaseName"),Kt=Symbol.for("drizzle:IsAlias"),xa=Symbol.for("drizzle:ExtraConfigBuilder"),_p=Symbol.for("drizzle:IsDrizzleTable"),Q=class{static[E]="Table";static Symbol={Name:Ve,Schema:ft,OriginalName:Ti,Columns:Mr,ExtraConfigColumns:Ca,BaseName:Ai,IsAlias:Kt,ExtraConfigBuilder:xa};[Ve];[Ti];[ft];[Mr];[Ca];[Ai];[Kt]=!1;[_p]=!0;[xa]=void 0;constructor(e,t,n){this[Ve]=this[Ti]=e,this[ft]=t,this[Ai]=n}};function Re(r){return r[Ve]}function ht(r){return`${r[ft]??"public"}.${r[Ve]}`}var Pa=class{static[E]="FakePrimitiveParam"};function Ci(r){return r!=null&&typeof r.getSQL=="function"}function $p(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var Se=class{static[E]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new H([this])}},H=class r{constructor(e){this.queryChunks=e;for(let t of e)if(B(t,Q)){let n=t[Q.Symbol.Schema];this.usedTables.push(n===void 0?t[Q.Symbol.Name]:n+"."+t[Q.Symbol.Name])}}static[E]="SQL";decoder=Na;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return we.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:i,escapeName:s,escapeParam:o,prepareTyping:a,inlineParams:h,paramStartIndex:d}=n;return $p(e.map(f=>{if(B(f,Se))return{sql:f.value.join(""),params:[]};if(B(f,Wt))return{sql:s(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){let p=[new Se("(")];for(let[b,w]of f.entries())p.push(w),b<f.length-1&&p.push(new Se(", "));return p.push(new Se(")")),this.buildQueryFromSourceParams(p,n)}if(B(f,r))return this.buildQueryFromSourceParams(f.queryChunks,{...n,inlineParams:h||f.shouldInlineParams});if(B(f,Q)){let p=f[Q.Symbol.Schema],b=f[Q.Symbol.Name];return{sql:p===void 0||f[Kt]?s(b):s(p)+"."+s(b),params:[]}}if(B(f,ue)){let p=i.getColumnCasing(f);if(t.invokeSource==="indexes")return{sql:s(p),params:[]};let b=f.table[Q.Symbol.Schema];return{sql:f.table[Kt]||b===void 0?s(f.table[Q.Symbol.Name])+"."+s(p):s(b)+"."+s(f.table[Q.Symbol.Name])+"."+s(p),params:[]}}if(B(f,Ie)){let p=f[he].schema,b=f[he].name;return{sql:p===void 0||f[he].isAlias?s(b):s(p)+"."+s(b),params:[]}}if(B(f,_e)){if(B(f.value,et))return{sql:o(d.value++,f),params:[f],typings:["none"]};let p=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(B(p,r))return this.buildQueryFromSourceParams([p],n);if(h)return{sql:this.mapInlineParam(p,n),params:[]};let b=["none"];return a&&(b=[a(f.encoder)]),{sql:o(d.value++,p),params:[p],typings:b}}return B(f,et)?{sql:o(d.value++,f),params:[f],typings:["none"]}:B(f,r.Aliased)&&f.fieldAlias!==void 0?{sql:s(f.fieldAlias),params:[]}:B(f,ge)?f._.isWith?{sql:s(f._.alias),params:[]}:this.buildQueryFromSourceParams([new Se("("),f._.sql,new Se(") "),new Wt(f._.alias)],n):Ta(f)?f.schema?{sql:s(f.schema)+"."+s(f.enumName),params:[]}:{sql:s(f.enumName),params:[]}:Ci(f)?f.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([f.getSQL()],n):this.buildQueryFromSourceParams([new Se("("),f.getSQL(),new Se(")")],n):h?{sql:this.mapInlineParam(f,n),params:[]}:{sql:o(d.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new r.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},Wt=class{constructor(e){this.value=e}static[E]="Name";brand;getSQL(){return new H([this])}};function Ia(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var Na={mapFromDriverValue:r=>r},La={mapToDriverValue:r=>r},XS={...Na,...La},_e=class{constructor(e,t=La){this.value=e,this.encoder=t}static[E]="Param";brand;getSQL(){return new H([this])}};function I(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new Se(r[0]));for(let[n,i]of e.entries())t.push(i,new Se(r[n+1]));return new H(t)}(r=>{function e(){return new H([])}r.empty=e;function t(h){return new H(h)}r.fromList=t;function n(h){return new H([new Se(h)])}r.raw=n;function i(h,d){let f=[];for(let[p,b]of h.entries())p>0&&d!==void 0&&f.push(d),f.push(b);return new H(f)}r.join=i;function s(h){return new Wt(h)}r.identifier=s;function o(h){return new et(h)}r.placeholder=o;function a(h,d){return new _e(h,d)}r.param=a})(I||(I={}));(r=>{class e{constructor(n,i){this.sql=n,this.fieldAlias=i}static[E]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(H||(H={}));var et=class{constructor(e){this.name=e}static[E]="Placeholder";getSQL(){return new H([this])}};function jr(r,e){return r.map(t=>{if(B(t,et)){if(!(t.name in e))throw new Error(`No value for placeholder "${t.name}" was provided`);return e[t.name]}if(B(t,_e)&&B(t.value,et)){if(!(t.value.name in e))throw new Error(`No value for placeholder "${t.value.name}" was provided`);return t.encoder.mapToDriverValue(e[t.value.name])}return t})}var Op=Symbol.for("drizzle:IsDrizzleView"),Ie=class{static[E]="View";[he];[Op]=!0;constructor({name:e,schema:t,selectedFields:n,query:i}){this[he]={name:e,originalName:e,schema:t,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new H([this])}};ue.prototype.getSQL=function(){return new H([this])};Q.prototype.getSQL=function(){return new H([this])};ge.prototype.getSQL=function(){return new H([this])};var pt=class{constructor(e){this.table=e}static[E]="ColumnAliasProxyHandler";get(e,t){return t==="table"?this.table:e[t]}},vt=class{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static[E]="TableAliasProxyHandler";get(e,t){if(t===Q.Symbol.IsAlias)return!0;if(t===Q.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===Q.Symbol.OriginalName)return this.alias;if(t===he)return{...e[he],name:this.alias,isAlias:!0};if(t===Q.Symbol.Columns){let i=e[Q.Symbol.Columns];if(!i)return i;let s={};return Object.keys(i).map(o=>{s[o]=new Proxy(i[o],new pt(new Proxy(e,this)))}),s}let n=e[t];return B(n,ue)?new Proxy(n,new pt(new Proxy(e,this))):n}},Ra=class{constructor(e){this.alias=e}static[E]="RelationTableAliasProxyHandler";get(e,t){return t==="sourceTable"?Gt(e.sourceTable,this.alias):e[t]}};function Gt(r,e){return new Proxy(r,new vt(e,!1))}function He(r,e){return new Proxy(r,new pt(new Proxy(r.table,new vt(e,!1))))}function xi(r,e){return new H.Aliased(Ht(r.sql,e),r.fieldAlias)}function Ht(r,e){return I.join(r.queryChunks.map(t=>B(t,ue)?He(t,e):B(t,H)?Ht(t,e):B(t,H.Aliased)?xi(t,e):t))}var Jt=class extends Error{static[E]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}},kr=class extends Jt{static[E]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var Pi=class{static[E]="ConsoleLogWriter";write(e){console.log(e)}},Fr=class{static[E]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new Pi}logQuery(e,t){let n=t.map(s=>{try{return JSON.stringify(s)}catch{return String(s)}}),i=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}},Qr=class{static[E]="NoopLogger";logQuery(){}};var Ce=class{static[E]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}};function _a(r,e,t){let n={},i=r.reduce((s,{path:o,field:a},h)=>{let d;B(a,ue)?d=a:B(a,H)?d=a.decoder:d=a.sql.decoder;let f=s;for(let[p,b]of o.entries())if(p<o.length-1)b in f||(f[b]={}),f=f[b];else{let w=e[h],g=f[b]=w===null?null:d.mapFromDriverValue(w);if(t&&B(a,ue)&&o.length===2){let c=o[0];c in n?typeof n[c]=="string"&&n[c]!==Re(a.table)&&(n[c]=!1):n[c]=g===null?Re(a.table):!1}}return s},{});if(t&&Object.keys(n).length>0)for(let[s,o]of Object.entries(n))typeof o=="string"&&!t[o]&&(i[s]=null);return i}function Me(r,e){return Object.entries(r).reduce((t,[n,i])=>{if(typeof n!="string")return t;let s=e?[...e,n]:[n];return B(i,ue)||B(i,H)||B(i,H.Aliased)?t.push({path:s,field:i}):B(i,Q)?t.push(...Me(i[Q.Symbol.Columns],s)):t.push(...Me(i,s)),t},[])}function Xt(r,e){let t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let[i,s]of t.entries())if(s!==n[i])return!1;return!0}function Ur(r,e){let t=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,i])=>B(i,H)||B(i,ue)?[n,i]:[n,new _e(i,r[Q.Symbol.Columns][n])]);if(t.length===0)throw new Error("No values to set");return Object.fromEntries(t)}function $a(r,e){for(let t of e)for(let n of Object.getOwnPropertyNames(t.prototype))n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}function Oa(r){return r[Q.Symbol.Columns]}function tt(r){return B(r,ge)?r._.alias:B(r,Ie)?r[he].name:B(r,H)?void 0:r[Q.Symbol.IsAlias]?r[Q.Symbol.Name]:r[Q.Symbol.BaseName]}function oe(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}function qa(r){if(typeof r!="object"||r===null||r.constructor.name!=="Object")return!1;if("logger"in r){let e=typeof r.logger;return!(e!=="boolean"&&(e!=="object"||typeof r.logger.logQuery!="function")&&e!=="undefined")}if("schema"in r){let e=typeof r.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in r){let e=typeof r.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in r)return!(r.mode!=="default"||r.mode!=="planetscale"||r.mode!==void 0);if("connection"in r){let e=typeof r.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in r){let e=typeof r.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(r).length===0}var rt=class extends V{static[E]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var Ii=class extends rt{static[E]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Ni(e,this.config)}},Ni=class extends k{static[E]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Li=class extends rt{static[E]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Ri(e,this.config)}},Ri=class extends k{static[E]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function Ba(r,e){let{name:t,config:n}=oe(r,e);return n.mode==="number"?new Ii(t):new Li(t)}var _i=class extends V{static[E]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new $i(e,this.config)}},$i=class extends k{static[E]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Oi=class extends V{static[E]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new qi(e,this.config)}},qi=class extends k{static[E]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function Da(r,e){let{name:t,config:n}=oe(r,e);return n.mode==="number"?new _i(t):new Oi(t)}var Bi=class extends V{static[E]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Di(e,this.config)}},Di=class extends k{static[E]="PgBoolean";getSQLType(){return"boolean"}};function Ma(r){return new Bi(r??"")}var Mi=class extends V{static[E]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new ji(e,this.config)}},ji=class extends k{static[E]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function ja(r,e={}){let{name:t,config:n}=oe(r,e);return new Mi(t,n)}var ki=class extends V{static[E]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new Fi(e,this.config)}},Fi=class extends k{static[E]="PgCidr";getSQLType(){return"cidr"}};function ka(r){return new ki(r??"")}var Qi=class extends V{static[E]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new Ui(e,this.config)}},Ui=class extends k{static[E]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function Fa(r){return(e,t)=>{let{name:n,config:i}=oe(e,t);return new Qi(n,i,r)}}var Je=class extends V{static[E]="PgDateColumnBaseBuilder";defaultNow(){return this.default(I`now()`)}};var Vi=class extends Je{static[E]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Yt(e,this.config)}},Yt=class extends k{static[E]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},zi=class extends Je{static[E]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new Zt(e,this.config)}},Zt=class extends k{static[E]="PgDateString";getSQLType(){return"date"}};function Vr(r,e){let{name:t,config:n}=oe(r,e);return n?.mode==="date"?new Vi(t):new zi(t)}var Ki=class extends V{static[E]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Wi(e,this.config)}},Wi=class extends k{static[E]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function Qa(r){return new Ki(r??"")}var Gi=class extends V{static[E]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Hi(e,this.config)}},Hi=class extends k{static[E]="PgInet";getSQLType(){return"inet"}};function Ua(r){return new Gi(r??"")}var Ji=class extends rt{static[E]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Xi(e,this.config)}},Xi=class extends k{static[E]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function Xe(r){return new Ji(r??"")}var Yi=class extends V{static[E]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new Zi(e,this.config)}},Zi=class extends k{static[E]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}};function Va(r,e={}){let{name:t,config:n}=oe(r,e);return new Yi(t,n)}var es=class extends V{static[E]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new er(e,this.config)}},er=class extends k{static[E]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function zr(r){return new es(r??"")}var ts=class extends V{static[E]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new tr(e,this.config)}},tr=class extends k{static[E]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function za(r){return new ts(r??"")}var rs=class extends V{static[E]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new ns(e,this.config)}},ns=class extends k{static[E]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},is=class extends V{static[E]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new ss(e,this.config)}},ss=class extends k{static[E]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function Ka(r,e){let{name:t,config:n}=oe(r,e);return!n?.mode||n.mode==="tuple"?new rs(t):new is(t)}var os=class extends V{static[E]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new as(e,this.config)}},as=class extends k{static[E]="PgMacaddr";getSQLType(){return"macaddr"}};function Wa(r){return new os(r??"")}var us=class extends V{static[E]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new cs(e,this.config)}},cs=class extends k{static[E]="PgMacaddr8";getSQLType(){return"macaddr8"}};function Ga(r){return new us(r??"")}var ls=class extends V{static[E]="PgNumericBuilder";constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new rr(e,this.config)}},rr=class extends k{static[E]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},fs=class extends V{static[E]="PgNumericNumberBuilder";constructor(e,t,n){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=n}build(e){return new hs(e,this.config)}},hs=class extends k{static[E]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},ps=class extends V{static[E]="PgNumericBigIntBuilder";constructor(e,t,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=n}build(e){return new ds(e,this.config)}},ds=class extends k{static[E]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function Ha(r,e){let{name:t,config:n}=oe(r,e),i=n?.mode;return i==="number"?new fs(t,n?.precision,n?.scale):i==="bigint"?new ps(t,n?.precision,n?.scale):new ls(t,n?.precision,n?.scale)}var ms=class extends V{static[E]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new gs(e,this.config)}},gs=class extends k{static[E]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},ys=class extends V{static[E]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new bs(e,this.config)}},bs=class extends k{static[E]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function Ja(r,e){let{name:t,config:n}=oe(r,e);return!n?.mode||n.mode==="tuple"?new ms(t):new ys(t)}function qp(r){let e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function Xa(r,e){let t=new ArrayBuffer(8),n=new DataView(t);for(let i=0;i<8;i++)n.setUint8(i,r[e+i]);return n.getFloat64(0,!0)}function ws(r){let e=qp(r),t=0,n=e[t];t+=1;let i=new DataView(e.buffer),s=i.getUint32(t,n===1);t+=4;let o;if(s&536870912&&(o=i.getUint32(t,n===1),t+=4),(s&65535)===1){let a=Xa(e,t);t+=8;let h=Xa(e,t);return t+=8,[a,h]}throw new Error("Unsupported geometry type")}var Ss=class extends V{static[E]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new vs(e,this.config)}},vs=class extends k{static[E]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ws(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},Es=class extends V{static[E]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Ts(e,this.config)}},Ts=class extends k{static[E]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=ws(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function Ya(r,e){let{name:t,config:n}=oe(r,e);return!n?.mode||n.mode==="tuple"?new Ss(t):new Es(t)}var As=class extends V{static[E]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new Cs(e,this.config)}},Cs=class extends k{static[E]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function Za(r){return new As(r??"")}var xs=class extends V{static[E]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ps(e,this.config)}},Ps=class extends k{static[E]="PgSerial";getSQLType(){return"serial"}};function eu(r){return new xs(r??"")}var Is=class extends rt{static[E]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ns(e,this.config)}},Ns=class extends k{static[E]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function tu(r){return new Is(r??"")}var Ls=class extends V{static[E]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Rs(e,this.config)}},Rs=class extends k{static[E]="PgSmallSerial";getSQLType(){return"smallserial"}};function ru(r){return new Ls(r??"")}var _s=class extends V{static[E]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new $s(e,this.config)}},$s=class extends k{static[E]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function nu(r,e={}){let{name:t,config:n}=oe(r,e);return new _s(t,n)}var Os=class extends Je{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static[E]="PgTimeBuilder";build(e){return new nr(e,this.config)}},nr=class extends k{static[E]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function iu(r,e={}){let{name:t,config:n}=oe(r,e);return new Os(t,n.withTimezone??!1,n.precision)}var qs=class extends Je{static[E]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new ir(e,this.config)}},ir=class extends k{static[E]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()},Bs=class extends Je{static[E]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new sr(e,this.config)}},sr=class extends k{static[E]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Kr(r,e={}){let{name:t,config:n}=oe(r,e);return n?.mode==="string"?new Bs(t,n.withTimezone??!1,n.precision):new qs(t,n?.withTimezone??!1,n?.precision)}var Ds=class extends V{static[E]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(I`gen_random_uuid()`)}build(e){return new or(e,this.config)}},or=class extends k{static[E]="PgUUID";getSQLType(){return"uuid"}};function Et(r){return new Ds(r??"")}var Ms=class extends V{static[E]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new js(e,this.config)}},js=class extends k{static[E]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function ze(r,e={}){let{name:t,config:n}=oe(r,e);return new Ms(t,n)}var ks=class extends V{static[E]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new Fs(e,this.config)}},Fs=class extends k{static[E]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function su(r,e){let{name:t,config:n}=oe(r,e);return new ks(t,n)}var Qs=class extends V{static[E]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new Us(e,this.config)}},Us=class extends k{static[E]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function ou(r,e){let{name:t,config:n}=oe(r,e);return new Qs(t,n)}var Vs=class extends V{static[E]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new zs(e,this.config)}},zs=class extends k{static[E]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function au(r,e){let{name:t,config:n}=oe(r,e);return new Vs(t,n)}var Ks=class extends V{static[E]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new Ws(e,this.config)}},Ws=class extends k{static[E]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function uu(r,e){let{name:t,config:n}=oe(r,e);return new Ks(t,n)}function cu(){return{bigint:Ba,bigserial:Da,boolean:Ma,char:ja,cidr:ka,customType:Fa,date:Vr,doublePrecision:Qa,inet:Ua,integer:Xe,interval:Va,json:zr,jsonb:za,line:Ka,macaddr:Wa,macaddr8:Ga,numeric:Ha,point:Ja,geometry:Ya,real:Za,serial:eu,smallint:tu,smallserial:ru,text:nu,time:iu,timestamp:Kr,uuid:Et,varchar:ze,bit:su,halfvec:ou,sparsevec:au,vector:uu}}var Gs=Symbol.for("drizzle:PgInlineForeignKeys"),lu=Symbol.for("drizzle:EnableRLS"),ve=class extends Q{static[E]="PgTable";static Symbol=Object.assign({},Q.Symbol,{InlineForeignKeys:Gs,EnableRLS:lu});[Gs]=[];[lu]=!1;[Q.Symbol.ExtraConfigBuilder]=void 0;[Q.Symbol.ExtraConfigColumns]={}};function Bp(r,e,t,n,i=r){let s=new ve(r,n,i),o=typeof e=="function"?e(cu()):e,a=Object.fromEntries(Object.entries(o).map(([f,p])=>{let b=p;b.setName(f);let w=b.build(s);return s[Gs].push(...b.buildForeignKeys(w,s)),[f,w]})),h=Object.fromEntries(Object.entries(o).map(([f,p])=>{let b=p;b.setName(f);let w=b.buildExtraConfigColumn(s);return[f,w]})),d=Object.assign(s,a);return d[Q.Symbol.Columns]=a,d[Q.Symbol.ExtraConfigColumns]=h,t&&(d[ve.Symbol.ExtraConfigBuilder]=t),Object.assign(d,{enableRLS:()=>(d[ve.Symbol.EnableRLS]=!0,d)})}var Hs=(r,e,t)=>Bp(r,e,t,void 0);var Wr=class{static[E]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new Js(e,this.columns,this.name)}},Js=class{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static[E]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[ve.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function $e(r,e){return Ia(e)&&!Ci(r)&&!B(r,_e)&&!B(r,et)&&!B(r,ue)&&!B(r,Q)&&!B(r,Ie)?new _e(r,e):r}var Tt=(r,e)=>I`${r} = ${$e(e,r)}`,fu=(r,e)=>I`${r} <> ${$e(e,r)}`;function ar(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new H(e):new H([new Se("("),I.join(e,new Se(" and ")),new Se(")")])}function hu(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new H(e):new H([new Se("("),I.join(e,new Se(" or ")),new Se(")")])}function pu(r){return I`not ${r}`}var du=(r,e)=>I`${r} > ${$e(e,r)}`,mu=(r,e)=>I`${r} >= ${$e(e,r)}`,gu=(r,e)=>I`${r} < ${$e(e,r)}`,yu=(r,e)=>I`${r} <= ${$e(e,r)}`;function bu(r,e){return Array.isArray(e)?e.length===0?I`false`:I`${r} in ${e.map(t=>$e(t,r))}`:I`${r} in ${$e(e,r)}`}function wu(r,e){return Array.isArray(e)?e.length===0?I`true`:I`${r} not in ${e.map(t=>$e(t,r))}`:I`${r} not in ${$e(e,r)}`}function Su(r){return I`${r} is null`}function vu(r){return I`${r} is not null`}function Eu(r){return I`exists ${r}`}function Tu(r){return I`not exists ${r}`}function Au(r,e,t){return I`${r} between ${$e(e,r)} and ${$e(t,r)}`}function Cu(r,e,t){return I`${r} not between ${$e(e,r)} and ${$e(t,r)}`}function xu(r,e){return I`${r} like ${e}`}function Pu(r,e){return I`${r} not like ${e}`}function Iu(r,e){return I`${r} ilike ${e}`}function Nu(r,e){return I`${r} not ilike ${e}`}function Lu(r){return I`${r} asc`}function Ru(r){return I`${r} desc`}var Gr=class{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[Q.Symbol.Name]}static[E]="Relation";referencedTableName;fieldName},Xs=class{constructor(e,t){this.table=e,this.config=t}static[E]="Relations"},ot=class r extends Gr{constructor(e,t,n,i){super(e,t,n?.relationName),this.config=n,this.isNullable=i}static[E]="One";withFieldName(e){let t=new r(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}},ur=class r extends Gr{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static[E]="Many";withFieldName(e){let t=new r(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}};function _u(){return{and:ar,between:Au,eq:Tt,exists:Eu,gt:du,gte:mu,ilike:Iu,inArray:bu,isNull:Su,isNotNull:vu,like:xu,lt:gu,lte:yu,ne:fu,not:pu,notBetween:Cu,notExists:Tu,notLike:Pu,notIlike:Nu,notInArray:wu,or:hu,sql:I}}function $u(){return{sql:I,asc:Lu,desc:Ru}}function Ou(r,e){Object.keys(r).length===1&&"default"in r&&!B(r.default,Q)&&(r=r.default);let t={},n={},i={};for(let[s,o]of Object.entries(r))if(B(o,Q)){let a=ht(o),h=n[a];t[a]=s,i[s]={tsName:s,dbName:o[Q.Symbol.Name],schema:o[Q.Symbol.Schema],columns:o[Q.Symbol.Columns],relations:h?.relations??{},primaryKey:h?.primaryKey??[]};for(let f of Object.values(o[Q.Symbol.Columns]))f.primary&&i[s].primaryKey.push(f);let d=o[Q.Symbol.ExtraConfigBuilder]?.(o[Q.Symbol.ExtraConfigColumns]);if(d)for(let f of Object.values(d))B(f,Wr)&&i[s].primaryKey.push(...f.columns)}else if(B(o,Xs)){let a=ht(o.table),h=t[a],d=o.config(e(o.table)),f;for(let[p,b]of Object.entries(d))if(h){let w=i[h];w.relations[p]=b,f&&w.primaryKey.push(...f)}else a in n||(n[a]={relations:{},primaryKey:f}),n[a].relations[p]=b}return{tables:i,tableNamesMap:t}}function Dp(r){return function(t,n){return new ot(r,t,n,n?.fields.reduce((i,s)=>i&&s.notNull,!0)??!1)}}function Mp(r){return function(t,n){return new ur(r,t,n)}}function qu(r,e,t){if(B(t,ot)&&t.config)return{fields:t.config.fields,references:t.config.references};let n=e[ht(t.referencedTable)];if(!n)throw new Error(`Table "${t.referencedTable[Q.Symbol.Name]}" not found in schema`);let i=r[n];if(!i)throw new Error(`Table "${n}" not found in schema`);let s=t.sourceTable,o=e[ht(s)];if(!o)throw new Error(`Table "${s[Q.Symbol.Name]}" not found in schema`);let a=[];for(let h of Object.values(i.relations))(t.relationName&&t!==h&&h.relationName===t.relationName||!t.relationName&&h.referencedTable===t.sourceTable)&&a.push(h);if(a.length>1)throw t.relationName?new Error(`There are multiple relations with name "${t.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${t.sourceTable[Q.Symbol.Name]}". Please specify relation name`);if(a[0]&&B(a[0],ot)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${o}.${t.fieldName}"`)}function Bu(r){return{one:Dp(r),many:Mp(r)}}function Hr(r,e,t,n,i=s=>s){let s={};for(let[o,a]of n.entries())if(a.isJson){let h=e.relations[a.tsKey],d=t[o],f=typeof d=="string"?JSON.parse(d):d;s[a.tsKey]=B(h,ot)?f&&Hr(r,r[a.relationTableTsKey],f,a.selection,i):f.map(p=>Hr(r,r[a.relationTableTsKey],p,a.selection,i))}else{let h=i(t[o]),d=a.field,f;B(d,ue)?f=d:B(d,H)?f=d.decoder:f=d.sql.decoder,s[a.tsKey]=h===null?null:f.mapFromDriverValue(h)}return s}var jp=Object.create,Ct=Object.defineProperty,kp=Object.getOwnPropertyDescriptor,Fp=Object.getOwnPropertyNames,Qp=Object.getPrototypeOf,Up=Object.prototype.hasOwnProperty,Vp=(r,e,t)=>e in r?Ct(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,y=(r,e)=>Ct(r,"name",{value:e,configurable:!0}),Oe=(r,e)=>()=>(r&&(e=r(r=0)),e),se=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ke=(r,e)=>{for(var t in e)Ct(r,t,{get:e[t],enumerable:!0})},Uu=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Fp(e))!Up.call(r,i)&&i!==t&&Ct(r,i,{get:()=>e[i],enumerable:!(n=kp(e,i))||n.enumerable});return r},dt=(r,e,t)=>(t=r!=null?jp(Qp(r)):{},Uu(e||!r||!r.__esModule?Ct(t,"default",{value:r,enumerable:!0}):t,r)),Ae=r=>Uu(Ct({},"__esModule",{value:!0}),r),ee=(r,e,t)=>Vp(r,typeof e!="symbol"?e+"":e,t),zp=se(r=>{"use strict";J(),r.byteLength=h,r.toByteArray=f,r.fromByteArray=w;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,o=i.length;s<o;++s)e[s]=i[s],t[i.charCodeAt(s)]=s;var s,o;t[45]=62,t[95]=63;function a(g){var c=g.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=g.indexOf("=");S===-1&&(S=c);var v=S===c?0:4-S%4;return[S,v]}y(a,"getLens");function h(g){var c=a(g),S=c[0],v=c[1];return(S+v)*3/4-v}y(h,"byteLength");function d(g,c,S){return(c+S)*3/4-S}y(d,"_byteLength");function f(g){var c,S=a(g),v=S[0],T=S[1],A=new n(d(g,v,T)),_=0,$=T>0?v-4:v,C;for(C=0;C<$;C+=4)c=t[g.charCodeAt(C)]<<18|t[g.charCodeAt(C+1)]<<12|t[g.charCodeAt(C+2)]<<6|t[g.charCodeAt(C+3)],A[_++]=c>>16&255,A[_++]=c>>8&255,A[_++]=c&255;return T===2&&(c=t[g.charCodeAt(C)]<<2|t[g.charCodeAt(C+1)]>>4,A[_++]=c&255),T===1&&(c=t[g.charCodeAt(C)]<<10|t[g.charCodeAt(C+1)]<<4|t[g.charCodeAt(C+2)]>>2,A[_++]=c>>8&255,A[_++]=c&255),A}y(f,"toByteArray");function p(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}y(p,"tripletToBase64");function b(g,c,S){for(var v,T=[],A=c;A<S;A+=3)v=(g[A]<<16&16711680)+(g[A+1]<<8&65280)+(g[A+2]&255),T.push(p(v));return T.join("")}y(b,"encodeChunk");function w(g){for(var c,S=g.length,v=S%3,T=[],A=16383,_=0,$=S-v;_<$;_+=A)T.push(b(g,_,_+A>$?$:_+A));return v===1?(c=g[S-1],T.push(e[c>>2]+e[c<<4&63]+"==")):v===2&&(c=(g[S-2]<<8)+g[S-1],T.push(e[c>>10]+e[c>>4&63]+e[c<<2&63]+"=")),T.join("")}y(w,"fromByteArray")}),Kp=se(r=>{J(),r.read=function(e,t,n,i,s){var o,a,h=s*8-i-1,d=(1<<h)-1,f=d>>1,p=-7,b=n?s-1:0,w=n?-1:1,g=e[t+b];for(b+=w,o=g&(1<<-p)-1,g>>=-p,p+=h;p>0;o=o*256+e[t+b],b+=w,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=i;p>0;a=a*256+e[t+b],b+=w,p-=8);if(o===0)o=1-f;else{if(o===d)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,i),o=o-f}return(g?-1:1)*a*Math.pow(2,o-i)},r.write=function(e,t,n,i,s,o){var a,h,d,f=o*8-s-1,p=(1<<f)-1,b=p>>1,w=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:o-1,c=i?1:-1,S=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+b>=1?t+=w/d:t+=w*Math.pow(2,1-b),t*d>=2&&(a++,d/=2),a+b>=p?(h=0,a=p):a+b>=1?(h=(t*d-1)*Math.pow(2,s),a=a+b):(h=t*Math.pow(2,b-1)*Math.pow(2,s),a=0));s>=8;e[n+g]=h&255,g+=c,h/=256,s-=8);for(a=a<<s|h,f+=s;f>0;e[n+g]=a&255,g+=c,a/=256,f-=8);e[n+g-c]|=S*128}}),Wp=se(r=>{"use strict";J();var e=zp(),t=Kp(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=T,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let u=new Uint8Array(1),l={foo:y(function(){return 42},"foo")};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(u,l),u.foo()===42}catch{return!1}}y(s,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:y(function(){if(a.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:y(function(){if(a.isBuffer(this))return this.byteOffset},"get")});function o(u){if(u>i)throw new RangeError('The value "'+u+'" is invalid for option "size"');let l=new Uint8Array(u);return Object.setPrototypeOf(l,a.prototype),l}y(o,"createBuffer");function a(u,l,m){if(typeof u=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(u)}return h(u,l,m)}y(a,"Buffer"),a.poolSize=8192;function h(u,l,m){if(typeof u=="string")return b(u,l);if(ArrayBuffer.isView(u))return g(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(Ue(u,ArrayBuffer)||u&&Ue(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ue(u,SharedArrayBuffer)||u&&Ue(u.buffer,SharedArrayBuffer)))return c(u,l,m);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let P=u.valueOf&&u.valueOf();if(P!=null&&P!==u)return a.from(P,l,m);let R=S(u);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return a.from(u[Symbol.toPrimitive]("string"),l,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}y(h,"from"),a.from=function(u,l,m){return h(u,l,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}y(d,"assertSize");function f(u,l,m){return d(u),u<=0?o(u):l!==void 0?typeof m=="string"?o(u).fill(l,m):o(u).fill(l):o(u)}y(f,"alloc"),a.alloc=function(u,l,m){return f(u,l,m)};function p(u){return d(u),o(u<0?0:v(u)|0)}y(p,"allocUnsafe"),a.allocUnsafe=function(u){return p(u)},a.allocUnsafeSlow=function(u){return p(u)};function b(u,l){if((typeof l!="string"||l==="")&&(l="utf8"),!a.isEncoding(l))throw new TypeError("Unknown encoding: "+l);let m=A(u,l)|0,P=o(m),R=P.write(u,l);return R!==m&&(P=P.slice(0,R)),P}y(b,"fromString");function w(u){let l=u.length<0?0:v(u.length)|0,m=o(l);for(let P=0;P<l;P+=1)m[P]=u[P]&255;return m}y(w,"fromArrayLike");function g(u){if(Ue(u,Uint8Array)){let l=new Uint8Array(u);return c(l.buffer,l.byteOffset,l.byteLength)}return w(u)}y(g,"fromArrayView");function c(u,l,m){if(l<0||u.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<l+(m||0))throw new RangeError('"length" is outside of buffer bounds');let P;return l===void 0&&m===void 0?P=new Uint8Array(u):m===void 0?P=new Uint8Array(u,l):P=new Uint8Array(u,l,m),Object.setPrototypeOf(P,a.prototype),P}y(c,"fromArrayBuffer");function S(u){if(a.isBuffer(u)){let l=v(u.length)|0,m=o(l);return m.length===0||u.copy(m,0,0,l),m}if(u.length!==void 0)return typeof u.length!="number"||_r(u.length)?o(0):w(u);if(u.type==="Buffer"&&Array.isArray(u.data))return w(u.data)}y(S,"fromObject");function v(u){if(u>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return u|0}y(v,"checked");function T(u){return+u!=u&&(u=0),a.alloc(+u)}y(T,"SlowBuffer"),a.isBuffer=y(function(u){return u!=null&&u._isBuffer===!0&&u!==a.prototype},"isBuffer"),a.compare=y(function(u,l){if(Ue(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),Ue(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(u)||!a.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let m=u.length,P=l.length;for(let R=0,M=Math.min(m,P);R<M;++R)if(u[R]!==l[R]){m=u[R],P=l[R];break}return m<P?-1:P<m?1:0},"compare"),a.isEncoding=y(function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=y(function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return a.alloc(0);let m;if(l===void 0)for(l=0,m=0;m<u.length;++m)l+=u[m].length;let P=a.allocUnsafe(l),R=0;for(m=0;m<u.length;++m){let M=u[m];if(Ue(M,Uint8Array))R+M.length>P.length?(a.isBuffer(M)||(M=a.from(M)),M.copy(P,R)):Uint8Array.prototype.set.call(P,M,R);else if(a.isBuffer(M))M.copy(P,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=M.length}return P},"concat");function A(u,l){if(a.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||Ue(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);let m=u.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&m===0)return 0;let R=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Rr(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return oi(u).length;default:if(R)return P?-1:Rr(u).length;l=(""+l).toLowerCase(),R=!0}}y(A,"byteLength"),a.byteLength=A;function _(u,l,m){let P=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,l>>>=0,m<=l))return"";for(u||(u="utf8");;)switch(u){case"hex":return ne(this,l,m);case"utf8":case"utf-8":return q(this,l,m);case"ascii":return te(this,l,m);case"latin1":case"binary":return ae(this,l,m);case"base64":return G(this,l,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,l,m);default:if(P)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),P=!0}}y(_,"slowToString"),a.prototype._isBuffer=!0;function $(u,l,m){let P=u[l];u[l]=u[m],u[m]=P}y($,"swap"),a.prototype.swap16=y(function(){let u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)$(this,l,l+1);return this},"swap16"),a.prototype.swap32=y(function(){let u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)$(this,l,l+3),$(this,l+1,l+2);return this},"swap32"),a.prototype.swap64=y(function(){let u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)$(this,l,l+7),$(this,l+1,l+6),$(this,l+2,l+5),$(this,l+3,l+4);return this},"swap64"),a.prototype.toString=y(function(){let u=this.length;return u===0?"":arguments.length===0?q(this,0,u):_.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=y(function(u){if(!a.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:a.compare(this,u)===0},"equals"),a.prototype.inspect=y(function(){let u="",l=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},"inspect"),n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=y(function(u,l,m,P,R){if(Ue(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),m===void 0&&(m=u?u.length:0),P===void 0&&(P=0),R===void 0&&(R=this.length),l<0||m>u.length||P<0||R>this.length)throw new RangeError("out of range index");if(P>=R&&l>=m)return 0;if(P>=R)return-1;if(l>=m)return 1;if(l>>>=0,m>>>=0,P>>>=0,R>>>=0,this===u)return 0;let M=R-P,j=m-l,le=Math.min(M,j),Te=this.slice(P,R),me=u.slice(l,m);for(let fe=0;fe<le;++fe)if(Te[fe]!==me[fe]){M=Te[fe],j=me[fe];break}return M<j?-1:j<M?1:0},"compare");function C(u,l,m,P,R){if(u.length===0)return-1;if(typeof m=="string"?(P=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,_r(m)&&(m=R?0:u.length-1),m<0&&(m=u.length+m),m>=u.length){if(R)return-1;m=u.length-1}else if(m<0)if(R)m=0;else return-1;if(typeof l=="string"&&(l=a.from(l,P)),a.isBuffer(l))return l.length===0?-1:L(u,l,m,P,R);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(u,l,m):Uint8Array.prototype.lastIndexOf.call(u,l,m):L(u,[l],m,P,R);throw new TypeError("val must be string, number or Buffer")}y(C,"bidirectionalIndexOf");function L(u,l,m,P,R){let M=1,j=u.length,le=l.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(u.length<2||l.length<2)return-1;M=2,j/=2,le/=2,m/=2}function Te(fe,be){return M===1?fe[be]:fe.readUInt16BE(be*M)}y(Te,"read");let me;if(R){let fe=-1;for(me=m;me<j;me++)if(Te(u,me)===Te(l,fe===-1?0:me-fe)){if(fe===-1&&(fe=me),me-fe+1===le)return fe*M}else fe!==-1&&(me-=me-fe),fe=-1}else for(m+le>j&&(m=j-le),me=m;me>=0;me--){let fe=!0;for(let be=0;be<le;be++)if(Te(u,me+be)!==Te(l,be)){fe=!1;break}if(fe)return me}return-1}y(L,"arrayIndexOf"),a.prototype.includes=y(function(u,l,m){return this.indexOf(u,l,m)!==-1},"includes"),a.prototype.indexOf=y(function(u,l,m){return C(this,u,l,m,!0)},"indexOf"),a.prototype.lastIndexOf=y(function(u,l,m){return C(this,u,l,m,!1)},"lastIndexOf");function N(u,l,m,P){m=Number(m)||0;let R=u.length-m;P?(P=Number(P),P>R&&(P=R)):P=R;let M=l.length;P>M/2&&(P=M/2);let j;for(j=0;j<P;++j){let le=parseInt(l.substr(j*2,2),16);if(_r(le))return j;u[m+j]=le}return j}y(N,"hexWrite");function x(u,l,m,P){return zt(Rr(l,u.length-m),u,m,P)}y(x,"utf8Write");function D(u,l,m,P){return zt(pa(l),u,m,P)}y(D,"asciiWrite");function O(u,l,m,P){return zt(oi(l),u,m,P)}y(O,"base64Write");function W(u,l,m,P){return zt(da(l,u.length-m),u,m,P)}y(W,"ucs2Write"),a.prototype.write=y(function(u,l,m,P){if(l===void 0)P="utf8",m=this.length,l=0;else if(m===void 0&&typeof l=="string")P=l,m=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(m)?(m=m>>>0,P===void 0&&(P="utf8")):(P=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let R=this.length-l;if((m===void 0||m>R)&&(m=R),u.length>0&&(m<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let M=!1;for(;;)switch(P){case"hex":return N(this,u,l,m);case"utf8":case"utf-8":return x(this,u,l,m);case"ascii":case"latin1":case"binary":return D(this,u,l,m);case"base64":return O(this,u,l,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,u,l,m);default:if(M)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),M=!0}},"write"),a.prototype.toJSON=y(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function G(u,l,m){return l===0&&m===u.length?e.fromByteArray(u):e.fromByteArray(u.slice(l,m))}y(G,"base64Slice");function q(u,l,m){m=Math.min(u.length,m);let P=[],R=l;for(;R<m;){let M=u[R],j=null,le=M>239?4:M>223?3:M>191?2:1;if(R+le<=m){let Te,me,fe,be;switch(le){case 1:M<128&&(j=M);break;case 2:Te=u[R+1],(Te&192)===128&&(be=(M&31)<<6|Te&63,be>127&&(j=be));break;case 3:Te=u[R+1],me=u[R+2],(Te&192)===128&&(me&192)===128&&(be=(M&15)<<12|(Te&63)<<6|me&63,be>2047&&(be<55296||be>57343)&&(j=be));break;case 4:Te=u[R+1],me=u[R+2],fe=u[R+3],(Te&192)===128&&(me&192)===128&&(fe&192)===128&&(be=(M&15)<<18|(Te&63)<<12|(me&63)<<6|fe&63,be>65535&&be<1114112&&(j=be))}}j===null?(j=65533,le=1):j>65535&&(j-=65536,P.push(j>>>10&1023|55296),j=56320|j&1023),P.push(j),R+=le}return Y(P)}y(q,"utf8Slice");var F=4096;function Y(u){let l=u.length;if(l<=F)return String.fromCharCode.apply(String,u);let m="",P=0;for(;P<l;)m+=String.fromCharCode.apply(String,u.slice(P,P+=F));return m}y(Y,"decodeCodePointsArray");function te(u,l,m){let P="";m=Math.min(u.length,m);for(let R=l;R<m;++R)P+=String.fromCharCode(u[R]&127);return P}y(te,"asciiSlice");function ae(u,l,m){let P="";m=Math.min(u.length,m);for(let R=l;R<m;++R)P+=String.fromCharCode(u[R]);return P}y(ae,"latin1Slice");function ne(u,l,m){let P=u.length;(!l||l<0)&&(l=0),(!m||m<0||m>P)&&(m=P);let R="";for(let M=l;M<m;++M)R+=Ep[u[M]];return R}y(ne,"hexSlice");function De(u,l,m){let P=u.slice(l,m),R="";for(let M=0;M<P.length-1;M+=2)R+=String.fromCharCode(P[M]+P[M+1]*256);return R}y(De,"utf16leSlice"),a.prototype.slice=y(function(u,l){let m=this.length;u=~~u,l=l===void 0?m:~~l,u<0?(u+=m,u<0&&(u=0)):u>m&&(u=m),l<0?(l+=m,l<0&&(l=0)):l>m&&(l=m),l<u&&(l=u);let P=this.subarray(u,l);return Object.setPrototypeOf(P,a.prototype),P},"slice");function ce(u,l,m){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+l>m)throw new RangeError("Trying to access beyond buffer length")}y(ce,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=y(function(u,l,m){u=u>>>0,l=l>>>0,m||ce(u,l,this.length);let P=this[u],R=1,M=0;for(;++M<l&&(R*=256);)P+=this[u+M]*R;return P},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=y(function(u,l,m){u=u>>>0,l=l>>>0,m||ce(u,l,this.length);let P=this[u+--l],R=1;for(;l>0&&(R*=256);)P+=this[u+--l]*R;return P},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=y(function(u,l){return u=u>>>0,l||ce(u,1,this.length),this[u]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=y(function(u,l){return u=u>>>0,l||ce(u,2,this.length),this[u]|this[u+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=y(function(u,l){return u=u>>>0,l||ce(u,2,this.length),this[u]<<8|this[u+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=y(function(u,l){return u=u>>>0,l||ce(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=y(function(u,l){return u=u>>>0,l||ce(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=Ze(y(function(u){u=u>>>0,lt(u,"offset");let l=this[u],m=this[u+7];(l===void 0||m===void 0)&&wt(u,this.length-8);let P=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,R=this[++u]+this[++u]*2**8+this[++u]*2**16+m*2**24;return BigInt(P)+(BigInt(R)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=Ze(y(function(u){u=u>>>0,lt(u,"offset");let l=this[u],m=this[u+7];(l===void 0||m===void 0)&&wt(u,this.length-8);let P=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],R=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+m;return(BigInt(P)<<BigInt(32))+BigInt(R)},"readBigUInt64BE")),a.prototype.readIntLE=y(function(u,l,m){u=u>>>0,l=l>>>0,m||ce(u,l,this.length);let P=this[u],R=1,M=0;for(;++M<l&&(R*=256);)P+=this[u+M]*R;return R*=128,P>=R&&(P-=Math.pow(2,8*l)),P},"readIntLE"),a.prototype.readIntBE=y(function(u,l,m){u=u>>>0,l=l>>>0,m||ce(u,l,this.length);let P=l,R=1,M=this[u+--P];for(;P>0&&(R*=256);)M+=this[u+--P]*R;return R*=128,M>=R&&(M-=Math.pow(2,8*l)),M},"readIntBE"),a.prototype.readInt8=y(function(u,l){return u=u>>>0,l||ce(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},"readInt8"),a.prototype.readInt16LE=y(function(u,l){u=u>>>0,l||ce(u,2,this.length);let m=this[u]|this[u+1]<<8;return m&32768?m|4294901760:m},"readInt16LE"),a.prototype.readInt16BE=y(function(u,l){u=u>>>0,l||ce(u,2,this.length);let m=this[u+1]|this[u]<<8;return m&32768?m|4294901760:m},"readInt16BE"),a.prototype.readInt32LE=y(function(u,l){return u=u>>>0,l||ce(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},"readInt32LE"),a.prototype.readInt32BE=y(function(u,l){return u=u>>>0,l||ce(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},"readInt32BE"),a.prototype.readBigInt64LE=Ze(y(function(u){u=u>>>0,lt(u,"offset");let l=this[u],m=this[u+7];(l===void 0||m===void 0)&&wt(u,this.length-8);let P=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(m<<24);return(BigInt(P)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)},"readBigInt64LE")),a.prototype.readBigInt64BE=Ze(y(function(u){u=u>>>0,lt(u,"offset");let l=this[u],m=this[u+7];(l===void 0||m===void 0)&&wt(u,this.length-8);let P=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(P)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+m)},"readBigInt64BE")),a.prototype.readFloatLE=y(function(u,l){return u=u>>>0,l||ce(u,4,this.length),t.read(this,u,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=y(function(u,l){return u=u>>>0,l||ce(u,4,this.length),t.read(this,u,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=y(function(u,l){return u=u>>>0,l||ce(u,8,this.length),t.read(this,u,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=y(function(u,l){return u=u>>>0,l||ce(u,8,this.length),t.read(this,u,!1,52,8)},"readDoubleBE");function Ee(u,l,m,P,R,M){if(!a.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>R||l<M)throw new RangeError('"value" argument is out of bounds');if(m+P>u.length)throw new RangeError("Index out of range")}y(Ee,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=y(function(u,l,m,P){if(u=+u,l=l>>>0,m=m>>>0,!P){let j=Math.pow(2,8*m)-1;Ee(this,u,l,m,j,0)}let R=1,M=0;for(this[l]=u&255;++M<m&&(R*=256);)this[l+M]=u/R&255;return l+m},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=y(function(u,l,m,P){if(u=+u,l=l>>>0,m=m>>>0,!P){let j=Math.pow(2,8*m)-1;Ee(this,u,l,m,j,0)}let R=m-1,M=1;for(this[l+R]=u&255;--R>=0&&(M*=256);)this[l+R]=u/M&255;return l+m},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,1,255,0),this[l]=u&255,l+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},"writeUInt32BE");function Ut(u,l,m,P,R){si(l,P,R,u,m,7);let M=Number(l&BigInt(4294967295));u[m++]=M,M=M>>8,u[m++]=M,M=M>>8,u[m++]=M,M=M>>8,u[m++]=M;let j=Number(l>>BigInt(32)&BigInt(4294967295));return u[m++]=j,j=j>>8,u[m++]=j,j=j>>8,u[m++]=j,j=j>>8,u[m++]=j,m}y(Ut,"wrtBigUInt64LE");function Vt(u,l,m,P,R){si(l,P,R,u,m,7);let M=Number(l&BigInt(4294967295));u[m+7]=M,M=M>>8,u[m+6]=M,M=M>>8,u[m+5]=M,M=M>>8,u[m+4]=M;let j=Number(l>>BigInt(32)&BigInt(4294967295));return u[m+3]=j,j=j>>8,u[m+2]=j,j=j>>8,u[m+1]=j,j=j>>8,u[m]=j,m+8}y(Vt,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=Ze(y(function(u,l=0){return Ut(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=Ze(y(function(u,l=0){return Vt(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=y(function(u,l,m,P){if(u=+u,l=l>>>0,!P){let le=Math.pow(2,8*m-1);Ee(this,u,l,m,le-1,-le)}let R=0,M=1,j=0;for(this[l]=u&255;++R<m&&(M*=256);)u<0&&j===0&&this[l+R-1]!==0&&(j=1),this[l+R]=(u/M>>0)-j&255;return l+m},"writeIntLE"),a.prototype.writeIntBE=y(function(u,l,m,P){if(u=+u,l=l>>>0,!P){let le=Math.pow(2,8*m-1);Ee(this,u,l,m,le-1,-le)}let R=m-1,M=1,j=0;for(this[l+R]=u&255;--R>=0&&(M*=256);)u<0&&j===0&&this[l+R+1]!==0&&(j=1),this[l+R]=(u/M>>0)-j&255;return l+m},"writeIntBE"),a.prototype.writeInt8=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},"writeInt8"),a.prototype.writeInt16LE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},"writeInt16LE"),a.prototype.writeInt16BE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},"writeInt16BE"),a.prototype.writeInt32LE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},"writeInt32LE"),a.prototype.writeInt32BE=y(function(u,l,m){return u=+u,l=l>>>0,m||Ee(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},"writeInt32BE"),a.prototype.writeBigInt64LE=Ze(y(function(u,l=0){return Ut(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=Ze(y(function(u,l=0){return Vt(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function ti(u,l,m,P,R,M){if(m+P>u.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}y(ti,"checkIEEE754");function ri(u,l,m,P,R){return l=+l,m=m>>>0,R||ti(u,l,m,4,34028234663852886e22,-34028234663852886e22),t.write(u,l,m,P,23,4),m+4}y(ri,"writeFloat"),a.prototype.writeFloatLE=y(function(u,l,m){return ri(this,u,l,!0,m)},"writeFloatLE"),a.prototype.writeFloatBE=y(function(u,l,m){return ri(this,u,l,!1,m)},"writeFloatBE");function ni(u,l,m,P,R){return l=+l,m=m>>>0,R||ti(u,l,m,8,17976931348623157e292,-17976931348623157e292),t.write(u,l,m,P,52,8),m+8}y(ni,"writeDouble"),a.prototype.writeDoubleLE=y(function(u,l,m){return ni(this,u,l,!0,m)},"writeDoubleLE"),a.prototype.writeDoubleBE=y(function(u,l,m){return ni(this,u,l,!1,m)},"writeDoubleBE"),a.prototype.copy=y(function(u,l,m,P){if(!a.isBuffer(u))throw new TypeError("argument should be a Buffer");if(m||(m=0),!P&&P!==0&&(P=this.length),l>=u.length&&(l=u.length),l||(l=0),P>0&&P<m&&(P=m),P===m||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),u.length-l<P-m&&(P=u.length-l+m);let R=P-m;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,m,P):Uint8Array.prototype.set.call(u,this.subarray(m,P),l),R},"copy"),a.prototype.fill=y(function(u,l,m,P){if(typeof u=="string"){if(typeof l=="string"?(P=l,l=0,m=this.length):typeof m=="string"&&(P=m,m=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!a.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(u.length===1){let M=u.charCodeAt(0);(P==="utf8"&&M<128||P==="latin1")&&(u=M)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<m)throw new RangeError("Out of range index");if(m<=l)return this;l=l>>>0,m=m===void 0?this.length:m>>>0,u||(u=0);let R;if(typeof u=="number")for(R=l;R<m;++R)this[R]=u;else{let M=a.isBuffer(u)?u:a.from(u,P),j=M.length;if(j===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(R=0;R<m-l;++R)this[R+l]=M[R%j]}return this},"fill");var bt={};function Lr(u,l,m){var P;bt[u]=(P=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}},y(P,"NodeError"),P)}y(Lr,"E"),Lr("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Lr("ERR_INVALID_ARG_TYPE",function(u,l){return`The "${u}" argument must be of type number. Received type ${typeof l}`},TypeError),Lr("ERR_OUT_OF_RANGE",function(u,l,m){let P=`The value of "${u}" is out of range.`,R=m;return Number.isInteger(m)&&Math.abs(m)>2**32?R=ii(String(m)):typeof m=="bigint"&&(R=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(R=ii(R)),R+="n"),P+=` It must be ${l}. Received ${R}`,P},RangeError);function ii(u){let l="",m=u.length,P=u[0]==="-"?1:0;for(;m>=P+4;m-=3)l=`_${u.slice(m-3,m)}${l}`;return`${u.slice(0,m)}${l}`}y(ii,"addNumericalSeparator");function fa(u,l,m){lt(l,"offset"),(u[l]===void 0||u[l+m]===void 0)&&wt(l,u.length-(m+1))}y(fa,"checkBounds");function si(u,l,m,P,R,M){if(u>m||u<l){let j=typeof l=="bigint"?"n":"",le;throw M>3?l===0||l===BigInt(0)?le=`>= 0${j} and < 2${j} ** ${(M+1)*8}${j}`:le=`>= -(2${j} ** ${(M+1)*8-1}${j}) and < 2 ** ${(M+1)*8-1}${j}`:le=`>= ${l}${j} and <= ${m}${j}`,new bt.ERR_OUT_OF_RANGE("value",le,u)}fa(P,R,M)}y(si,"checkIntBI");function lt(u,l){if(typeof u!="number")throw new bt.ERR_INVALID_ARG_TYPE(l,"number",u)}y(lt,"validateNumber");function wt(u,l,m){throw Math.floor(u)!==u?(lt(u,m),new bt.ERR_OUT_OF_RANGE(m||"offset","an integer",u)):l<0?new bt.ERR_BUFFER_OUT_OF_BOUNDS:new bt.ERR_OUT_OF_RANGE(m||"offset",`>= ${m?1:0} and <= ${l}`,u)}y(wt,"boundsError");var vp=/[^+/0-9A-Za-z-_]/g;function ha(u){if(u=u.split("=")[0],u=u.trim().replace(vp,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}y(ha,"base64clean");function Rr(u,l){l=l||1/0;let m,P=u.length,R=null,M=[];for(let j=0;j<P;++j){if(m=u.charCodeAt(j),m>55295&&m<57344){if(!R){if(m>56319){(l-=3)>-1&&M.push(239,191,189);continue}else if(j+1===P){(l-=3)>-1&&M.push(239,191,189);continue}R=m;continue}if(m<56320){(l-=3)>-1&&M.push(239,191,189),R=m;continue}m=(R-55296<<10|m-56320)+65536}else R&&(l-=3)>-1&&M.push(239,191,189);if(R=null,m<128){if((l-=1)<0)break;M.push(m)}else if(m<2048){if((l-=2)<0)break;M.push(m>>6|192,m&63|128)}else if(m<65536){if((l-=3)<0)break;M.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((l-=4)<0)break;M.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return M}y(Rr,"utf8ToBytes");function pa(u){let l=[];for(let m=0;m<u.length;++m)l.push(u.charCodeAt(m)&255);return l}y(pa,"asciiToBytes");function da(u,l){let m,P,R,M=[];for(let j=0;j<u.length&&!((l-=2)<0);++j)m=u.charCodeAt(j),P=m>>8,R=m%256,M.push(R),M.push(P);return M}y(da,"utf16leToBytes");function oi(u){return e.toByteArray(ha(u))}y(oi,"base64ToBytes");function zt(u,l,m,P){let R;for(R=0;R<P&&!(R+m>=l.length||R>=u.length);++R)l[R+m]=u[R];return R}y(zt,"blitBuffer");function Ue(u,l){return u instanceof l||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===l.name}y(Ue,"isInstance");function _r(u){return u!==u}y(_r,"numberIsNaN");var Ep=function(){let u="0123456789abcdef",l=new Array(256);for(let m=0;m<16;++m){let P=m*16;for(let R=0;R<16;++R)l[P+R]=u[m]+u[R]}return l}();function Ze(u){return typeof BigInt>"u"?ma:u}y(Ze,"defineBigIntMethod");function ma(){throw new Error("BigInt not supported")}y(ma,"BufferBigIntNotDefined")}),en,no,Gp,Z,ie,J=Oe(()=>{"use strict";en=globalThis,no=globalThis.setImmediate??(r=>setTimeout(r,0)),Gp=globalThis.clearImmediate??(r=>clearTimeout(r)),Z=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:Wp().Buffer,ie=globalThis.process??{},ie.env??(ie.env={});try{ie.nextTick(()=>{})}catch{let r=Promise.resolve();ie.nextTick=r.then.bind(r)}}),mt=se((r,e)=>{"use strict";J();var t=typeof Reflect=="object"?Reflect:null,n=t&&typeof t.apply=="function"?t.apply:y(function(C,L,N){return Function.prototype.apply.call(C,L,N)},"ReflectApply"),i;t&&typeof t.ownKeys=="function"?i=t.ownKeys:Object.getOwnPropertySymbols?i=y(function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))},"ReflectOwnKeys"):i=y(function(C){return Object.getOwnPropertyNames(C)},"ReflectOwnKeys");function s(C){console&&console.warn&&console.warn(C)}y(s,"ProcessEmitWarning");var o=Number.isNaN||y(function(C){return C!==C},"NumberIsNaN");function a(){a.init.call(this)}y(a,"EventEmitter"),e.exports=a,e.exports.once=A,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var h=10;function d(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}y(d,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:y(function(){return h},"get"),set:y(function(C){if(typeof C!="number"||C<0||o(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");h=C},"set")}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=y(function(C){if(typeof C!="number"||C<0||o(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},"setMaxListeners");function f(C){return C._maxListeners===void 0?a.defaultMaxListeners:C._maxListeners}y(f,"_getMaxListeners"),a.prototype.getMaxListeners=y(function(){return f(this)},"getMaxListeners"),a.prototype.emit=y(function(C){for(var L=[],N=1;N<arguments.length;N++)L.push(arguments[N]);var x=C==="error",D=this._events;if(D!==void 0)x=x&&D.error===void 0;else if(!x)return!1;if(x){var O;if(L.length>0&&(O=L[0]),O instanceof Error)throw O;var W=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw W.context=O,W}var G=D[C];if(G===void 0)return!1;if(typeof G=="function")n(G,this,L);else for(var q=G.length,F=S(G,q),N=0;N<q;++N)n(F[N],this,L);return!0},"emit");function p(C,L,N,x){var D,O,W;if(d(N),O=C._events,O===void 0?(O=C._events=Object.create(null),C._eventsCount=0):(O.newListener!==void 0&&(C.emit("newListener",L,N.listener?N.listener:N),O=C._events),W=O[L]),W===void 0)W=O[L]=N,++C._eventsCount;else if(typeof W=="function"?W=O[L]=x?[N,W]:[W,N]:x?W.unshift(N):W.push(N),D=f(C),D>0&&W.length>D&&!W.warned){W.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=C,G.type=L,G.count=W.length,s(G)}return C}y(p,"_addListener"),a.prototype.addListener=y(function(C,L){return p(this,C,L,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=y(function(C,L){return p(this,C,L,!0)},"prependListener");function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}y(b,"onceWrapper");function w(C,L,N){var x={fired:!1,wrapFn:void 0,target:C,type:L,listener:N},D=b.bind(x);return D.listener=N,x.wrapFn=D,D}y(w,"_onceWrap"),a.prototype.once=y(function(C,L){return d(L),this.on(C,w(this,C,L)),this},"once"),a.prototype.prependOnceListener=y(function(C,L){return d(L),this.prependListener(C,w(this,C,L)),this},"prependOnceListener"),a.prototype.removeListener=y(function(C,L){var N,x,D,O,W;if(d(L),x=this._events,x===void 0)return this;if(N=x[C],N===void 0)return this;if(N===L||N.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete x[C],x.removeListener&&this.emit("removeListener",C,N.listener||L));else if(typeof N!="function"){for(D=-1,O=N.length-1;O>=0;O--)if(N[O]===L||N[O].listener===L){W=N[O].listener,D=O;break}if(D<0)return this;D===0?N.shift():v(N,D),N.length===1&&(x[C]=N[0]),x.removeListener!==void 0&&this.emit("removeListener",C,W||L)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=y(function(C){var L,N,x;if(N=this._events,N===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete N[C]),this;if(arguments.length===0){var D=Object.keys(N),O;for(x=0;x<D.length;++x)O=D[x],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=N[C],typeof L=="function")this.removeListener(C,L);else if(L!==void 0)for(x=L.length-1;x>=0;x--)this.removeListener(C,L[x]);return this},"removeAllListeners");function g(C,L,N){var x=C._events;if(x===void 0)return[];var D=x[L];return D===void 0?[]:typeof D=="function"?N?[D.listener||D]:[D]:N?T(D):S(D,D.length)}y(g,"_listeners"),a.prototype.listeners=y(function(C){return g(this,C,!0)},"listeners"),a.prototype.rawListeners=y(function(C){return g(this,C,!1)},"rawListeners"),a.listenerCount=function(C,L){return typeof C.listenerCount=="function"?C.listenerCount(L):c.call(C,L)},a.prototype.listenerCount=c;function c(C){var L=this._events;if(L!==void 0){var N=L[C];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}y(c,"listenerCount"),a.prototype.eventNames=y(function(){return this._eventsCount>0?i(this._events):[]},"eventNames");function S(C,L){for(var N=new Array(L),x=0;x<L;++x)N[x]=C[x];return N}y(S,"arrayClone");function v(C,L){for(;L+1<C.length;L++)C[L]=C[L+1];C.pop()}y(v,"spliceOne");function T(C){for(var L=new Array(C.length),N=0;N<L.length;++N)L[N]=C[N].listener||C[N];return L}y(T,"unwrapListeners");function A(C,L){return new Promise(function(N,x){function D(W){C.removeListener(L,O),x(W)}y(D,"errorListener");function O(){typeof C.removeListener=="function"&&C.removeListener("error",D),N([].slice.call(arguments))}y(O,"resolver"),$(C,L,O,{once:!0}),L!=="error"&&_(C,D,{once:!0})})}y(A,"once");function _(C,L,N){typeof C.on=="function"&&$(C,"error",L,N)}y(_,"addErrorHandlerIfEventEmitter");function $(C,L,N,x){if(typeof C.on=="function")x.once?C.once(L,N):C.on(L,N);else if(typeof C.addEventListener=="function")C.addEventListener(L,y(function D(O){x.once&&C.removeEventListener(L,D),N(O)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}y($,"eventTargetAgnosticAddListener")}),Vu={};Ke(Vu,{Socket:()=>hr,isIP:()=>zu});function zu(r){return 0}var Du,Ys,cr,hr,pr=Oe(()=>{"use strict";J(),Du=dt(mt(),1),y(zu,"isIP"),Ys=/^[^.]+\./,cr=class X extends Du.EventEmitter{constructor(){super(...arguments),ee(this,"opts",{}),ee(this,"connecting",!1),ee(this,"pending",!0),ee(this,"writable",!0),ee(this,"encrypted",!1),ee(this,"authorized",!1),ee(this,"destroyed",!1),ee(this,"ws",null),ee(this,"writeBuffer"),ee(this,"tlsState",0),ee(this,"tlsRead"),ee(this,"tlsWrite")}static get poolQueryViaFetch(){return X.opts.poolQueryViaFetch??X.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){X.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return X.opts.fetchEndpoint??X.defaults.fetchEndpoint}static set fetchEndpoint(e){X.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return X.opts.fetchFunction??X.defaults.fetchFunction}static set fetchFunction(e){X.opts.fetchFunction=e}static get webSocketConstructor(){return X.opts.webSocketConstructor??X.defaults.webSocketConstructor}static set webSocketConstructor(e){X.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??X.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return X.opts.wsProxy??X.defaults.wsProxy}static set wsProxy(e){X.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??X.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return X.opts.coalesceWrites??X.defaults.coalesceWrites}static set coalesceWrites(e){X.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??X.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return X.opts.useSecureWebSocket??X.defaults.useSecureWebSocket}static set useSecureWebSocket(e){X.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??X.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return X.opts.forceDisablePgSSL??X.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){X.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??X.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return X.opts.disableSNI??X.defaults.disableSNI}static set disableSNI(e){X.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??X.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get disableWarningInBrowsers(){return X.opts.disableWarningInBrowsers??X.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(e){X.opts.disableWarningInBrowsers=e}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??X.disableWarningInBrowsers}set disableWarningInBrowsers(e){this.opts.disableWarningInBrowsers=e}static get pipelineConnect(){return X.opts.pipelineConnect??X.defaults.pipelineConnect}static set pipelineConnect(e){X.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??X.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return X.opts.subtls??X.defaults.subtls}static set subtls(e){X.opts.subtls=e}get subtls(){return this.opts.subtls??X.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return X.opts.pipelineTLS??X.defaults.pipelineTLS}static set pipelineTLS(e){X.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??X.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return X.opts.rootCerts??X.defaults.rootCerts}static set rootCerts(e){X.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??X.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let n=this.wsProxy;if(n===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof n=="function"?n(e,t):`${n}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,n){this.connecting=!0,n&&this.once("connect",n);let i=y(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),s=y((a,h=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",d=>{this.emit("error",d),this.emit("close")}),a.addEventListener("message",d=>{if(this.tlsState===0){let f=Z.from(d.data);this.emit("data",f)}}),a.addEventListener("close",()=>{this.emit("close")}),h?i():a.addEventListener("open",i)},"configureWebSocket"),o;try{o=this.wsProxyAddrForHost(t,typeof e=="string"?parseInt(e,10):e)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+o;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(a),s(this.ws);else try{this.ws=new WebSocket(a),s(this.ws)}catch{this.ws=new __unstable_WebSocket(a),s(this.ws)}}catch(a){let h=(this.useSecureWebSocket?"https:":"http:")+"//"+o;fetch(h,{headers:{Upgrade:"websocket"}}).then(d=>{if(this.ws=d.webSocket,this.ws==null)throw a;this.ws.accept(),s(this.ws,!0)}).catch(d=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${d}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),i=n.read.bind(n),s=this.rawWrite.bind(this),{read:o,write:a}=await this.subtls.startTls(e,t,i,s,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=o,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let t=Z.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws&&this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",n=i=>{}){return e.length===0?(n(),!0):(typeof e=="string"&&(e=Z.from(e,t)),this.tlsState===0?(this.rawWrite(e),n()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,t,n)}):(this.tlsWrite(e),n()),!0)}end(e=Z.alloc(0),t="utf8",n=()=>{}){return this.write(e,t,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},y(cr,"Socket"),ee(cr,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:y((r,e,t)=>{let n;return t?.jwtAuth?n=r.replace(Ys,"apiauth."):n=r.replace(Ys,"api."),"https://"+n+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:y(r=>r+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),ee(cr,"opts",{}),hr=cr}),Ku={};Ke(Ku,{parse:()=>io});function io(r,e=!1){let{protocol:t}=new URL(r),n="http:"+r.substring(t.length),{username:i,password:s,host:o,hostname:a,port:h,pathname:d,search:f,searchParams:p,hash:b}=new URL(n);s=decodeURIComponent(s),i=decodeURIComponent(i),d=decodeURIComponent(d);let w=i+":"+s,g=e?Object.fromEntries(p.entries()):f;return{href:r,protocol:t,auth:w,username:i,password:s,host:o,hostname:a,port:h,pathname:d,search:f,query:g,hash:b}}var Wu=Oe(()=>{"use strict";J(),y(io,"parse")}),Gu=se(r=>{"use strict";J(),r.parse=function(i,s){return new t(i,s).parse()};var e=class Hu{constructor(s,o){this.source=s,this.transform=o||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var s=this.source[this.position++];return s==="\\"?{value:this.source[this.position++],escaped:!0}:{value:s,escaped:!1}}record(s){this.recorded.push(s)}newEntry(s){var o;(this.recorded.length>0||s)&&(o=this.recorded.join(""),o==="NULL"&&!s&&(o=null),o!==null&&(o=this.transform(o)),this.entries.push(o),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var s=this.nextCharacter();if(s.value==="=")break}}parse(s){var o,a,h;for(this.consumeDimensions();!this.isEof();)if(o=this.nextCharacter(),o.value==="{"&&!h)this.dimension++,this.dimension>1&&(a=new Hu(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(o.value==="}"&&!h){if(this.dimension--,!this.dimension&&(this.newEntry(),s))return this.entries}else o.value==='"'&&!o.escaped?(h&&this.newEntry(!0),h=!h):o.value===","&&!h?this.newEntry():this.record(o.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};y(e,"ArrayParser");var t=e;function n(i){return i}y(n,"identity")}),Ju=se((r,e)=>{J();var t=Gu();e.exports={create:y(function(n,i){return{parse:y(function(){return t.parse(n,i)},"parse")}},"create")}}),Hp=se((r,e)=>{"use strict";J();var t=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,i=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,s=/^-?infinity$/;e.exports=y(function(f){if(s.test(f))return Number(f.replace("i","I"));var p=t.exec(f);if(!p)return o(f)||null;var b=!!p[8],w=parseInt(p[1],10);b&&(w=h(w));var g=parseInt(p[2],10)-1,c=p[3],S=parseInt(p[4],10),v=parseInt(p[5],10),T=parseInt(p[6],10),A=p[7];A=A?1e3*parseFloat(A):0;var _,$=a(f);return $!=null?(_=new Date(Date.UTC(w,g,c,S,v,T,A)),d(w)&&_.setUTCFullYear(w),$!==0&&_.setTime(_.getTime()-$)):(_=new Date(w,g,c,S,v,T,A),d(w)&&_.setFullYear(w)),_},"parseDate");function o(f){var p=n.exec(f);if(p){var b=parseInt(p[1],10),w=!!p[4];w&&(b=h(b));var g=parseInt(p[2],10)-1,c=p[3],S=new Date(b,g,c);return d(b)&&S.setFullYear(b),S}}y(o,"getDate");function a(f){if(f.endsWith("+00"))return 0;var p=i.exec(f.split(" ")[1]);if(p){var b=p[1];if(b==="Z")return 0;var w=b==="-"?-1:1,g=parseInt(p[2],10)*3600+parseInt(p[3]||0,10)*60+parseInt(p[4]||0,10);return g*w*1e3}}y(a,"timeZoneOffset");function h(f){return-(f-1)}y(h,"bcYearToNegativeYear");function d(f){return f>=0&&f<100}y(d,"is0To99")}),Jp=se((r,e)=>{J(),e.exports=n;var t=Object.prototype.hasOwnProperty;function n(i){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var a in o)t.call(o,a)&&(i[a]=o[a])}return i}y(n,"extend")}),Xp=se((r,e)=>{"use strict";J();var t=Jp();e.exports=n;function n(T){if(!(this instanceof n))return new n(T);t(this,v(T))}y(n,"PostgresInterval");var i=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var T=i.filter(this.hasOwnProperty,this);return this.milliseconds&&T.indexOf("seconds")<0&&T.push("seconds"),T.length===0?"0":T.map(function(A){var _=this[A]||0;return A==="seconds"&&this.milliseconds&&(_=(_+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),_+" "+A},this).join(" ")};var s={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},o=["years","months","days"],a=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){var T=o.map(_,this).join(""),A=a.map(_,this).join("");return"P"+T+"T"+A;function _($){var C=this[$]||0;return $==="seconds"&&this.milliseconds&&(C=(C+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),C+s[$]}};var h="([+-]?\\d+)",d=h+"\\s+years?",f=h+"\\s+mons?",p=h+"\\s+days?",b="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",w=new RegExp([d,f,p,b].map(function(T){return"("+T+")?"}).join("\\s*")),g={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},c=["hours","minutes","seconds","milliseconds"];function S(T){var A=T+"000000".slice(T.length);return parseInt(A,10)/1e3}y(S,"parseMilliseconds");function v(T){if(!T)return{};var A=w.exec(T),_=A[8]==="-";return Object.keys(g).reduce(function($,C){var L=g[C],N=A[L];return!N||(N=C==="milliseconds"?S(N):parseInt(N,10),!N)||(_&&~c.indexOf(C)&&(N*=-1),$[C]=N),$},{})}y(v,"parse")}),Yp=se((r,e)=>{"use strict";J(),e.exports=y(function(t){if(/^\\x/.test(t))return new Z(t.substr(2),"hex");for(var n="",i=0;i<t.length;)if(t[i]!=="\\")n+=t[i],++i;else if(/[0-7]{3}/.test(t.substr(i+1,3)))n+=String.fromCharCode(parseInt(t.substr(i+1,3),8)),i+=4;else{for(var s=1;i+s<t.length&&t[i+s]==="\\";)s++;for(var o=0;o<Math.floor(s/2);++o)n+="\\";i+=Math.floor(s/2)*2}return new Z(n,"binary")},"parseBytea")}),Zp=se((r,e)=>{J();var t=Gu(),n=Ju(),i=Hp(),s=Xp(),o=Yp();function a(x){return y(function(D){return D===null?D:x(D)},"nullAllowed")}y(a,"allowNull");function h(x){return x===null?x:x==="TRUE"||x==="t"||x==="true"||x==="y"||x==="yes"||x==="on"||x==="1"}y(h,"parseBool");function d(x){return x?t.parse(x,h):null}y(d,"parseBoolArray");function f(x){return parseInt(x,10)}y(f,"parseBaseTenInt");function p(x){return x?t.parse(x,a(f)):null}y(p,"parseIntegerArray");function b(x){return x?t.parse(x,a(function(D){return _(D).trim()})):null}y(b,"parseBigIntegerArray");var w=y(function(x){if(!x)return null;var D=n.create(x,function(O){return O!==null&&(O=C(O)),O});return D.parse()},"parsePointArray"),g=y(function(x){if(!x)return null;var D=n.create(x,function(O){return O!==null&&(O=parseFloat(O)),O});return D.parse()},"parseFloatArray"),c=y(function(x){if(!x)return null;var D=n.create(x);return D.parse()},"parseStringArray"),S=y(function(x){if(!x)return null;var D=n.create(x,function(O){return O!==null&&(O=i(O)),O});return D.parse()},"parseDateArray"),v=y(function(x){if(!x)return null;var D=n.create(x,function(O){return O!==null&&(O=s(O)),O});return D.parse()},"parseIntervalArray"),T=y(function(x){return x?t.parse(x,a(o)):null},"parseByteAArray"),A=y(function(x){return parseInt(x,10)},"parseInteger"),_=y(function(x){var D=String(x);return/^\d+$/.test(D)?D:x},"parseBigInteger"),$=y(function(x){return x?t.parse(x,a(JSON.parse)):null},"parseJsonArray"),C=y(function(x){return x[0]!=="("?null:(x=x.substring(1,x.length-1).split(","),{x:parseFloat(x[0]),y:parseFloat(x[1])})},"parsePoint"),L=y(function(x){if(x[0]!=="<"&&x[1]!=="(")return null;for(var D="(",O="",W=!1,G=2;G<x.length-1;G++){if(W||(D+=x[G]),x[G]===")"){W=!0;continue}else if(!W)continue;x[G]!==","&&(O+=x[G])}var q=C(D);return q.radius=parseFloat(O),q},"parseCircle"),N=y(function(x){x(20,_),x(21,A),x(23,A),x(26,A),x(700,parseFloat),x(701,parseFloat),x(16,h),x(1082,i),x(1114,i),x(1184,i),x(600,C),x(651,c),x(718,L),x(1e3,d),x(1001,T),x(1005,p),x(1007,p),x(1028,p),x(1016,b),x(1017,w),x(1021,g),x(1022,g),x(1231,g),x(1014,c),x(1015,c),x(1008,c),x(1009,c),x(1040,c),x(1041,c),x(1115,S),x(1182,S),x(1185,S),x(1186,s),x(1187,v),x(17,o),x(114,JSON.parse.bind(JSON)),x(3802,JSON.parse.bind(JSON)),x(199,$),x(3807,$),x(3907,c),x(2951,c),x(791,c),x(1183,c),x(1270,c)},"init");e.exports={init:N}}),ed=se((r,e)=>{"use strict";J();var t=1e6;function n(i){var s=i.readInt32BE(0),o=i.readUInt32BE(4),a="";s<0&&(s=~s+(o===0),o=~o+1>>>0,a="-");var h="",d,f,p,b,w,g;{if(d=s%t,s=s/t>>>0,f=4294967296*d+o,o=f/t>>>0,p=""+(f-t*o),o===0&&s===0)return a+p+h;for(b="",w=6-p.length,g=0;g<w;g++)b+="0";h=b+p+h}{if(d=s%t,s=s/t>>>0,f=4294967296*d+o,o=f/t>>>0,p=""+(f-t*o),o===0&&s===0)return a+p+h;for(b="",w=6-p.length,g=0;g<w;g++)b+="0";h=b+p+h}{if(d=s%t,s=s/t>>>0,f=4294967296*d+o,o=f/t>>>0,p=""+(f-t*o),o===0&&s===0)return a+p+h;for(b="",w=6-p.length,g=0;g<w;g++)b+="0";h=b+p+h}return d=s%t,f=4294967296*d+o,p=""+f%t,a+p+h}y(n,"readInt8"),e.exports=n}),td=se((r,e)=>{J();var t=ed(),n=y(function(c,S,v,T,A){v=v||0,T=T||!1,A=A||function(W,G,q){return W*Math.pow(2,q)+G};var _=v>>3,$=y(function(W){return T?~W&255:W},"inv"),C=255,L=8-v%8;S<L&&(C=255<<8-S&255,L=S),v&&(C=C>>v%8);var N=0;v%8+S>=8&&(N=A(0,$(c[_])&C,L));for(var x=S+v>>3,D=_+1;D<x;D++)N=A(N,$(c[D]),8);var O=(S+v)%8;return O>0&&(N=A(N,$(c[x])>>8-O,O)),N},"parseBits"),i=y(function(c,S,v){var T=Math.pow(2,v-1)-1,A=n(c,1),_=n(c,v,1);if(_===0)return 0;var $=1,C=y(function(N,x,D){N===0&&(N=1);for(var O=1;O<=D;O++)$/=2,(x&1<<D-O)>0&&(N+=$);return N},"parsePrecisionBits"),L=n(c,S,v+1,!1,C);return _==Math.pow(2,v+1)-1?L===0?A===0?1/0:-1/0:NaN:(A===0?1:-1)*Math.pow(2,_-T)*L},"parseFloatFromBits"),s=y(function(c){return n(c,1)==1?-1*(n(c,15,1,!0)+1):n(c,15,1)},"parseInt16"),o=y(function(c){return n(c,1)==1?-1*(n(c,31,1,!0)+1):n(c,31,1)},"parseInt32"),a=y(function(c){return i(c,23,8)},"parseFloat32"),h=y(function(c){return i(c,52,11)},"parseFloat64"),d=y(function(c){var S=n(c,16,32);if(S==49152)return NaN;for(var v=Math.pow(1e4,n(c,16,16)),T=0,A=[],_=n(c,16),$=0;$<_;$++)T+=n(c,16,64+16*$)*v,v/=1e4;var C=Math.pow(10,n(c,16,48));return(S===0?1:-1)*Math.round(T*C)/C},"parseNumeric"),f=y(function(c,S){var v=n(S,1),T=n(S,63,1),A=new Date((v===0?1:-1)*T/1e3+9466848e5);return c||A.setTime(A.getTime()+A.getTimezoneOffset()*6e4),A.usec=T%1e3,A.getMicroSeconds=function(){return this.usec},A.setMicroSeconds=function(_){this.usec=_},A.getUTCMicroSeconds=function(){return this.usec},A},"parseDate"),p=y(function(c){for(var S=n(c,32),v=n(c,32,32),T=n(c,32,64),A=96,_=[],$=0;$<S;$++)_[$]=n(c,32,A),A+=32,A+=32;var C=y(function(N){var x=n(c,32,A);if(A+=32,x==4294967295)return null;var D;if(N==23||N==20)return D=n(c,x*8,A),A+=x*8,D;if(N==25)return D=c.toString(this.encoding,A>>3,(A+=x<<3)>>3),D;console.log("ERROR: ElementType not implemented: "+N)},"parseElement"),L=y(function(N,x){var D=[],O;if(N.length>1){var W=N.shift();for(O=0;O<W;O++)D[O]=L(N,x);N.unshift(W)}else for(O=0;O<N[0];O++)D[O]=C(x);return D},"parse");return L(_,T)},"parseArray"),b=y(function(c){return c.toString("utf8")},"parseText"),w=y(function(c){return c===null?null:n(c,8)>0},"parseBool"),g=y(function(c){c(20,t),c(21,s),c(23,o),c(26,o),c(1700,d),c(700,a),c(701,h),c(16,w),c(1114,f.bind(null,!1)),c(1184,f.bind(null,!0)),c(1e3,p),c(1007,p),c(1016,p),c(1008,p),c(1009,p),c(25,b)},"init");e.exports={init:g}}),rd=se((r,e)=>{J(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),tn=se(r=>{J();var e=Zp(),t=td(),n=Ju(),i=rd();r.getTypeParser=a,r.setTypeParser=h,r.arrayParser=n,r.builtins=i;var s={text:{},binary:{}};function o(d){return String(d)}y(o,"noParse");function a(d,f){return f=f||"text",s[f]&&s[f][d]||o}y(a,"getTypeParser");function h(d,f,p){typeof f=="function"&&(p=f,f="text"),s[f][d]=p}y(h,"setTypeParser"),e.init(function(d,f){s.text[d]=f}),t.init(function(d,f){s.binary[d]=f})}),so=se((r,e)=>{"use strict";J();var t=tn();function n(i){this._types=i||t,this.text={},this.binary={}}y(n,"TypeOverrides"),n.prototype.getOverrides=function(i){switch(i){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(i,s,o){typeof s=="function"&&(o=s,s="text"),this.getOverrides(s)[i]=o},n.prototype.getTypeParser=function(i,s){return s=s||"text",this.getOverrides(s)[i]||this._types.getTypeParser(i,s)},e.exports=n});function fr(r){let e=1779033703,t=3144134277,n=1013904242,i=2773480762,s=1359893119,o=2600822924,a=528734635,h=1541459225,d=0,f=0,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=y((T,A)=>T>>>A|T<<32-A,"rrot"),w=new Uint32Array(64),g=new Uint8Array(64),c=y(()=>{for(let D=0,O=0;D<16;D++,O+=4)w[D]=g[O]<<24|g[O+1]<<16|g[O+2]<<8|g[O+3];for(let D=16;D<64;D++){let O=b(w[D-15],7)^b(w[D-15],18)^w[D-15]>>>3,W=b(w[D-2],17)^b(w[D-2],19)^w[D-2]>>>10;w[D]=w[D-16]+O+w[D-7]+W|0}let T=e,A=t,_=n,$=i,C=s,L=o,N=a,x=h;for(let D=0;D<64;D++){let O=b(C,6)^b(C,11)^b(C,25),W=C&L^~C&N,G=x+O+W+p[D]+w[D]|0,q=b(T,2)^b(T,13)^b(T,22),F=T&A^T&_^A&_,Y=q+F|0;x=N,N=L,L=C,C=$+G|0,$=_,_=A,A=T,T=G+Y|0}e=e+T|0,t=t+A|0,n=n+_|0,i=i+$|0,s=s+C|0,o=o+L|0,a=a+N|0,h=h+x|0,f=0},"process"),S=y(T=>{typeof T=="string"&&(T=new TextEncoder().encode(T));for(let A=0;A<T.length;A++)g[f++]=T[A],f===64&&c();d+=T.length},"add"),v=y(()=>{if(g[f++]=128,f==64&&c(),f+8>64){for(;f<64;)g[f++]=0;c()}for(;f<58;)g[f++]=0;let T=d*8;g[f++]=T/1099511627776&255,g[f++]=T/4294967296&255,g[f++]=T>>>24,g[f++]=T>>>16&255,g[f++]=T>>>8&255,g[f++]=T&255,c();let A=new Uint8Array(32);return A[0]=e>>>24,A[1]=e>>>16&255,A[2]=e>>>8&255,A[3]=e&255,A[4]=t>>>24,A[5]=t>>>16&255,A[6]=t>>>8&255,A[7]=t&255,A[8]=n>>>24,A[9]=n>>>16&255,A[10]=n>>>8&255,A[11]=n&255,A[12]=i>>>24,A[13]=i>>>16&255,A[14]=i>>>8&255,A[15]=i&255,A[16]=s>>>24,A[17]=s>>>16&255,A[18]=s>>>8&255,A[19]=s&255,A[20]=o>>>24,A[21]=o>>>16&255,A[22]=o>>>8&255,A[23]=o&255,A[24]=a>>>24,A[25]=a>>>16&255,A[26]=a>>>8&255,A[27]=a&255,A[28]=h>>>24,A[29]=h>>>16&255,A[30]=h>>>8&255,A[31]=h&255,A},"digest");return r===void 0?{add:S,digest:v}:(S(r),v())}var nd=Oe(()=>{"use strict";J(),y(fr,"sha256")}),nt,eo,id=Oe(()=>{"use strict";J(),nt=class je{constructor(){ee(this,"_dataLength",0),ee(this,"_bufferLength",0),ee(this,"_state",new Int32Array(4)),ee(this,"_buffer",new ArrayBuffer(68)),ee(this,"_buffer8"),ee(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=je.hexChars,n=je.hexOut,i,s,o,a;for(a=0;a<4;a+=1)for(s=a*8,i=e[a],o=0;o<8;o+=2)n[s+1+o]=t.charAt(i&15),i>>>=4,n[s+0+o]=t.charAt(i&15),i>>>=4;return n.join("")}static _md5cycle(e,t){let n=e[0],i=e[1],s=e[2],o=e[3];n+=(i&s|~i&o)+t[0]-680876936|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+t[1]-389564586|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+t[2]+606105819|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+t[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+t[4]-176418897|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+t[5]+1200080426|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+t[6]-1473231341|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+t[7]-45705983|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+t[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+t[9]-1958414417|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+t[10]-42063|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+t[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+t[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+t[13]-40341101|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+t[14]-1502002290|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+t[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,n+=(i&o|s&~o)+t[1]-165796510|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+t[6]-1069501632|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+t[11]+643717713|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+t[0]-373897302|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+t[5]-701558691|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+t[10]+38016083|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+t[15]-660478335|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+t[4]-405537848|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+t[9]+568446438|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+t[14]-1019803690|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+t[3]-187363961|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+t[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+t[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+t[2]-51403784|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+t[7]+1735328473|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+t[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,n+=(i^s^o)+t[5]-378558|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+t[8]-2022574463|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+t[11]+1839030562|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+t[14]-35309556|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+t[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+t[4]+1272893353|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+t[7]-155497632|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+t[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+t[13]+681279174|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+t[0]-358537222|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+t[3]-722521979|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+t[6]+76029189|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+t[9]-640364487|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+t[12]-421815835|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+t[15]+530742520|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+t[2]-995338651|0,i=(i<<23|i>>>9)+s|0,n+=(s^(i|~o))+t[0]-198630844|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+t[7]+1126891415|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+t[14]-1416354905|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+t[5]-57434055|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+t[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+t[3]-1894986606|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+t[10]-1051523|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+t[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+t[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+t[15]-30611744|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+t[6]-1560198380|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+t[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+t[4]-145523070|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+t[11]-1120210379|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+t[2]+718787259|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+t[9]-343485551|0,i=(i<<21|i>>>11)+s|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=s+e[2]|0,e[3]=o+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(je.stateIdentity),this}appendStr(e){let t=this._buffer8,n=this._buffer32,i=this._bufferLength,s,o;for(o=0;o<e.length;o+=1){if(s=e.charCodeAt(o),s<128)t[i++]=s;else if(s<2048)t[i++]=(s>>>6)+192,t[i++]=s&63|128;else if(s<55296||s>56319)t[i++]=(s>>>12)+224,t[i++]=s>>>6&63|128,t[i++]=s&63|128;else{if(s=(s-55296)*1024+(e.charCodeAt(++o)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[i++]=(s>>>18)+240,t[i++]=s>>>12&63|128,t[i++]=s>>>6&63|128,t[i++]=s&63|128}i>=64&&(this._dataLength+=64,je._md5cycle(this._state,n),i-=64,n[0]=n[16])}return this._bufferLength=i,this}appendAsciiStr(e){let t=this._buffer8,n=this._buffer32,i=this._bufferLength,s,o=0;for(;;){for(s=Math.min(e.length-o,64-i);s--;)t[i++]=e.charCodeAt(o++);if(i<64)break;this._dataLength+=64,je._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}appendByteArray(e){let t=this._buffer8,n=this._buffer32,i=this._bufferLength,s,o=0;for(;;){for(s=Math.min(e.length-o,64-i);s--;)t[i++]=e[o++];if(i<64)break;this._dataLength+=64,je._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,n=e.state,i=this._state,s;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],s=0;s<t.length;s+=1)this._buffer8[s]=t.charCodeAt(s)}end(e=!1){let t=this._bufferLength,n=this._buffer8,i=this._buffer32,s=(t>>2)+1;this._dataLength+=t;let o=this._dataLength*8;if(n[t]=128,n[t+1]=n[t+2]=n[t+3]=0,i.set(je.buffer32Identity.subarray(s),s),t>55&&(je._md5cycle(this._state,i),i.set(je.buffer32Identity)),o<=4294967295)i[14]=o;else{let a=o.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let h=parseInt(a[2],16),d=parseInt(a[1],16)||0;i[14]=h,i[15]=d}return je._md5cycle(this._state,i),e?this._state:je._hex(this._state)}},y(nt,"Md5"),ee(nt,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),ee(nt,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),ee(nt,"hexChars","0123456789abcdef"),ee(nt,"hexOut",[]),ee(nt,"onePassHasher",new nt),eo=nt}),oo={};Ke(oo,{createHash:()=>Yu,createHmac:()=>Zu,randomBytes:()=>Xu});function Xu(r){return crypto.getRandomValues(Z.alloc(r))}function Yu(r){if(r==="sha256")return{update:y(function(e){return{digest:y(function(){return Z.from(fr(e))},"digest")}},"update")};if(r==="md5")return{update:y(function(e){return{digest:y(function(){return typeof e=="string"?eo.hashStr(e):eo.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${r}' not supported`)}function Zu(r,e){if(r!=="sha256")throw new Error(`Only sha256 is supported (requested: '${r}')`);return{update:y(function(t){return{digest:y(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof t=="string"&&(t=new TextEncoder().encode(t));let n=e.length;if(n>64)e=fr(e);else if(n<64){let h=new Uint8Array(64);h.set(e),e=h}let i=new Uint8Array(64),s=new Uint8Array(64);for(let h=0;h<64;h++)i[h]=54^e[h],s[h]=92^e[h];let o=new Uint8Array(t.length+64);o.set(i,0),o.set(t,64);let a=new Uint8Array(96);return a.set(s,0),a.set(fr(o),64),Z.from(fr(a))},"digest")}},"update")}}var ec=Oe(()=>{"use strict";J(),nd(),id(),y(Xu,"randomBytes"),y(Yu,"createHash"),y(Zu,"createHmac")}),rn=se((r,e)=>{"use strict";J(),e.exports={host:"localhost",user:ie.platform==="win32"?ie.env.USERNAME:ie.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=tn(),n=t.getTypeParser(20,"text"),i=t.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(s){t.setTypeParser(20,"text",s?t.getTypeParser(23,"text"):n),t.setTypeParser(1016,"text",s?t.getTypeParser(1007,"text"):i)})}),nn=se((r,e)=>{"use strict";J();var t=(ec(),Ae(oo)),n=rn();function i(g){var c=g.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+c+'"'}y(i,"escapeElement");function s(g){for(var c="{",S=0;S<g.length;S++)S>0&&(c=c+","),g[S]===null||typeof g[S]>"u"?c=c+"NULL":Array.isArray(g[S])?c=c+s(g[S]):g[S]instanceof Z?c+="\\\\x"+g[S].toString("hex"):c+=i(o(g[S]));return c=c+"}",c}y(s,"arrayString");var o=y(function(g,c){if(g==null)return null;if(g instanceof Z)return g;if(ArrayBuffer.isView(g)){var S=Z.from(g.buffer,g.byteOffset,g.byteLength);return S.length===g.byteLength?S:S.slice(g.byteOffset,g.byteOffset+g.byteLength)}return g instanceof Date?n.parseInputDatesAsUTC?f(g):d(g):Array.isArray(g)?s(g):typeof g=="object"?a(g,c):g.toString()},"prepareValue");function a(g,c){if(g&&typeof g.toPostgres=="function"){if(c=c||[],c.indexOf(g)!==-1)throw new Error('circular reference detected while preparing "'+g+'" for query');return c.push(g),o(g.toPostgres(o),c)}return JSON.stringify(g)}y(a,"prepareObject");function h(g,c){for(g=""+g;g.length<c;)g="0"+g;return g}y(h,"pad");function d(g){var c=-g.getTimezoneOffset(),S=g.getFullYear(),v=S<1;v&&(S=Math.abs(S)+1);var T=h(S,4)+"-"+h(g.getMonth()+1,2)+"-"+h(g.getDate(),2)+"T"+h(g.getHours(),2)+":"+h(g.getMinutes(),2)+":"+h(g.getSeconds(),2)+"."+h(g.getMilliseconds(),3);return c<0?(T+="-",c*=-1):T+="+",T+=h(Math.floor(c/60),2)+":"+h(c%60,2),v&&(T+=" BC"),T}y(d,"dateToString");function f(g){var c=g.getUTCFullYear(),S=c<1;S&&(c=Math.abs(c)+1);var v=h(c,4)+"-"+h(g.getUTCMonth()+1,2)+"-"+h(g.getUTCDate(),2)+"T"+h(g.getUTCHours(),2)+":"+h(g.getUTCMinutes(),2)+":"+h(g.getUTCSeconds(),2)+"."+h(g.getUTCMilliseconds(),3);return v+="+00:00",S&&(v+=" BC"),v}y(f,"dateToStringUTC");function p(g,c,S){return g=typeof g=="string"?{text:g}:g,c&&(typeof c=="function"?g.callback=c:g.values=c),S&&(g.callback=S),g}y(p,"normalizeQueryConfig");var b=y(function(g){return t.createHash("md5").update(g,"utf-8").digest("hex")},"md5"),w=y(function(g,c,S){var v=b(c+g),T=b(Z.concat([Z.from(v),S]));return"md5"+T},"postgresMd5PasswordHash");e.exports={prepareValue:y(function(g){return o(g)},"prepareValueWrapper"),normalizeQueryConfig:p,postgresMd5PasswordHash:w,md5:b}}),dr={};Ke(dr,{default:()=>tc});var tc,sn=Oe(()=>{"use strict";J(),tc={}}),sd=se((r,e)=>{"use strict";J();var t=(ec(),Ae(oo));function n(c){if(c.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let S=t.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:S,response:"n,,n=*,r="+S,message:"SASLInitialResponse"}}y(n,"startSession");function i(c,S,v){if(c.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof S!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof v!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let T=d(v);if(T.nonce.startsWith(c.clientNonce)){if(T.nonce.length===c.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var A=Z.from(T.salt,"base64"),_=g(S,A,T.iteration),$=w(_,"Client Key"),C=b($),L="n=*,r="+c.clientNonce,N="r="+T.nonce+",s="+T.salt+",i="+T.iteration,x="c=biws,r="+T.nonce,D=L+","+N+","+x,O=w(C,D),W=p($,O),G=W.toString("base64"),q=w(_,"Server Key"),F=w(q,D);c.message="SASLResponse",c.serverSignature=F.toString("base64"),c.response=x+",p="+G}y(i,"continueSession");function s(c,S){if(c.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof S!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:v}=f(S);if(v!==c.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}y(s,"finalizeSession");function o(c){if(typeof c!="string")throw new TypeError("SASL: text must be a string");return c.split("").map((S,v)=>c.charCodeAt(v)).every(S=>S>=33&&S<=43||S>=45&&S<=126)}y(o,"isPrintableChars");function a(c){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(c)}y(a,"isBase64");function h(c){if(typeof c!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(c.split(",").map(S=>{if(!/^.=/.test(S))throw new Error("SASL: Invalid attribute pair entry");let v=S[0],T=S.substring(2);return[v,T]}))}y(h,"parseAttributePairs");function d(c){let S=h(c),v=S.get("r");if(v){if(!o(v))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let T=S.get("s");if(T){if(!a(T))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let A=S.get("i");if(A){if(!/^[1-9][0-9]*$/.test(A))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let _=parseInt(A,10);return{nonce:v,salt:T,iteration:_}}y(d,"parseServerFirstMessage");function f(c){let S=h(c).get("v");if(S){if(!a(S))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:S}}y(f,"parseServerFinalMessage");function p(c,S){if(!Z.isBuffer(c))throw new TypeError("first argument must be a Buffer");if(!Z.isBuffer(S))throw new TypeError("second argument must be a Buffer");if(c.length!==S.length)throw new Error("Buffer lengths must match");if(c.length===0)throw new Error("Buffers cannot be empty");return Z.from(c.map((v,T)=>c[T]^S[T]))}y(p,"xorBuffers");function b(c){return t.createHash("sha256").update(c).digest()}y(b,"sha256");function w(c,S){return t.createHmac("sha256",c).update(S).digest()}y(w,"hmacSha256");function g(c,S,v){for(var T=w(c,Z.concat([S,Z.from([0,0,0,1])])),A=T,_=0;_<v-1;_++)T=w(c,T),A=p(A,T);return A}y(g,"Hi"),e.exports={startSession:n,continueSession:i,finalizeSession:s}}),ao={};Ke(ao,{join:()=>rc});function rc(...r){return r.join("/")}var nc=Oe(()=>{"use strict";J(),y(rc,"join")}),uo={};Ke(uo,{stat:()=>ic});function ic(r,e){e(new Error("No filesystem"))}var sc=Oe(()=>{"use strict";J(),y(ic,"stat")}),co={};Ke(co,{default:()=>oc});var oc,ac=Oe(()=>{"use strict";J(),oc={}}),uc={};Ke(uc,{StringDecoder:()=>cc});var Zs,cc,od=Oe(()=>{"use strict";J(),Zs=class{constructor(e){ee(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},y(Zs,"StringDecoder"),cc=Zs}),ad=se((r,e)=>{"use strict";J();var{Transform:t}=(ac(),Ae(co)),{StringDecoder:n}=(od(),Ae(uc)),i=Symbol("last"),s=Symbol("decoder");function o(p,b,w){let g;if(this.overflow){if(g=this[s].write(p).split(this.matcher),g.length===1)return w();g.shift(),this.overflow=!1}else this[i]+=this[s].write(p),g=this[i].split(this.matcher);this[i]=g.pop();for(let c=0;c<g.length;c++)try{h(this,this.mapper(g[c]))}catch(S){return w(S)}if(this.overflow=this[i].length>this.maxLength,this.overflow&&!this.skipOverflow){w(new Error("maximum buffer reached"));return}w()}y(o,"transform");function a(p){if(this[i]+=this[s].end(),this[i])try{h(this,this.mapper(this[i]))}catch(b){return p(b)}p()}y(a,"flush");function h(p,b){b!==void 0&&p.push(b)}y(h,"push");function d(p){return p}y(d,"noop");function f(p,b,w){switch(p=p||/\r?\n/,b=b||d,w=w||{},arguments.length){case 1:typeof p=="function"?(b=p,p=/\r?\n/):typeof p=="object"&&!(p instanceof RegExp)&&!p[Symbol.split]&&(w=p,p=/\r?\n/);break;case 2:typeof p=="function"?(w=b,b=p,p=/\r?\n/):typeof b=="object"&&(w=b,b=d)}w=Object.assign({},w),w.autoDestroy=!0,w.transform=o,w.flush=a,w.readableObjectMode=!0;let g=new t(w);return g[i]="",g[s]=new n("utf8"),g.matcher=p,g.mapper=b,g.maxLength=w.maxLength,g.skipOverflow=w.skipOverflow||!1,g.overflow=!1,g._destroy=function(c,S){this._writableState.errorEmitted=!1,S(c)},g}y(f,"split"),e.exports=f}),ud=se((r,e)=>{"use strict";J();var t=(nc(),Ae(ao)),n=(ac(),Ae(co)).Stream,i=ad(),s=(sn(),Ae(dr)),o=5432,a=ie.platform==="win32",h=ie.stderr,d=56,f=7,p=61440,b=32768;function w($){return($&p)==b}y(w,"isRegFile");var g=["host","port","database","user","password"],c=g.length,S=g[c-1];function v(){var $=h instanceof n&&h.writable===!0;if($){var C=Array.prototype.slice.call(arguments).concat(`
`);h.write(s.format.apply(s,C))}}y(v,"warn"),Object.defineProperty(e.exports,"isWin",{get:y(function(){return a},"get"),set:y(function($){a=$},"set")}),e.exports.warnTo=function($){var C=h;return h=$,C},e.exports.getFileName=function($){var C=$||ie.env,L=C.PGPASSFILE||(a?t.join(C.APPDATA||"./","postgresql","pgpass.conf"):t.join(C.HOME||"./",".pgpass"));return L},e.exports.usePgPass=function($,C){return Object.prototype.hasOwnProperty.call(ie.env,"PGPASSWORD")?!1:a?!0:(C=C||"<unkn>",w($.mode)?$.mode&(d|f)?(v('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',C),!1):!0:(v('WARNING: password file "%s" is not a plain file',C),!1))};var T=e.exports.match=function($,C){return g.slice(0,-1).reduce(function(L,N,x){return x==1&&Number($[N]||o)===Number(C[N])?L&&!0:L&&(C[N]==="*"||C[N]===$[N])},!0)};e.exports.getPassword=function($,C,L){var N,x=C.pipe(i());function D(G){var q=A(G);q&&_(q)&&T($,q)&&(N=q[S],x.end())}y(D,"onLine");var O=y(function(){C.destroy(),L(N)},"onEnd"),W=y(function(G){C.destroy(),v("WARNING: error on reading file: %s",G),L(void 0)},"onErr");C.on("error",W),x.on("data",D).on("end",O).on("error",W)};var A=e.exports.parseLine=function($){if($.length<11||$.match(/^\s+#/))return null;for(var C="",L="",N=0,x=0,D=0,O={},W=!1,G=y(function(F,Y,te){var ae=$.substring(Y,te);Object.hasOwnProperty.call(ie.env,"PGPASS_NO_DEESCAPE")||(ae=ae.replace(/\\([:\\])/g,"$1")),O[g[F]]=ae},"addToObj"),q=0;q<$.length-1;q+=1){if(C=$.charAt(q+1),L=$.charAt(q),W=N==c-1,W){G(N,x);break}q>=0&&C==":"&&L!=="\\"&&(G(N,x,q+1),x=q+2,N+=1)}return O=Object.keys(O).length===c?O:null,O},_=e.exports.isValidEntry=function($){for(var C={0:function(O){return O.length>0},1:function(O){return O==="*"?!0:(O=Number(O),isFinite(O)&&O>0&&O<9007199254740992&&Math.floor(O)===O)},2:function(O){return O.length>0},3:function(O){return O.length>0},4:function(O){return O.length>0}},L=0;L<g.length;L+=1){var N=C[L],x=$[g[L]]||"",D=N(x);if(!D)return!1}return!0}}),cd=se((r,e)=>{"use strict";J();var t=(nc(),Ae(ao)),n=(sc(),Ae(uo)),i=ud();e.exports=function(s,o){var a=i.getFileName();n.stat(a,function(h,d){if(h||!i.usePgPass(d,a))return o(void 0);var f=n.createReadStream(a);i.getPassword(s,f,o)})},e.exports.warnTo=i.warnTo}),lc={};Ke(lc,{default:()=>fc});var fc,ld=Oe(()=>{"use strict";J(),fc={}}),fd=se((r,e)=>{"use strict";J();var t=(Wu(),Ae(Ku)),n=(sc(),Ae(uo));function i(s){if(s.charAt(0)==="/"){var a=s.split(" ");return{host:a[0],database:a[1]}}var o=t.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(s)?encodeURI(s).replace(/\%25(\d\d)/g,"%$1"):s,!0),a=o.query;for(var h in a)Array.isArray(a[h])&&(a[h]=a[h][a[h].length-1]);var d=(o.auth||":").split(":");if(a.user=d[0],a.password=d.splice(1).join(":"),a.port=o.port,o.protocol=="socket:")return a.host=decodeURI(o.pathname),a.database=o.query.db,a.client_encoding=o.query.encoding,a;a.host||(a.host=o.hostname);var f=o.pathname;if(!a.host&&f&&/^%2f/i.test(f)){var p=f.split("/");a.host=decodeURIComponent(p[0]),f=p.splice(1).join("/")}switch(f&&f.charAt(0)==="/"&&(f=f.slice(1)||null),a.database=f&&decodeURI(f),(a.ssl==="true"||a.ssl==="1")&&(a.ssl=!0),a.ssl==="0"&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert||a.sslmode)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=n.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=n.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=n.readFileSync(a.sslrootcert).toString()),a.sslmode){case"disable":{a.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{a.ssl.rejectUnauthorized=!1;break}}return a}y(i,"parse"),e.exports=i,i.parse=i}),lo=se((r,e)=>{"use strict";J();var t=(ld(),Ae(lc)),n=rn(),i=fd().parse,s=y(function(p,b,w){return w===void 0?w=ie.env["PG"+p.toUpperCase()]:w===!1||(w=ie.env[w]),b[p]||w||n[p]},"val"),o=y(function(){switch(ie.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),a=y(function(p){return"'"+(""+p).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),h=y(function(p,b,w){var g=b[w];g!=null&&p.push(w+"="+a(g))},"add"),d=class{constructor(b){b=typeof b=="string"?i(b):b||{},b.connectionString&&(b=Object.assign({},b,i(b.connectionString))),this.user=s("user",b),this.database=s("database",b),this.database===void 0&&(this.database=this.user),this.port=parseInt(s("port",b),10),this.host=s("host",b),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:s("password",b)}),this.binary=s("binary",b),this.options=s("options",b),this.ssl=typeof b.ssl>"u"?o():b.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=s("client_encoding",b),this.replication=s("replication",b),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=s("application_name",b,"PGAPPNAME"),this.fallback_application_name=s("fallback_application_name",b,!1),this.statement_timeout=s("statement_timeout",b,!1),this.lock_timeout=s("lock_timeout",b,!1),this.idle_in_transaction_session_timeout=s("idle_in_transaction_session_timeout",b,!1),this.query_timeout=s("query_timeout",b,!1),b.connectionTimeoutMillis===void 0?this.connect_timeout=ie.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(b.connectionTimeoutMillis/1e3),b.keepAlive===!1?this.keepalives=0:b.keepAlive===!0&&(this.keepalives=1),typeof b.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(b.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(b){var w=[];h(w,this,"user"),h(w,this,"password"),h(w,this,"port"),h(w,this,"application_name"),h(w,this,"fallback_application_name"),h(w,this,"connect_timeout"),h(w,this,"options");var g=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(h(w,g,"sslmode"),h(w,g,"sslca"),h(w,g,"sslkey"),h(w,g,"sslcert"),h(w,g,"sslrootcert"),this.database&&w.push("dbname="+a(this.database)),this.replication&&w.push("replication="+a(this.replication)),this.host&&w.push("host="+a(this.host)),this.isDomainSocket)return b(null,w.join(" "));this.client_encoding&&w.push("client_encoding="+a(this.client_encoding)),t.lookup(this.host,function(c,S){return c?b(c,null):(w.push("hostaddr="+a(S)),b(null,w.join(" ")))})}};y(d,"ConnectionParameters");var f=d;e.exports=f}),hd=se((r,e)=>{"use strict";J();var t=tn(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,i=class{constructor(a,h){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=h,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var h;a.text?h=n.exec(a.text):h=n.exec(a.command),h&&(this.command=h[1],h[3]?(this.oid=parseInt(h[2],10),this.rowCount=parseInt(h[3],10)):h[2]&&(this.rowCount=parseInt(h[2],10)))}_parseRowAsArray(a){for(var h=new Array(a.length),d=0,f=a.length;d<f;d++){var p=a[d];p!==null?h[d]=this._parsers[d](p):h[d]=null}return h}parseRow(a){for(var h={},d=0,f=a.length;d<f;d++){var p=a[d],b=this.fields[d].name;p!==null?h[b]=this._parsers[d](p):h[b]=null}return h}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=new Array(a.length));for(var h=0;h<a.length;h++){var d=a[h];this._types?this._parsers[h]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[h]=t.getTypeParser(d.dataTypeID,d.format||"text")}}};y(i,"Result");var s=i;e.exports=s}),pd=se((r,e)=>{"use strict";J();var{EventEmitter:t}=mt(),n=hd(),i=nn(),s=class extends t{constructor(h,d,f){super(),h=i.normalizeQueryConfig(h,d,f),this.text=h.text,this.values=h.values,this.rows=h.rows,this.types=h.types,this.name=h.name,this.binary=h.binary,this.portal=h.portal||"",this.callback=h.callback,this._rowMode=h.rowMode,ie.domain&&h.callback&&(this.callback=ie.domain.bind(h.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(h){this._checkForMultirow(),this._result.addFields(h.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(h){let d;if(!this._canceledDueToError){try{d=this._result.parseRow(h.fields)}catch(f){this._canceledDueToError=f;return}this.emit("row",d,this._result),this._accumulateRows&&this._result.addRow(d)}}handleCommandComplete(h,d){this._checkForMultirow(),this._result.addCommandComplete(h),this.rows&&d.sync()}handleEmptyQuery(h){this.rows&&h.sync()}handleError(h,d){if(this._canceledDueToError&&(h=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(h);this.emit("error",h)}handleReadyForQuery(h){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,h);if(this.callback)try{this.callback(null,this._results)}catch(d){ie.nextTick(()=>{throw d})}this.emit("end",this._results)}submit(h){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let d=h.parsedStatements[this.name];return this.text&&d&&this.text!==d?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(h):h.query(this.text),null)}hasBeenParsed(h){return this.name&&h.parsedStatements[this.name]}handlePortalSuspended(h){this._getRows(h,this.rows)}_getRows(h,d){h.execute({portal:this.portal,rows:d}),d?h.flush():h.sync()}prepare(h){this.isPreparedStatement=!0,this.hasBeenParsed(h)||h.parse({text:this.text,name:this.name,types:this.types});try{h.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:i.prepareValue})}catch(d){this.handleError(d,h);return}h.describe({type:"P",name:this.portal||""}),this._getRows(h,this.rows)}handleCopyInResponse(h){h.sendCopyFail("No source stream defined")}handleCopyData(h,d){}};y(s,"Query");var o=s;e.exports=o}),hc=se(r=>{"use strict";J(),Object.defineProperty(r,"__esModule",{value:!0}),r.NoticeMessage=r.DataRowMessage=r.CommandCompleteMessage=r.ReadyForQueryMessage=r.NotificationResponseMessage=r.BackendKeyDataMessage=r.AuthenticationMD5Password=r.ParameterStatusMessage=r.ParameterDescriptionMessage=r.RowDescriptionMessage=r.Field=r.CopyResponse=r.CopyDataMessage=r.DatabaseError=r.copyDone=r.emptyQuery=r.replicationStart=r.portalSuspended=r.noData=r.closeComplete=r.bindComplete=r.parseComplete=void 0,r.parseComplete={name:"parseComplete",length:5},r.bindComplete={name:"bindComplete",length:5},r.closeComplete={name:"closeComplete",length:5},r.noData={name:"noData",length:5},r.portalSuspended={name:"portalSuspended",length:5},r.replicationStart={name:"replicationStart",length:4},r.emptyQuery={name:"emptyQuery",length:4},r.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor(q,F,Y){super(q),this.length=F,this.name=Y}};y(e,"DatabaseError");var t=e;r.DatabaseError=t;var n=class{constructor(q,F){this.length=q,this.chunk=F,this.name="copyData"}};y(n,"CopyDataMessage");var i=n;r.CopyDataMessage=i;var s=class{constructor(q,F,Y,te){this.length=q,this.name=F,this.binary=Y,this.columnTypes=new Array(te)}};y(s,"CopyResponse");var o=s;r.CopyResponse=o;var a=class{constructor(q,F,Y,te,ae,ne,De){this.name=q,this.tableID=F,this.columnID=Y,this.dataTypeID=te,this.dataTypeSize=ae,this.dataTypeModifier=ne,this.format=De}};y(a,"Field");var h=a;r.Field=h;var d=class{constructor(q,F){this.length=q,this.fieldCount=F,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};y(d,"RowDescriptionMessage");var f=d;r.RowDescriptionMessage=f;var p=class{constructor(q,F){this.length=q,this.parameterCount=F,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};y(p,"ParameterDescriptionMessage");var b=p;r.ParameterDescriptionMessage=b;var w=class{constructor(q,F,Y){this.length=q,this.parameterName=F,this.parameterValue=Y,this.name="parameterStatus"}};y(w,"ParameterStatusMessage");var g=w;r.ParameterStatusMessage=g;var c=class{constructor(q,F){this.length=q,this.salt=F,this.name="authenticationMD5Password"}};y(c,"AuthenticationMD5Password");var S=c;r.AuthenticationMD5Password=S;var v=class{constructor(q,F,Y){this.length=q,this.processID=F,this.secretKey=Y,this.name="backendKeyData"}};y(v,"BackendKeyDataMessage");var T=v;r.BackendKeyDataMessage=T;var A=class{constructor(q,F,Y,te){this.length=q,this.processId=F,this.channel=Y,this.payload=te,this.name="notification"}};y(A,"NotificationResponseMessage");var _=A;r.NotificationResponseMessage=_;var $=class{constructor(q,F){this.length=q,this.status=F,this.name="readyForQuery"}};y($,"ReadyForQueryMessage");var C=$;r.ReadyForQueryMessage=C;var L=class{constructor(q,F){this.length=q,this.text=F,this.name="commandComplete"}};y(L,"CommandCompleteMessage");var N=L;r.CommandCompleteMessage=N;var x=class{constructor(q,F){this.length=q,this.fields=F,this.name="dataRow",this.fieldCount=F.length}};y(x,"DataRowMessage");var D=x;r.DataRowMessage=D;var O=class{constructor(q,F){this.length=q,this.message=F,this.name="notice"}};y(O,"NoticeMessage");var W=O;r.NoticeMessage=W}),dd=se(r=>{"use strict";J(),Object.defineProperty(r,"__esModule",{value:!0}),r.Writer=void 0;var e=class{constructor(i=256){this.size=i,this.offset=5,this.headerPosition=0,this.buffer=Z.allocUnsafe(i)}ensure(i){if(this.buffer.length-this.offset<i){let s=this.buffer,o=s.length+(s.length>>1)+i;this.buffer=Z.allocUnsafe(o),s.copy(this.buffer)}}addInt32(i){return this.ensure(4),this.buffer[this.offset++]=i>>>24&255,this.buffer[this.offset++]=i>>>16&255,this.buffer[this.offset++]=i>>>8&255,this.buffer[this.offset++]=i>>>0&255,this}addInt16(i){return this.ensure(2),this.buffer[this.offset++]=i>>>8&255,this.buffer[this.offset++]=i>>>0&255,this}addCString(i){if(!i)this.ensure(1);else{let s=Z.byteLength(i);this.ensure(s+1),this.buffer.write(i,this.offset,"utf-8"),this.offset+=s}return this.buffer[this.offset++]=0,this}addString(i=""){let s=Z.byteLength(i);return this.ensure(s),this.buffer.write(i,this.offset),this.offset+=s,this}add(i){return this.ensure(i.length),i.copy(this.buffer,this.offset),this.offset+=i.length,this}join(i){if(i){this.buffer[this.headerPosition]=i;let s=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(s,this.headerPosition+1)}return this.buffer.slice(i?0:5,this.offset)}flush(i){let s=this.join(i);return this.offset=5,this.headerPosition=0,this.buffer=Z.allocUnsafe(this.size),s}};y(e,"Writer");var t=e;r.Writer=t}),md=se(r=>{"use strict";J(),Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=void 0;var e=dd(),t=new e.Writer,n=y(q=>{t.addInt16(3).addInt16(0);for(let te of Object.keys(q))t.addCString(te).addCString(q[te]);t.addCString("client_encoding").addCString("UTF8");let F=t.addCString("").flush(),Y=F.length+4;return new e.Writer().addInt32(Y).add(F).flush()},"startup"),i=y(()=>{let q=Z.allocUnsafe(8);return q.writeInt32BE(8,0),q.writeInt32BE(80877103,4),q},"requestSsl"),s=y(q=>t.addCString(q).flush(112),"password"),o=y(function(q,F){return t.addCString(q).addInt32(Z.byteLength(F)).addString(F),t.flush(112)},"sendSASLInitialResponseMessage"),a=y(function(q){return t.addString(q).flush(112)},"sendSCRAMClientFinalMessage"),h=y(q=>t.addCString(q).flush(81),"query"),d=[],f=y(q=>{let F=q.name||"";F.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",F,F.length),console.error("This can cause conflicts and silent errors executing queries"));let Y=q.types||d,te=Y.length,ae=t.addCString(F).addCString(q.text).addInt16(te);for(let ne=0;ne<te;ne++)ae.addInt32(Y[ne]);return t.flush(80)},"parse"),p=new e.Writer,b=y(function(q,F){for(let Y=0;Y<q.length;Y++){let te=F?F(q[Y],Y):q[Y];te==null?(t.addInt16(0),p.addInt32(-1)):te instanceof Z?(t.addInt16(1),p.addInt32(te.length),p.add(te)):(t.addInt16(0),p.addInt32(Z.byteLength(te)),p.addString(te))}},"writeValues"),w=y((q={})=>{let F=q.portal||"",Y=q.statement||"",te=q.binary||!1,ae=q.values||d,ne=ae.length;return t.addCString(F).addCString(Y),t.addInt16(ne),b(ae,q.valueMapper),t.addInt16(ne),t.add(p.flush()),t.addInt16(te?1:0),t.flush(66)},"bind"),g=Z.from([69,0,0,0,9,0,0,0,0,0]),c=y(q=>{if(!q||!q.portal&&!q.rows)return g;let F=q.portal||"",Y=q.rows||0,te=Z.byteLength(F),ae=4+te+1+4,ne=Z.allocUnsafe(1+ae);return ne[0]=69,ne.writeInt32BE(ae,1),ne.write(F,5,"utf-8"),ne[te+5]=0,ne.writeUInt32BE(Y,ne.length-4),ne},"execute"),S=y((q,F)=>{let Y=Z.allocUnsafe(16);return Y.writeInt32BE(16,0),Y.writeInt16BE(1234,4),Y.writeInt16BE(5678,6),Y.writeInt32BE(q,8),Y.writeInt32BE(F,12),Y},"cancel"),v=y((q,F)=>{let Y=4+Z.byteLength(F)+1,te=Z.allocUnsafe(1+Y);return te[0]=q,te.writeInt32BE(Y,1),te.write(F,5,"utf-8"),te[Y]=0,te},"cstringMessage"),T=t.addCString("P").flush(68),A=t.addCString("S").flush(68),_=y(q=>q.name?v(68,`${q.type}${q.name||""}`):q.type==="P"?T:A,"describe"),$=y(q=>{let F=`${q.type}${q.name||""}`;return v(67,F)},"close"),C=y(q=>t.add(q).flush(100),"copyData"),L=y(q=>v(102,q),"copyFail"),N=y(q=>Z.from([q,0,0,0,4]),"codeOnlyBuffer"),x=N(72),D=N(83),O=N(88),W=N(99),G={startup:n,password:s,requestSsl:i,sendSASLInitialResponseMessage:o,sendSCRAMClientFinalMessage:a,query:h,parse:f,bind:w,execute:c,describe:_,close:$,flush:y(()=>x,"flush"),sync:y(()=>D,"sync"),end:y(()=>O,"end"),copyData:C,copyDone:y(()=>W,"copyDone"),copyFail:L,cancel:S};r.serialize=G}),gd=se(r=>{"use strict";J(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferReader=void 0;var e=Z.allocUnsafe(0),t=class{constructor(s=0){this.offset=s,this.buffer=e,this.encoding="utf-8"}setBuffer(s,o){this.offset=s,this.buffer=o}int16(){let s=this.buffer.readInt16BE(this.offset);return this.offset+=2,s}byte(){let s=this.buffer[this.offset];return this.offset++,s}int32(){let s=this.buffer.readInt32BE(this.offset);return this.offset+=4,s}uint32(){let s=this.buffer.readUInt32BE(this.offset);return this.offset+=4,s}string(s){let o=this.buffer.toString(this.encoding,this.offset,this.offset+s);return this.offset+=s,o}cstring(){let s=this.offset,o=s;for(;this.buffer[o++]!==0;);return this.offset=o,this.buffer.toString(this.encoding,s,o-1)}bytes(s){let o=this.buffer.slice(this.offset,this.offset+s);return this.offset+=s,o}};y(t,"BufferReader");var n=t;r.BufferReader=n}),yd=se(r=>{"use strict";J(),Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;var e=hc(),t=gd(),n=1,i=4,s=n+i,o=Z.allocUnsafe(0),a=class{constructor(f){if(this.buffer=o,this.bufferLength=0,this.bufferOffset=0,this.reader=new t.BufferReader,f?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=f?.mode||"text"}parse(f,p){this.mergeBuffer(f);let b=this.bufferOffset+this.bufferLength,w=this.bufferOffset;for(;w+s<=b;){let g=this.buffer[w],c=this.buffer.readUInt32BE(w+n),S=n+c;if(S+w<=b){let v=this.handlePacket(w+s,g,c,this.buffer);p(v),w+=S}else break}w===b?(this.buffer=o,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=b-w,this.bufferOffset=w)}mergeBuffer(f){if(this.bufferLength>0){let p=this.bufferLength+f.byteLength;if(p+this.bufferOffset>this.buffer.byteLength){let b;if(p<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)b=this.buffer;else{let w=this.buffer.byteLength*2;for(;p>=w;)w*=2;b=Z.allocUnsafe(w)}this.buffer.copy(b,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=b,this.bufferOffset=0}f.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=p}else this.buffer=f,this.bufferOffset=0,this.bufferLength=f.byteLength}handlePacket(f,p,b,w){switch(p){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(f,b,w);case 67:return this.parseCommandCompleteMessage(f,b,w);case 90:return this.parseReadyForQueryMessage(f,b,w);case 65:return this.parseNotificationMessage(f,b,w);case 82:return this.parseAuthenticationResponse(f,b,w);case 83:return this.parseParameterStatusMessage(f,b,w);case 75:return this.parseBackendKeyData(f,b,w);case 69:return this.parseErrorMessage(f,b,w,"error");case 78:return this.parseErrorMessage(f,b,w,"notice");case 84:return this.parseRowDescriptionMessage(f,b,w);case 116:return this.parseParameterDescriptionMessage(f,b,w);case 71:return this.parseCopyInMessage(f,b,w);case 72:return this.parseCopyOutMessage(f,b,w);case 100:return this.parseCopyData(f,b,w);default:return new e.DatabaseError("received invalid response: "+p.toString(16),b,"error")}}parseReadyForQueryMessage(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.string(1);return new e.ReadyForQueryMessage(p,w)}parseCommandCompleteMessage(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.cstring();return new e.CommandCompleteMessage(p,w)}parseCopyData(f,p,b){let w=b.slice(f,f+(p-4));return new e.CopyDataMessage(p,w)}parseCopyInMessage(f,p,b){return this.parseCopyMessage(f,p,b,"copyInResponse")}parseCopyOutMessage(f,p,b){return this.parseCopyMessage(f,p,b,"copyOutResponse")}parseCopyMessage(f,p,b,w){this.reader.setBuffer(f,b);let g=this.reader.byte()!==0,c=this.reader.int16(),S=new e.CopyResponse(p,w,g,c);for(let v=0;v<c;v++)S.columnTypes[v]=this.reader.int16();return S}parseNotificationMessage(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.int32(),g=this.reader.cstring(),c=this.reader.cstring();return new e.NotificationResponseMessage(p,w,g,c)}parseRowDescriptionMessage(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.int16(),g=new e.RowDescriptionMessage(p,w);for(let c=0;c<w;c++)g.fields[c]=this.parseField();return g}parseField(){let f=this.reader.cstring(),p=this.reader.uint32(),b=this.reader.int16(),w=this.reader.uint32(),g=this.reader.int16(),c=this.reader.int32(),S=this.reader.int16()===0?"text":"binary";return new e.Field(f,p,b,w,g,c,S)}parseParameterDescriptionMessage(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.int16(),g=new e.ParameterDescriptionMessage(p,w);for(let c=0;c<w;c++)g.dataTypeIDs[c]=this.reader.int32();return g}parseDataRowMessage(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.int16(),g=new Array(w);for(let c=0;c<w;c++){let S=this.reader.int32();g[c]=S===-1?null:this.reader.string(S)}return new e.DataRowMessage(p,g)}parseParameterStatusMessage(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.cstring(),g=this.reader.cstring();return new e.ParameterStatusMessage(p,w,g)}parseBackendKeyData(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.int32(),g=this.reader.int32();return new e.BackendKeyDataMessage(p,w,g)}parseAuthenticationResponse(f,p,b){this.reader.setBuffer(f,b);let w=this.reader.int32(),g={name:"authenticationOk",length:p};switch(w){case 0:break;case 3:g.length===8&&(g.name="authenticationCleartextPassword");break;case 5:if(g.length===12){g.name="authenticationMD5Password";let c=this.reader.bytes(4);return new e.AuthenticationMD5Password(p,c)}break;case 10:{g.name="authenticationSASL",g.mechanisms=[];let c;do c=this.reader.cstring(),c&&g.mechanisms.push(c);while(c)}break;case 11:g.name="authenticationSASLContinue",g.data=this.reader.string(p-8);break;case 12:g.name="authenticationSASLFinal",g.data=this.reader.string(p-8);break;default:throw new Error("Unknown authenticationOk message type "+w)}return g}parseErrorMessage(f,p,b,w){this.reader.setBuffer(f,b);let g={},c=this.reader.string(1);for(;c!=="\0";)g[c]=this.reader.cstring(),c=this.reader.string(1);let S=g.M,v=w==="notice"?new e.NoticeMessage(p,S):new e.DatabaseError(S,p,w);return v.severity=g.S,v.code=g.C,v.detail=g.D,v.hint=g.H,v.position=g.P,v.internalPosition=g.p,v.internalQuery=g.q,v.where=g.W,v.schema=g.s,v.table=g.t,v.column=g.c,v.dataType=g.d,v.constraint=g.n,v.file=g.F,v.line=g.L,v.routine=g.R,v}};y(a,"Parser");var h=a;r.Parser=h}),pc=se(r=>{"use strict";J(),Object.defineProperty(r,"__esModule",{value:!0}),r.DatabaseError=r.serialize=r.parse=void 0;var e=hc();Object.defineProperty(r,"DatabaseError",{enumerable:!0,get:y(function(){return e.DatabaseError},"get")});var t=md();Object.defineProperty(r,"serialize",{enumerable:!0,get:y(function(){return t.serialize},"get")});var n=yd();function i(s,o){let a=new n.Parser;return s.on("data",h=>a.parse(h,o)),new Promise(h=>s.on("end",()=>h()))}y(i,"parse"),r.parse=i}),dc={};Ke(dc,{connect:()=>mc});function mc({socket:r,servername:e}){return r.startTls(e),r}var bd=Oe(()=>{"use strict";J(),y(mc,"connect")}),gc=se((r,e)=>{"use strict";J();var t=(pr(),Ae(Vu)),n=mt().EventEmitter,{parse:i,serialize:s}=pc(),o=s.flush(),a=s.sync(),h=s.end(),d=class extends n{constructor(b){super(),b=b||{},this.stream=b.stream||new t.Socket,this._keepAlive=b.keepAlive,this._keepAliveInitialDelayMillis=b.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=b.ssl||!1,this._ending=!1,this._emitMessage=!1;var w=this;this.on("newListener",function(g){g==="message"&&(w._emitMessage=!0)})}connect(b,w){var g=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(b,w),this.stream.once("connect",function(){g._keepAlive&&g.stream.setKeepAlive(!0,g._keepAliveInitialDelayMillis),g.emit("connect")});let c=y(function(S){g._ending&&(S.code==="ECONNRESET"||S.code==="EPIPE")||g.emit("error",S)},"reportStreamError");if(this.stream.on("error",c),this.stream.on("close",function(){g.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(S){var v=S.toString("utf8");switch(v){case"S":break;case"N":return g.stream.end(),g.emit("error",new Error("The server does not support SSL connections"));default:return g.stream.end(),g.emit("error",new Error("There was an error establishing an SSL connection"))}var T=(bd(),Ae(dc));let A={socket:g.stream};g.ssl!==!0&&(Object.assign(A,g.ssl),"key"in g.ssl&&(A.key=g.ssl.key)),t.isIP(w)===0&&(A.servername=w);try{g.stream=T.connect(A)}catch(_){return g.emit("error",_)}g.attachListeners(g.stream),g.stream.on("error",c),g.emit("sslconnect")})}attachListeners(b){b.on("end",()=>{this.emit("end")}),i(b,w=>{var g=w.name==="error"?"errorMessage":w.name;this._emitMessage&&this.emit("message",w),this.emit(g,w)})}requestSsl(){this.stream.write(s.requestSsl())}startup(b){this.stream.write(s.startup(b))}cancel(b,w){this._send(s.cancel(b,w))}password(b){this._send(s.password(b))}sendSASLInitialResponseMessage(b,w){this._send(s.sendSASLInitialResponseMessage(b,w))}sendSCRAMClientFinalMessage(b){this._send(s.sendSCRAMClientFinalMessage(b))}_send(b){return this.stream.writable?this.stream.write(b):!1}query(b){this._send(s.query(b))}parse(b){this._send(s.parse(b))}bind(b){this._send(s.bind(b))}execute(b){this._send(s.execute(b))}flush(){this.stream.writable&&this.stream.write(o)}sync(){this._ending=!0,this._send(o),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(h,()=>{this.stream.end()})}close(b){this._send(s.close(b))}describe(b){this._send(s.describe(b))}sendCopyFromChunk(b){this._send(s.copyData(b))}endCopyFrom(){this._send(s.copyDone())}sendCopyFail(b){this._send(s.copyFail(b))}};y(d,"Connection");var f=d;e.exports=f}),wd=se((r,e)=>{"use strict";J();var t=mt().EventEmitter,n=(sn(),Ae(dr)),i=nn(),s=sd(),o=cd(),a=so(),h=lo(),d=pd(),f=rn(),p=gc(),b=class extends t{constructor(c){super(),this.connectionParameters=new h(c),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var S=c||{};this._Promise=S.Promise||en.Promise,this._types=new a(S.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=S.connection||new p({stream:S.stream,ssl:this.connectionParameters.ssl,keepAlive:S.keepAlive||!1,keepAliveInitialDelayMillis:S.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=S.binary||f.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=S.connectionTimeoutMillis||0}_errorAllQueries(c){let S=y(v=>{ie.nextTick(()=>{v.handleError(c,this.connection)})},"enqueueError");this.activeQuery&&(S(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(S),this.queryQueue.length=0}_connect(c){var S=this,v=this.connection;if(this._connectionCallback=c,this._connecting||this._connected){let T=new Error("Client has already been connected. You cannot reuse a client.");ie.nextTick(()=>{c(T)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{v._ending=!0,v.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?v.connect(this.host+"/.s.PGSQL."+this.port):v.connect(this.port,this.host),v.on("connect",function(){S.ssl?v.requestSsl():v.startup(S.getStartupConf())}),v.on("sslconnect",function(){v.startup(S.getStartupConf())}),this._attachListeners(v),v.once("end",()=>{let T=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(T),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(T):this._handleErrorEvent(T):this._connectionError||this._handleErrorEvent(T)),ie.nextTick(()=>{this.emit("end")})})}connect(c){if(c){this._connect(c);return}return new this._Promise((S,v)=>{this._connect(T=>{T?v(T):S()})})}_attachListeners(c){c.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),c.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),c.on("authenticationSASL",this._handleAuthSASL.bind(this)),c.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),c.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),c.on("backendKeyData",this._handleBackendKeyData.bind(this)),c.on("error",this._handleErrorEvent.bind(this)),c.on("errorMessage",this._handleErrorMessage.bind(this)),c.on("readyForQuery",this._handleReadyForQuery.bind(this)),c.on("notice",this._handleNotice.bind(this)),c.on("rowDescription",this._handleRowDescription.bind(this)),c.on("dataRow",this._handleDataRow.bind(this)),c.on("portalSuspended",this._handlePortalSuspended.bind(this)),c.on("emptyQuery",this._handleEmptyQuery.bind(this)),c.on("commandComplete",this._handleCommandComplete.bind(this)),c.on("parseComplete",this._handleParseComplete.bind(this)),c.on("copyInResponse",this._handleCopyInResponse.bind(this)),c.on("copyData",this._handleCopyData.bind(this)),c.on("notification",this._handleNotification.bind(this))}_checkPgPass(c){let S=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(v=>{if(v!==void 0){if(typeof v!="string"){S.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=v}else this.connectionParameters.password=this.password=null;c()}).catch(v=>{S.emit("error",v)}):this.password!==null?c():o(this.connectionParameters,v=>{v!==void 0&&(this.connectionParameters.password=this.password=v),c()})}_handleAuthCleartextPassword(c){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(c){this._checkPgPass(()=>{let S=i.postgresMd5PasswordHash(this.user,this.password,c.salt);this.connection.password(S)})}_handleAuthSASL(c){this._checkPgPass(()=>{this.saslSession=s.startSession(c.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(c){s.continueSession(this.saslSession,this.password,c.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(c){s.finalizeSession(this.saslSession,c.data),this.saslSession=null}_handleBackendKeyData(c){this.processID=c.processID,this.secretKey=c.secretKey}_handleReadyForQuery(c){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:S}=this;this.activeQuery=null,this.readyForQuery=!0,S&&S.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(c){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(c);this.emit("error",c)}}_handleErrorEvent(c){if(this._connecting)return this._handleErrorWhileConnecting(c);this._queryable=!1,this._errorAllQueries(c),this.emit("error",c)}_handleErrorMessage(c){if(this._connecting)return this._handleErrorWhileConnecting(c);let S=this.activeQuery;if(!S){this._handleErrorEvent(c);return}this.activeQuery=null,S.handleError(c,this.connection)}_handleRowDescription(c){this.activeQuery.handleRowDescription(c)}_handleDataRow(c){this.activeQuery.handleDataRow(c)}_handlePortalSuspended(c){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(c){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(c){this.activeQuery.handleCommandComplete(c,this.connection)}_handleParseComplete(c){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(c){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(c){this.activeQuery.handleCopyData(c,this.connection)}_handleNotification(c){this.emit("notification",c)}_handleNotice(c){this.emit("notice",c)}getStartupConf(){var c=this.connectionParameters,S={user:c.user,database:c.database},v=c.application_name||c.fallback_application_name;return v&&(S.application_name=v),c.replication&&(S.replication=""+c.replication),c.statement_timeout&&(S.statement_timeout=String(parseInt(c.statement_timeout,10))),c.lock_timeout&&(S.lock_timeout=String(parseInt(c.lock_timeout,10))),c.idle_in_transaction_session_timeout&&(S.idle_in_transaction_session_timeout=String(parseInt(c.idle_in_transaction_session_timeout,10))),c.options&&(S.options=c.options),S}cancel(c,S){if(c.activeQuery===S){var v=this.connection;this.host&&this.host.indexOf("/")===0?v.connect(this.host+"/.s.PGSQL."+this.port):v.connect(this.port,this.host),v.on("connect",function(){v.cancel(c.processID,c.secretKey)})}else c.queryQueue.indexOf(S)!==-1&&c.queryQueue.splice(c.queryQueue.indexOf(S),1)}setTypeParser(c,S,v){return this._types.setTypeParser(c,S,v)}getTypeParser(c,S){return this._types.getTypeParser(c,S)}escapeIdentifier(c){return'"'+c.replace(/"/g,'""')+'"'}escapeLiteral(c){for(var S=!1,v="'",T=0;T<c.length;T++){var A=c[T];A==="'"?v+=A+A:A==="\\"?(v+=A+A,S=!0):v+=A}return v+="'",S===!0&&(v=" E"+v),v}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let c=this.activeQuery.submit(this.connection);c&&ie.nextTick(()=>{this.activeQuery.handleError(c,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(c,S,v){var T,A,_,$,C;if(c==null)throw new TypeError("Client was passed a null or undefined query");return typeof c.submit=="function"?(_=c.query_timeout||this.connectionParameters.query_timeout,A=T=c,typeof S=="function"&&(T.callback=T.callback||S)):(_=this.connectionParameters.query_timeout,T=new d(c,S,v),T.callback||(A=new this._Promise((L,N)=>{T.callback=(x,D)=>x?N(x):L(D)}))),_&&(C=T.callback,$=setTimeout(()=>{var L=new Error("Query read timeout");ie.nextTick(()=>{T.handleError(L,this.connection)}),C(L),T.callback=()=>{};var N=this.queryQueue.indexOf(T);N>-1&&this.queryQueue.splice(N,1),this._pulseQueryQueue()},_),T.callback=(L,N)=>{clearTimeout($),C(L,N)}),this.binary&&!T.binary&&(T.binary=!0),T._result&&!T._result._types&&(T._result._types=this._types),this._queryable?this._ending?(ie.nextTick(()=>{T.handleError(new Error("Client was closed and is not queryable"),this.connection)}),A):(this.queryQueue.push(T),this._pulseQueryQueue(),A):(ie.nextTick(()=>{T.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),A)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(c){if(this._ending=!0,!this.connection._connecting)if(c)c();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),c)this.connection.once("end",c);else return new this._Promise(S=>{this.connection.once("end",S)})}};y(b,"Client");var w=b;w.Query=d,e.exports=w}),Sd=se((r,e)=>{"use strict";J();var t=mt().EventEmitter,n=y(function(){},"NOOP"),i=y((g,c)=>{let S=g.findIndex(c);return S===-1?void 0:g.splice(S,1)[0]},"removeWhere"),s=class{constructor(c,S,v){this.client=c,this.idleListener=S,this.timeoutId=v}};y(s,"IdleItem");var o=s,a=class{constructor(c){this.callback=c}};y(a,"PendingItem");var h=a;function d(){throw new Error("Release called on client which has already been released to the pool.")}y(d,"throwOnDoubleRelease");function f(g,c){if(c)return{callback:c,result:void 0};let S,v,T=y(function(_,$){_?S(_):v($)},"cb"),A=new g(function(_,$){v=_,S=$}).catch(_=>{throw Error.captureStackTrace(_),_});return{callback:T,result:A}}y(f,"promisify");function p(g,c){return y(function S(v){v.client=c,c.removeListener("error",S),c.on("error",()=>{g.log("additional client error after disconnection due to error",v)}),g._remove(c),g.emit("error",v,c)},"idleListener")}y(p,"makeIdleListener");var b=class extends t{constructor(c,S){super(),this.options=Object.assign({},c),c!=null&&"password"in c&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:c.password}),c!=null&&c.ssl&&c.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||S||on().Client,this.Promise=this.options.Promise||en.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(S=>{this._remove(S.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let c=this._pendingQueue.shift();if(this._idle.length){let S=this._idle.pop();clearTimeout(S.timeoutId);let v=S.client;v.ref&&v.ref();let T=S.idleListener;return this._acquireClient(v,c,T,!1)}if(!this._isFull())return this.newClient(c);throw new Error("unexpected condition")}_remove(c){let S=i(this._idle,v=>v.client===c);S!==void 0&&clearTimeout(S.timeoutId),this._clients=this._clients.filter(v=>v!==c),c.end(),this.emit("remove",c)}connect(c){if(this.ending){let T=new Error("Cannot use a pool after calling end on the pool");return c?c(T):this.Promise.reject(T)}let S=f(this.Promise,c),v=S.result;if(this._isFull()||this._idle.length){if(this._idle.length&&ie.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new h(S.callback)),v;let T=y(($,C,L)=>{clearTimeout(_),S.callback($,C,L)},"queueCallback"),A=new h(T),_=setTimeout(()=>{i(this._pendingQueue,$=>$.callback===T),A.timedOut=!0,S.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return _.unref&&_.unref(),this._pendingQueue.push(A),v}return this.newClient(new h(S.callback)),v}newClient(c){let S=new this.Client(this.options);this._clients.push(S);let v=p(this,S);this.log("checking client timeout");let T,A=!1;this.options.connectionTimeoutMillis&&(T=setTimeout(()=>{this.log("ending client due to timeout"),A=!0,S.connection?S.connection.stream.destroy():S.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),S.connect(_=>{if(T&&clearTimeout(T),S.on("error",v),_)this.log("client failed to connect",_),this._clients=this._clients.filter($=>$!==S),A&&(_=new Error("Connection terminated due to connection timeout",{cause:_})),this._pulseQueue(),c.timedOut||c.callback(_,void 0,n);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let $=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(S),this._idle.findIndex(C=>C.client===S)!==-1&&this._acquireClient(S,new h((C,L,N)=>N()),v,!1)},this.options.maxLifetimeSeconds*1e3);$.unref(),S.once("end",()=>clearTimeout($))}return this._acquireClient(S,c,v,!0)}})}_acquireClient(c,S,v,T){T&&this.emit("connect",c),this.emit("acquire",c),c.release=this._releaseOnce(c,v),c.removeListener("error",v),S.timedOut?T&&this.options.verify?this.options.verify(c,c.release):c.release():T&&this.options.verify?this.options.verify(c,A=>{if(A)return c.release(A),S.callback(A,void 0,n);S.callback(void 0,c,c.release)}):S.callback(void 0,c,c.release)}_releaseOnce(c,S){let v=!1;return T=>{v&&d(),v=!0,this._release(c,S,T)}}_release(c,S,v){if(c.on("error",S),c._poolUseCount=(c._poolUseCount||0)+1,this.emit("release",v,c),v||this.ending||!c._queryable||c._ending||c._poolUseCount>=this.options.maxUses){c._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(c),this._pulseQueue();return}if(this._expired.has(c)){this.log("remove expired client"),this._expired.delete(c),this._remove(c),this._pulseQueue();return}let T;this.options.idleTimeoutMillis&&this._isAboveMin()&&(T=setTimeout(()=>{this.log("remove idle client"),this._remove(c)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&T.unref()),this.options.allowExitOnIdle&&c.unref(),this._idle.push(new o(c,S,T)),this._pulseQueue()}query(c,S,v){if(typeof c=="function"){let A=f(this.Promise,c);return no(function(){return A.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),A.result}typeof S=="function"&&(v=S,S=void 0);let T=f(this.Promise,v);return v=T.callback,this.connect((A,_)=>{if(A)return v(A);let $=!1,C=y(L=>{$||($=!0,_.release(L),v(L))},"onError");_.once("error",C),this.log("dispatching query");try{_.query(c,S,(L,N)=>{if(this.log("query dispatched"),_.removeListener("error",C),!$)return $=!0,_.release(L),L?v(L):v(void 0,N)})}catch(L){return _.release(L),v(L)}}),T.result}end(c){if(this.log("ending"),this.ending){let v=new Error("Called end on pool more than once");return c?c(v):this.Promise.reject(v)}this.ending=!0;let S=f(this.Promise,c);return this._endCallback=S.callback,this._pulseQueue(),S.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((c,S)=>c+(this._expired.has(S)?1:0),0)}get totalCount(){return this._clients.length}};y(b,"Pool");var w=b;e.exports=w}),yc={};Ke(yc,{default:()=>bc});var bc,vd=Oe(()=>{"use strict";J(),bc={}}),Ed=se((r,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),Td=se((r,e)=>{"use strict";J();var t=mt().EventEmitter,n=(sn(),Ae(dr)),i=nn(),s=e.exports=function(a,h,d){t.call(this),a=i.normalizeQueryConfig(a,h,d),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode=a.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(f){f==="row"&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(s,t);var o={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};s.prototype.handleError=function(a){var h=this.native.pq.resultErrorFields();if(h)for(var d in h){var f=o[d]||d;a[f]=h[d]}this.callback?this.callback(a):this.emit("error",a),this.state="error"},s.prototype.then=function(a,h){return this._getPromise().then(a,h)},s.prototype.catch=function(a){return this._getPromise().catch(a)},s.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(a,h){this._once("end",a),this._once("error",h)}.bind(this)),this._promise)},s.prototype.submit=function(a){this.state="running";var h=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var d=y(function(b,w,g){if(a.native.arrayMode=!1,no(function(){h.emit("_done")}),b)return h.handleError(b);h._emitRowEvents&&(g.length>1?w.forEach((c,S)=>{c.forEach(v=>{h.emit("row",v,g[S])})}):w.forEach(function(c){h.emit("row",c,g)})),h.state="end",h.emit("end",g),h.callback&&h.callback(null,g)},"after");if(ie.domain&&(d=ie.domain.bind(d)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var f=(this.values||[]).map(i.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let b=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return d(b)}return a.native.execute(this.name,f,d)}return a.native.prepare(this.name,this.text,f.length,function(b){return b?d(b):(a.namedQueries[h.name]=h.text,h.native.execute(h.name,f,d))})}else if(this.values){if(!Array.isArray(this.values)){let b=new Error("Query values must be an array");return d(b)}var p=this.values.map(i.prepareValue);a.native.query(this.text,p,d)}else a.native.query(this.text,d)}}),Ad=se((r,e)=>{"use strict";J();var t=(vd(),Ae(yc)),n=so(),i=Ed(),s=mt().EventEmitter,o=(sn(),Ae(dr)),a=lo(),h=Td(),d=e.exports=function(f){s.call(this),f=f||{},this._Promise=f.Promise||en.Promise,this._types=new n(f.types),this.native=new t({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var p=this.connectionParameters=new a(f);this.user=p.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:p.password}),this.database=p.database,this.host=p.host,this.port=p.port,this.namedQueries={}};d.Query=h,o.inherits(d,s),d.prototype._errorAllQueries=function(f){let p=y(b=>{ie.nextTick(()=>{b.native=this.native,b.handleError(f)})},"enqueueError");this._hasActiveQuery()&&(p(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(p),this._queryQueue.length=0},d.prototype._connect=function(f){var p=this;if(this._connecting){ie.nextTick(()=>f(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(b,w){if(b)return f(b);p.native.connect(w,function(g){if(g)return p.native.end(),f(g);p._connected=!0,p.native.on("error",function(c){p._queryable=!1,p._errorAllQueries(c),p.emit("error",c)}),p.native.on("notification",function(c){p.emit("notification",{channel:c.relname,payload:c.extra})}),p.emit("connect"),p._pulseQueryQueue(!0),f()})})},d.prototype.connect=function(f){if(f){this._connect(f);return}return new this._Promise((p,b)=>{this._connect(w=>{w?b(w):p()})})},d.prototype.query=function(f,p,b){var w,g,c,S,v;if(f==null)throw new TypeError("Client was passed a null or undefined query");if(typeof f.submit=="function")c=f.query_timeout||this.connectionParameters.query_timeout,g=w=f,typeof p=="function"&&(f.callback=p);else if(c=this.connectionParameters.query_timeout,w=new h(f,p,b),!w.callback){let T,A;g=new this._Promise((_,$)=>{T=_,A=$}),w.callback=(_,$)=>_?A(_):T($)}return c&&(v=w.callback,S=setTimeout(()=>{var T=new Error("Query read timeout");ie.nextTick(()=>{w.handleError(T,this.connection)}),v(T),w.callback=()=>{};var A=this._queryQueue.indexOf(w);A>-1&&this._queryQueue.splice(A,1),this._pulseQueryQueue()},c),w.callback=(T,A)=>{clearTimeout(S),v(T,A)}),this._queryable?this._ending?(w.native=this.native,ie.nextTick(()=>{w.handleError(new Error("Client was closed and is not queryable"))}),g):(this._queryQueue.push(w),this._pulseQueryQueue(),g):(w.native=this.native,ie.nextTick(()=>{w.handleError(new Error("Client has encountered a connection error and is not queryable"))}),g)},d.prototype.end=function(f){var p=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,f));var b;return f||(b=new this._Promise(function(w,g){f=y(c=>c?g(c):w(),"cb")})),this.native.end(function(){p._errorAllQueries(new Error("Connection terminated")),ie.nextTick(()=>{p.emit("end"),f&&f()})}),b},d.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},d.prototype._pulseQueryQueue=function(f){if(this._connected&&!this._hasActiveQuery()){var p=this._queryQueue.shift();if(!p){f||this.emit("drain");return}this._activeQuery=p,p.submit(this);var b=this;p.once("_done",function(){b._pulseQueryQueue()})}},d.prototype.cancel=function(f){this._activeQuery===f?this.native.cancel(function(){}):this._queryQueue.indexOf(f)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(f),1)},d.prototype.ref=function(){},d.prototype.unref=function(){},d.prototype.setTypeParser=function(f,p,b){return this._types.setTypeParser(f,p,b)},d.prototype.getTypeParser=function(f,p){return this._types.getTypeParser(f,p)}}),Mu=se((r,e)=>{"use strict";J(),e.exports=Ad()}),on=se((r,e)=>{"use strict";J();var t=wd(),n=rn(),i=gc(),s=Sd(),{DatabaseError:o}=pc(),a=y(d=>{var f;return f=class extends s{constructor(p){super(p,d)}},y(f,"BoundPool"),f},"poolFactory"),h=y(function(d){this.defaults=n,this.Client=d,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=i,this.types=tn(),this.DatabaseError=o},"PG");typeof ie.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new h(Mu()):(e.exports=new h(t),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var d=null;try{d=new h(Mu())}catch(f){if(f.code!=="MODULE_NOT_FOUND")throw f}return Object.defineProperty(e.exports,"native",{value:d}),d}}))});J();J();pr();Wu();J();var Cd=Object.defineProperty,xd=Object.defineProperties,Pd=Object.getOwnPropertyDescriptors,ju=Object.getOwnPropertySymbols,Id=Object.prototype.hasOwnProperty,Nd=Object.prototype.propertyIsEnumerable,ku=y((r,e,t)=>e in r?Cd(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,"__defNormalProp"),Ld=y((r,e)=>{for(var t in e||(e={}))Id.call(e,t)&&ku(r,t,e[t]);if(ju)for(var t of ju(e))Nd.call(e,t)&&ku(r,t,e[t]);return r},"__spreadValues"),Rd=y((r,e)=>xd(r,Pd(e)),"__spreadProps"),_d=1008e3,Fu=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,$d=new TextDecoder,fo=new TextEncoder,Jr=fo.encode("0123456789abcdef"),Xr=fo.encode("0123456789ABCDEF"),Od=fo.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),wc=Od.slice();wc[62]=45;wc[63]=95;var lr,Yr;function Sc(r,{alphabet:e,scratchArr:t}={}){if(!lr)if(lr=new Uint16Array(256),Yr=new Uint16Array(256),Fu)for(let w=0;w<256;w++)lr[w]=Jr[w&15]<<8|Jr[w>>>4],Yr[w]=Xr[w&15]<<8|Xr[w>>>4];else for(let w=0;w<256;w++)lr[w]=Jr[w&15]|Jr[w>>>4]<<8,Yr[w]=Xr[w&15]|Xr[w>>>4]<<8;r.byteOffset%4!==0&&(r=new Uint8Array(r));let n=r.length,i=n>>>1,s=n>>>2,o=t||new Uint16Array(n),a=new Uint32Array(r.buffer,r.byteOffset,s),h=new Uint32Array(o.buffer,o.byteOffset,i),d=e==="upper"?Yr:lr,f=0,p=0,b;if(Fu)for(;f<s;)b=a[f++],h[p++]=d[b>>>8&255]<<16|d[b&255],h[p++]=d[b>>>24]<<16|d[b>>>16&255];else for(;f<s;)b=a[f++],h[p++]=d[b>>>24]<<16|d[b>>>16&255],h[p++]=d[b>>>8&255]<<16|d[b&255];for(f<<=2;f<n;)o[f]=d[r[f++]];return $d.decode(o.subarray(0,n))}y(Sc,"_toHex");function vc(r,e={}){let t="",n=r.length,i=_d>>>1,s=Math.ceil(n/i),o=new Uint16Array(s>1?i:n);for(let a=0;a<s;a++){let h=a*i,d=h+i;t+=Sc(r.subarray(h,d),Rd(Ld({},e),{scratchArr:o}))}return t}y(vc,"_toHexChunked");function Ec(r,e={}){return e.alphabet!=="upper"&&typeof r.toHex=="function"?r.toHex():vc(r,e)}y(Ec,"toHex");J();var Tc=class Ac{constructor(e,t){this.strings=e,this.values=t}toParameterizedQuery(e={query:"",params:[]}){let{strings:t,values:n}=this;for(let i=0,s=t.length;i<s;i++)if(e.query+=t[i],i<n.length){let o=n[i];if(o instanceof Pc)e.query+=o.sql;else if(o instanceof Zr)if(o.queryData instanceof Ac)o.queryData.toParameterizedQuery(e);else{if(o.queryData.params?.length)throw new Error("This query is not composable");e.query+=o.queryData.query}else{let{params:a}=e;a.push(o),e.query+="$"+a.length,(o instanceof Z||ArrayBuffer.isView(o))&&(e.query+="::bytea")}}return e}};y(Tc,"SqlTemplate");var Cc=Tc,xc=class{constructor(e){this.sql=e}};y(xc,"UnsafeRawSql");var Pc=xc;J();function ho(){typeof window<"u"&&typeof document<"u"&&typeof console<"u"&&typeof console.warn=="function"&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}y(ho,"warnIfBrowser");pr();var qd=dt(so()),Bd=dt(nn()),Ic=class Nc extends Error{constructor(e){super(e),ee(this,"name","NeonDbError"),ee(this,"severity"),ee(this,"code"),ee(this,"detail"),ee(this,"hint"),ee(this,"position"),ee(this,"internalPosition"),ee(this,"internalQuery"),ee(this,"where"),ee(this,"schema"),ee(this,"table"),ee(this,"column"),ee(this,"dataType"),ee(this,"constraint"),ee(this,"file"),ee(this,"line"),ee(this,"routine"),ee(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Nc)}};y(Ic,"NeonDbError");var At=Ic,Qu="transaction() expects an array of queries, or a function returning an array of queries",Dd=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function Lc(r){return r instanceof Z?"\\x"+Ec(r):r}y(Lc,"encodeBuffersAsBytea");function to(r){let{query:e,params:t}=r instanceof Cc?r.toParameterizedQuery():r;return{query:e,params:t.map(n=>Lc((0,Bd.prepareValue)(n)))}}y(to,"prepareQuery");function xt(r,{arrayMode:e,fullResults:t,fetchOptions:n,isolationLevel:i,readOnly:s,deferrable:o,authToken:a,disableWarningInBrowsers:h}={}){if(!r)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let d;try{d=io(r)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(r))}let{protocol:f,username:p,hostname:b,port:w,pathname:g}=d;if(f!=="postgres:"&&f!=="postgresql:"||!p||!b||!g)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function c(v,...T){if(!(Array.isArray(v)&&Array.isArray(v.raw)&&Array.isArray(T)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Zr(S,new Cc(v,T))}y(c,"templateFn"),c.query=(v,T,A)=>new Zr(S,{query:v,params:T??[]},A),c.unsafe=v=>new Pc(v),c.transaction=async(v,T)=>{if(typeof v=="function"&&(v=v(c)),!Array.isArray(v))throw new Error(Qu);v.forEach($=>{if(!($ instanceof Zr))throw new Error(Qu)});let A=v.map($=>$.queryData),_=v.map($=>$.opts??{});return S(A,_,T)};async function S(v,T,A){let{fetchEndpoint:_,fetchFunction:$}=hr,C=Array.isArray(v)?{queries:v.map(ae=>to(ae))}:to(v),L=n??{},N=e??!1,x=t??!1,D=i,O=s,W=o;A!==void 0&&(A.fetchOptions!==void 0&&(L={...L,...A.fetchOptions}),A.arrayMode!==void 0&&(N=A.arrayMode),A.fullResults!==void 0&&(x=A.fullResults),A.isolationLevel!==void 0&&(D=A.isolationLevel),A.readOnly!==void 0&&(O=A.readOnly),A.deferrable!==void 0&&(W=A.deferrable)),T!==void 0&&!Array.isArray(T)&&T.fetchOptions!==void 0&&(L={...L,...T.fetchOptions});let G=a;!Array.isArray(T)&&T?.authToken!==void 0&&(G=T.authToken);let q=typeof _=="function"?_(b,w,{jwtAuth:G!==void 0}):_,F={"Neon-Connection-String":r,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},Y=await _c(G);Y&&(F.Authorization=`Bearer ${Y}`),Array.isArray(v)&&(D!==void 0&&(F["Neon-Batch-Isolation-Level"]=D),O!==void 0&&(F["Neon-Batch-Read-Only"]=String(O)),W!==void 0&&(F["Neon-Batch-Deferrable"]=String(W))),h||hr.disableWarningInBrowsers||ho();let te;try{te=await($??fetch)(q,{method:"POST",body:JSON.stringify(C),headers:F,...L})}catch(ae){let ne=new At(`Error connecting to database: ${ae}`);throw ne.sourceError=ae,ne}if(te.ok){let ae=await te.json();if(Array.isArray(v)){let ne=ae.results;if(!Array.isArray(ne))throw new At("Neon internal error: unexpected result format");return ne.map((De,ce)=>{let Ee=T[ce]??{},Ut=Ee.arrayMode??N,Vt=Ee.fullResults??x;return ro(De,{arrayMode:Ut,fullResults:Vt,types:Ee.types})})}else{let ne=T??{},De=ne.arrayMode??N,ce=ne.fullResults??x;return ro(ae,{arrayMode:De,fullResults:ce,types:ne.types})}}else{let{status:ae}=te;if(ae===400){let ne=await te.json(),De=new At(ne.message);for(let ce of Dd)De[ce]=ne[ce]??void 0;throw De}else{let ne=await te.text();throw new At(`Server error (HTTP status ${ae}): ${ne}`)}}}return y(S,"execute"),c}y(xt,"neon");var Rc=class{constructor(e,t,n){this.execute=e,this.queryData=t,this.opts=n}then(e,t){return this.execute(this.queryData,this.opts).then(e,t)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};y(Rc,"NeonQueryPromise");var Zr=Rc;function ro(r,{arrayMode:e,fullResults:t,types:n}){let i=new qd.default(n),s=r.fields.map(h=>h.name),o=r.fields.map(h=>i.getTypeParser(h.dataTypeID)),a=e===!0?r.rows.map(h=>h.map((d,f)=>d===null?null:o[f](d))):r.rows.map(h=>Object.fromEntries(h.map((d,f)=>[s[f],d===null?null:o[f](d)])));return t?(r.viaNeonFetch=!0,r.rowAsArray=e,r.rows=a,r._parsers=o,r._types=i,r):a}y(ro,"processQueryResult");async function _c(r){if(typeof r=="string")return r;if(typeof r=="function")try{return await Promise.resolve(r())}catch(e){let t=new At("Error getting auth token.");throw e instanceof Error&&(t=new At(`Error getting auth token: ${e.message}`)),t}}y(_c,"getAuthToken");J();var Md=dt(on());J();var jd=dt(on()),$c=class extends jd.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||ie.env.PGHOST!==void 0,i=ie.env.USER??ie.env.USERNAME;if(!n&&this.host==="localhost"&&this.user===i&&this.database===i&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${i}, db: ${i}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let s=super.connect(e),o=t.pipelineTLS&&this.ssl,a=t.pipelineConnect==="password";if(!o&&!t.pipelineConnect)return s;let h=this.connection;if(o&&h.on("connect",()=>h.stream.emit("data","S")),a){h.removeAllListeners("authenticationCleartextPassword"),h.removeAllListeners("readyForQuery"),h.once("readyForQuery",()=>h.on("readyForQuery",this._handleReadyForQuery.bind(this)));let d=this.ssl?"sslconnect":"connect";h.on(d,()=>{this.neonConfig.disableWarningInBrowsers||ho(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return s}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let t=crypto.subtle,n=this.saslSession,i=this.password,s=e.data;if(n.message!=="SASLInitialResponse"||typeof i!="string"||typeof s!="string")throw new Error("SASL: protocol error");let o=Object.fromEntries(s.split(",").map(ae=>{if(!/^.=/.test(ae))throw new Error("SASL: Invalid attribute pair entry");let ne=ae[0],De=ae.substring(2);return[ne,De]})),a=o.r,h=o.s,d=o.i;if(!a||!/^[!-+--~]+$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!h||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(h))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!d||!/^[1-9][0-9]*$/.test(d))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!a.startsWith(n.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(a.length===n.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let f=parseInt(d,10),p=Z.from(h,"base64"),b=new TextEncoder,w=b.encode(i),g=await t.importKey("raw",w,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),c=new Uint8Array(await t.sign("HMAC",g,Z.concat([p,Z.from([0,0,0,1])]))),S=c;for(var v=0;v<f-1;v++)c=new Uint8Array(await t.sign("HMAC",g,c)),S=Z.from(S.map((ae,ne)=>S[ne]^c[ne]));let T=S,A=await t.importKey("raw",T,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),_=new Uint8Array(await t.sign("HMAC",A,b.encode("Client Key"))),$=await t.digest("SHA-256",_),C="n=*,r="+n.clientNonce,L="r="+a+",s="+h+",i="+f,N="c=biws,r="+a,x=C+","+L+","+N,D=await t.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var O=new Uint8Array(await t.sign("HMAC",D,b.encode(x))),W=Z.from(_.map((ae,ne)=>_[ne]^O[ne])),G=W.toString("base64");let q=await t.importKey("raw",T,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),F=await t.sign("HMAC",q,b.encode("Server Key")),Y=await t.importKey("raw",F,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var te=Z.from(await t.sign("HMAC",Y,b.encode(x)));n.message="SASLResponse",n.serverSignature=te.toString("base64"),n.response=N+",p="+G,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};y($c,"NeonClient");var kd=$c;pr();var Fd=dt(lo());function Oc(r,e){if(e)return{callback:e,result:void 0};let t,n,i=y(function(o,a){o?t(o):n(a)},"cb"),s=new r(function(o,a){n=o,t=a});return{callback:i,result:s}}y(Oc,"promisify");var Qd=class extends Md.Pool{constructor(){super(...arguments),ee(this,"Client",kd),ee(this,"hasFetchUnsupportedListeners",!1),ee(this,"addListener",this.on)}on(e,t){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,n){if(!hr.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,t,n);typeof t=="function"&&(n=t,t=void 0);let i=Oc(this.Promise,n);n=i.callback;try{let s=new Fd.default(this.options),o=encodeURIComponent,a=encodeURI,h=`postgresql://${o(s.user)}:${o(s.password)}@${o(s.host)}/${a(s.database)}`,d=typeof e=="string"?e:e.text,f=t??e.values??[];xt(h,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(d,f,{types:e.types??this.options?.types}).then(p=>n(void 0,p)).catch(p=>n(p))}catch(s){n(s)}return i.result}};y(Qd,"NeonPool");pr();var mr=dt(on());var gT=mr.DatabaseError,yT=mr.defaults,bT=mr.escapeIdentifier,wT=mr.escapeLiteral,qe=mr.types;var ye=class r{static[E]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,t){if(t==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===he)return{...e[he],selectedFields:new Proxy(e[he].selectedFields,this)};if(typeof t=="symbol")return e[t];let i=(B(e,ge)?e._.selectedFields:B(e,Ie)?e[he].selectedFields:e)[t];if(B(i,H.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!i.isSelectionField)return i.sql;let s=i.clone();return s.isSelectionField=!0,s}if(B(i,H)){if(this.config.sqlBehavior==="sql")return i;throw new Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return B(i,ue)?this.config.alias?new Proxy(i,new pt(new Proxy(i.table,new vt(this.config.alias,this.config.replaceOriginalName??!1)))):i:typeof i!="object"||i===null?i:new Proxy(i,new r(this.config))}};function Ud(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(t=>t.toLowerCase()).join("_")}function Vd(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((t,n,i)=>{let s=i===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return t+s},"")}function zd(r){return r}var an=class{static[E]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?Ud:e==="camelCase"?Vd:zd}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[Q.Symbol.Schema]??"public",n=e.table[Q.Symbol.OriginalName],i=`${t}.${n}.${e.name}`;return this.cache[i]||this.cacheTable(e.table),this.cache[i]}cacheTable(e){let t=e[Q.Symbol.Schema]??"public",n=e[Q.Symbol.OriginalName],i=`${t}.${n}`;if(!this.cachedTables[i]){for(let s of Object.values(e[Q.Symbol.Columns])){let o=`${i}.${s.name}`;this.cache[o]=this.convert(s.name)}this.cachedTables[i]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var Pt=class extends Ie{static[E]="PgViewBase"};var at=class{static[E]="PgDialect";casing;constructor(e){this.casing=new an(e?.casing)}async migrate(e,t,n){let i=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",s=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",o=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(s)}.${I.identifier(i)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(I`CREATE SCHEMA IF NOT EXISTS ${I.identifier(s)}`),await t.execute(o);let h=(await t.all(I`select id, hash, created_at from ${I.identifier(s)}.${I.identifier(i)} order by created_at desc limit 1`))[0];await t.transaction(async d=>{for await(let f of e)if(!h||Number(h.created_at)<f.folderMillis){for(let p of f.sql)await d.execute(I.raw(p));await d.execute(I`insert into ${I.identifier(s)}.${I.identifier(i)} ("hash", "created_at") values(${f.hash}, ${f.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[I`with `];for(let[n,i]of e.entries())t.push(I`${I.identifier(i._.alias)} as (${i._.sql})`),n<e.length-1&&t.push(I`, `);return t.push(I` `),I.join(t)}buildDeleteQuery({table:e,where:t,returning:n,withList:i}){let s=this.buildWithCTE(i),o=n?I` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,a=t?I` where ${t}`:void 0;return I`${s}delete from ${e}${a}${o}`}buildUpdateSet(e,t){let n=e[Q.Symbol.Columns],i=Object.keys(n).filter(o=>t[o]!==void 0||n[o]?.onUpdateFn!==void 0),s=i.length;return I.join(i.flatMap((o,a)=>{let h=n[o],d=t[o]??I.param(h.onUpdateFn(),h),f=I`${I.identifier(this.casing.getColumnCasing(h))} = ${d}`;return a<s-1?[f,I.raw(", ")]:[f]}))}buildUpdateQuery({table:e,set:t,where:n,returning:i,withList:s,from:o,joins:a}){let h=this.buildWithCTE(s),d=e[ve.Symbol.Name],f=e[ve.Symbol.Schema],p=e[ve.Symbol.OriginalName],b=d===p?void 0:d,w=I`${f?I`${I.identifier(f)}.`:void 0}${I.identifier(p)}${b&&I` ${I.identifier(b)}`}`,g=this.buildUpdateSet(e,t),c=o&&I.join([I.raw(" from "),this.buildFromTable(o)]),S=this.buildJoins(a),v=i?I` returning ${this.buildSelection(i,{isSingleTable:!o})}`:void 0,T=n?I` where ${n}`:void 0;return I`${h}update ${w} set ${g}${c}${S}${T}${v}`}buildSelection(e,{isSingleTable:t=!1}={}){let n=e.length,i=e.flatMap(({field:s},o)=>{let a=[];if(B(s,H.Aliased)&&s.isSelectionField)a.push(I.identifier(s.fieldAlias));else if(B(s,H.Aliased)||B(s,H)){let h=B(s,H.Aliased)?s.sql:s;t?a.push(new H(h.queryChunks.map(d=>B(d,k)?I.identifier(this.casing.getColumnCasing(d)):d))):a.push(h),B(s,H.Aliased)&&a.push(I` as ${I.identifier(s.fieldAlias)}`)}else B(s,ue)&&(t?a.push(I.identifier(this.casing.getColumnCasing(s))):a.push(s));return o<n-1&&a.push(I`, `),a});return I.join(i)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[n,i]of e.entries()){n===0&&t.push(I` `);let s=i.table,o=i.lateral?I` lateral`:void 0,a=i.on?I` on ${i.on}`:void 0;if(B(s,ve)){let h=s[ve.Symbol.Name],d=s[ve.Symbol.Schema],f=s[ve.Symbol.OriginalName],p=h===f?void 0:i.alias;t.push(I`${I.raw(i.joinType)} join${o} ${d?I`${I.identifier(d)}.`:void 0}${I.identifier(f)}${p&&I` ${I.identifier(p)}`}${a}`)}else if(B(s,Ie)){let h=s[he].name,d=s[he].schema,f=s[he].originalName,p=h===f?void 0:i.alias;t.push(I`${I.raw(i.joinType)} join${o} ${d?I`${I.identifier(d)}.`:void 0}${I.identifier(f)}${p&&I` ${I.identifier(p)}`}${a}`)}else t.push(I`${I.raw(i.joinType)} join${o} ${s}${a}`);n<e.length-1&&t.push(I` `)}return I.join(t)}buildFromTable(e){if(B(e,Q)&&e[Q.Symbol.IsAlias]){let t=I`${I.identifier(e[Q.Symbol.OriginalName])}`;return e[Q.Symbol.Schema]&&(t=I`${I.identifier(e[Q.Symbol.Schema])}.${t}`),I`${t} ${I.identifier(e[Q.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:n,where:i,having:s,table:o,joins:a,orderBy:h,groupBy:d,limit:f,offset:p,lockingClause:b,distinct:w,setOperators:g}){let c=n??Me(t);for(let q of c)if(B(q.field,ue)&&Re(q.field.table)!==(B(o,ge)?o._.alias:B(o,Pt)?o[he].name:B(o,H)?void 0:Re(o))&&!(F=>a?.some(({alias:Y})=>Y===(F[Q.Symbol.IsAlias]?Re(F):F[Q.Symbol.BaseName])))(q.field.table)){let F=Re(q.field.table);throw new Error(`Your "${q.path.join("->")}" field references a column "${F}"."${q.field.name}", but the table "${F}" is not part of the query! Did you forget to join it?`)}let S=!a||a.length===0,v=this.buildWithCTE(e),T;w&&(T=w===!0?I` distinct`:I` distinct on (${I.join(w.on,I`, `)})`);let A=this.buildSelection(c,{isSingleTable:S}),_=this.buildFromTable(o),$=this.buildJoins(a),C=i?I` where ${i}`:void 0,L=s?I` having ${s}`:void 0,N;h&&h.length>0&&(N=I` order by ${I.join(h,I`, `)}`);let x;d&&d.length>0&&(x=I` group by ${I.join(d,I`, `)}`);let D=typeof f=="object"||typeof f=="number"&&f>=0?I` limit ${f}`:void 0,O=p?I` offset ${p}`:void 0,W=I.empty();if(b){let q=I` for ${I.raw(b.strength)}`;b.config.of&&q.append(I` of ${I.join(Array.isArray(b.config.of)?b.config.of:[b.config.of],I`, `)}`),b.config.noWait?q.append(I` nowait`):b.config.skipLocked&&q.append(I` skip locked`),W.append(q)}let G=I`${v}select${T} ${A} from ${_}${$}${C}${x}${L}${N}${D}${O}${W}`;return g.length>0?this.buildSetOperations(G,g):G}buildSetOperations(e,t){let[n,...i]=t;if(!n)throw new Error("Cannot pass undefined values to any set operator");return i.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),i)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:i,limit:s,orderBy:o,offset:a}}){let h=I`(${e.getSQL()}) `,d=I`(${i.getSQL()})`,f;if(o&&o.length>0){let g=[];for(let c of o)if(B(c,k))g.push(I.identifier(c.name));else if(B(c,H)){for(let S=0;S<c.queryChunks.length;S++){let v=c.queryChunks[S];B(v,k)&&(c.queryChunks[S]=I.identifier(v.name))}g.push(I`${c}`)}else g.push(I`${c}`);f=I` order by ${I.join(g,I`, `)} `}let p=typeof s=="object"||typeof s=="number"&&s>=0?I` limit ${s}`:void 0,b=I.raw(`${t} ${n?"all ":""}`),w=a?I` offset ${a}`:void 0;return I`${h}${b}${d}${f}${p}${w}`}buildInsertQuery({table:e,values:t,onConflict:n,returning:i,withList:s,select:o,overridingSystemValue_:a}){let h=[],d=e[Q.Symbol.Columns],f=Object.entries(d).filter(([v,T])=>!T.shouldDisableInsert()),p=f.map(([,v])=>I.identifier(this.casing.getColumnCasing(v)));if(o){let v=t;B(v,H)?h.push(v):h.push(v.getSQL())}else{let v=t;h.push(I.raw("values "));for(let[T,A]of v.entries()){let _=[];for(let[$,C]of f){let L=A[$];if(L===void 0||B(L,_e)&&L.value===void 0)if(C.defaultFn!==void 0){let N=C.defaultFn(),x=B(N,H)?N:I.param(N,C);_.push(x)}else if(!C.default&&C.onUpdateFn!==void 0){let N=C.onUpdateFn(),x=B(N,H)?N:I.param(N,C);_.push(x)}else _.push(I`default`);else _.push(L)}h.push(_),T<v.length-1&&h.push(I`, `)}}let b=this.buildWithCTE(s),w=I.join(h),g=i?I` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,c=n?I` on conflict ${n}`:void 0,S=a===!0?I`overriding system value `:void 0;return I`${b}insert into ${e} ${p} ${S}${w}${c}${g}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:n}){let i=t?I` concurrently`:void 0,s=n?I` with no data`:void 0;return I`refresh materialized view${i} ${e}${s}`}prepareTyping(e){return B(e,tr)||B(e,er)?"json":B(e,rr)?"decimal":B(e,nr)?"time":B(e,ir)||B(e,sr)?"timestamp":B(e,Yt)||B(e,Zt)?"date":B(e,or)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:i,tableConfig:s,queryConfig:o,tableAlias:a,nestedQueryRelation:h,joinOn:d}){let f=[],p,b,w=[],g,c=[];if(o===!0)f=Object.entries(s.columns).map(([T,A])=>({dbKey:A.name,tsKey:T,field:He(A,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let v=Object.fromEntries(Object.entries(s.columns).map(([L,N])=>[L,He(N,a)]));if(o.where){let L=typeof o.where=="function"?o.where(v,_u()):o.where;g=L&&Ht(L,a)}let T=[],A=[];if(o.columns){let L=!1;for(let[N,x]of Object.entries(o.columns))x!==void 0&&N in s.columns&&(!L&&x===!0&&(L=!0),A.push(N));A.length>0&&(A=L?A.filter(N=>o.columns?.[N]===!0):Object.keys(s.columns).filter(N=>!A.includes(N)))}else A=Object.keys(s.columns);for(let L of A){let N=s.columns[L];T.push({tsKey:L,value:N})}let _=[];o.with&&(_=Object.entries(o.with).filter(L=>!!L[1]).map(([L,N])=>({tsKey:L,queryConfig:N,relation:s.relations[L]})));let $;if(o.extras){$=typeof o.extras=="function"?o.extras(v,{sql:I}):o.extras;for(let[L,N]of Object.entries($))T.push({tsKey:L,value:xi(N,a)})}for(let{tsKey:L,value:N}of T)f.push({dbKey:B(N,H.Aliased)?N.fieldAlias:s.columns[L].name,tsKey:L,field:B(N,ue)?He(N,a):N,relationTableTsKey:void 0,isJson:!1,selection:[]});let C=typeof o.orderBy=="function"?o.orderBy(v,$u()):o.orderBy??[];Array.isArray(C)||(C=[C]),w=C.map(L=>B(L,ue)?He(L,a):Ht(L,a)),p=o.limit,b=o.offset;for(let{tsKey:L,queryConfig:N,relation:x}of _){let D=qu(t,n,x),O=ht(x.referencedTable),W=n[O],G=`${a}_${L}`,q=ar(...D.fields.map((te,ae)=>Tt(He(D.references[ae],G),He(te,a)))),F=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:e[W],tableConfig:t[W],queryConfig:B(x,ot)?N===!0?{limit:1}:{...N,limit:1}:N,tableAlias:G,joinOn:q,nestedQueryRelation:x}),Y=I`${I.identifier(G)}.${I.identifier("data")}`.as(L);c.push({on:I`true`,table:new ge(F.sql,{},G),alias:G,joinType:"left",lateral:!0}),f.push({dbKey:L,tsKey:L,field:Y,relationTableTsKey:W,isJson:!0,selection:F.selection})}}if(f.length===0)throw new Jt({message:`No fields selected for table "${s.tsName}" ("${a}")`});let S;if(g=ar(d,g),h){let v=I`json_build_array(${I.join(f.map(({field:_,tsKey:$,isJson:C})=>C?I`${I.identifier(`${a}_${$}`)}.${I.identifier("data")}`:B(_,H.Aliased)?_.sql:_),I`, `)})`;B(h,ur)&&(v=I`coalesce(json_agg(${v}${w.length>0?I` order by ${I.join(w,I`, `)}`:void 0}), '[]'::json)`);let T=[{dbKey:"data",tsKey:"data",field:v.as("data"),isJson:!0,relationTableTsKey:s.tsName,selection:f}];p!==void 0||b!==void 0||w.length>0?(S=this.buildSelectQuery({table:Gt(i,a),fields:{},fieldsFlat:[{path:[],field:I.raw("*")}],where:g,limit:p,offset:b,orderBy:w,setOperators:[]}),g=void 0,p=void 0,b=void 0,w=[]):S=Gt(i,a),S=this.buildSelectQuery({table:B(S,ve)?S:new ge(S,{},a),fields:{},fieldsFlat:T.map(({field:_})=>({path:[],field:B(_,ue)?He(_,a):_})),joins:c,where:g,limit:p,offset:b,orderBy:w,setOperators:[]})}else S=this.buildSelectQuery({table:Gt(i,a),fields:{},fieldsFlat:f.map(({field:v})=>({path:[],field:B(v,ue)?He(v,a):v})),joins:c,where:g,limit:p,offset:b,orderBy:w,setOperators:[]});return{tableTsKey:s.tsName,sql:S,selection:f}}};var un=class{static[E]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var xe=class{static[E]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,n=e,i;return this.fields?i=this.fields:B(n,ge)?i=Object.fromEntries(Object.keys(n._.selectedFields).map(s=>[s,n[s]])):B(n,Pt)?i=n[he].selectedFields:B(n,H)?i={}:i=Oa(n),new cn({table:n,fields:i,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},po=class extends un{static[E]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:n,session:i,dialect:s,withList:o,distinct:a}){super(),this.config={withList:o,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=n,this.session=i,this.dialect=s,this._={selectedFields:t,config:this.config},this.tableName=tt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let h of We(e))this.usedTables.add(h)}getUsedTables(){return[...this.usedTables]}createJoin(e,t){return(n,i)=>{let s=this.tableName,o=tt(n);for(let a of We(n))this.usedTables.add(a);if(typeof o=="string"&&this.config.joins?.some(a=>a.alias===o))throw new Error(`Alias "${o}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof s=="string"&&(this.config.fields={[s]:this.config.fields}),typeof o=="string"&&!B(n,H))){let a=B(n,ge)?n._.selectedFields:B(n,Ie)?n[he].selectedFields:n[Q.Symbol.Columns];this.config.fields[o]=a}if(typeof i=="function"&&(i=i(new Proxy(this.config.fields,new ye({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:i,table:n,joinType:e,alias:o,lateral:t}),typeof o=="string")switch(e){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[o]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,t){return n=>{let i=typeof n=="function"?n(Kd()):n;if(!Xt(this.getSelectedFields(),i.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:i}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new ye({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new ye({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new ye({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new ye({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...We(this.config.table)),this.config.joins)for(let n of this.config.joins)t.push(...We(n.table));return new Proxy(new ge(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new ye({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ye({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},cn=class extends po{static[E]="PgSelect";_prepare(e){let{session:t,config:n,dialect:i,joinsNotNullableMap:s,authToken:o,cacheConfig:a,usedTables:h}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:d}=n;return we.startActiveSpan("drizzle.prepareQuery",()=>{let f=Me(d),p=t.prepareQuery(i.sqlToQuery(this.getSQL()),f,e,!0,void 0,{type:"select",tables:[...h]},a);return p.joinsNotNullableMap=s,p.setToken(o)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>we.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};$a(cn,[Ce]);function It(r,e){return(t,n,...i)=>{let s=[n,...i].map(o=>({type:r,isAll:e,rightSelect:o}));for(let o of s)if(!Xt(t.getSelectedFields(),o.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(s)}}var Kd=()=>({union:Wd,unionAll:Gd,intersect:Hd,intersectAll:Jd,except:Xd,exceptAll:Yd}),Wd=It("union",!1),Gd=It("union",!0),Hd=It("intersect",!1),Jd=It("intersect",!0),Xd=It("except",!1),Yd=It("except",!0);var Nt=class{static[E]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=B(e,at)?e:void 0,this.dialectConfig=B(e,at)?void 0:e}$with=(e,t)=>{let n=this;return{as:s=>(typeof s=="function"&&(s=s(n)),new Proxy(new St(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new ye({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;function n(o){return new xe({fields:o??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function i(o){return new xe({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function s(o,a){return new xe({fields:a??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:o}})}return{select:n,selectDistinct:i,selectDistinctOn:s}}select(e){return new xe({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new xe({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new xe({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new at(this.dialectConfig)),this.dialect}};function We(r){return B(r,ve)?[r[ft]?`${r[ft]}.${r[Q.Symbol.BaseName]}`:r[Q.Symbol.BaseName]]:B(r,ge)?r._.usedTables??[]:B(r,H)?r.usedTables??[]:[]}var gr=class extends Ce{constructor(e,t,n,i){super(),this.session=t,this.dialect=n,this.config={table:e,withList:i}}static[E]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[Q.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Me(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return we.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:We(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>we.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ye({alias:Re(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var yr=class{constructor(e,t,n,i,s){this.table=e,this.session=t,this.dialect=n,this.withList=i,this.overridingSystemValue_=s}static[E]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let t=e.map(n=>{let i={},s=this.table[Q.Symbol.Columns];for(let o of Object.keys(n)){let a=n[o];i[o]=B(a,H)?a:new _e(a,s[o])}return i});return new ln(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e=="function"?e(new Nt):e;if(!B(t,H)&&!Xt(this.table[Mr],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new ln(this.table,t,this.session,this.dialect,this.withList,!0)}},ln=class extends Ce{constructor(e,t,n,i,s,o,a){super(),this.session=n,this.dialect=i,this.config={table:e,values:t,withList:s,select:o,overridingSystemValue_:a}}static[E]="PgInsert";config;cacheConfig;returning(e=this.config.table[Q.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Me(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=I`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(i=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(i))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?I` where ${e.where}`:void 0;this.config.onConflict=I`(${I.raw(t)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?I` where ${e.where}`:void 0,n=e.targetWhere?I` where ${e.targetWhere}`:void 0,i=e.setWhere?I` where ${e.setWhere}`:void 0,s=this.dialect.buildUpdateSet(this.config.table,Ur(this.config.table,e.set)),o="";return o=Array.isArray(e.target)?e.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=I`(${I.raw(o)})${n} do update set ${s}${t}${i}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return we.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:We(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>we.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ye({alias:Re(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var fn=class extends Ce{constructor(e,t,n){super(),this.session=t,this.dialect=n,this.config={view:e}}static[E]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return we.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>we.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var br=class{constructor(e,t,n,i){this.table=e,this.session=t,this.dialect=n,this.withList=i}static[E]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new mo(this.table,Ur(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},mo=class extends Ce{constructor(e,t,n,i,s){super(),this.session=n,this.dialect=i,this.config={set:t,table:e,withList:s,joins:[]},this.tableName=tt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[E]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let t=e,n=tt(t);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=t,this}getTableLikeFields(e){return B(e,ve)?e[Q.Symbol.Columns]:B(e,ge)?e._.selectedFields:e[he].selectedFields}createJoin(e){return(t,n)=>{let i=tt(t);if(typeof i=="string"&&this.config.joins.some(s=>s.alias===i))throw new Error(`Alias "${i}" is already used in this query`);if(typeof n=="function"){let s=this.config.from&&!B(this.config.from,H)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[Q.Symbol.Columns],new ye({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),s&&new Proxy(s,new ye({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:t,joinType:e,alias:i}),typeof i=="string")switch(e){case"left":{this.joinsNotNullableMap[i]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([s])=>[s,!1])),this.joinsNotNullableMap[i]=!0;break}case"inner":{this.joinsNotNullableMap[i]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([s])=>[s,!1])),this.joinsNotNullableMap[i]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[Q.Symbol.Columns]),this.config.from)){let t=tt(this.config.from);if(typeof t=="string"&&this.config.from&&!B(this.config.from,H)){let n=this.getTableLikeFields(this.config.from);e[t]=n}for(let n of this.config.joins){let i=tt(n.table);if(typeof i=="string"&&!B(n.table,H)){let s=this.getTableLikeFields(n.table);e[i]=s}}}return this.config.returningFields=e,this.config.returning=Me(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:We(this.config.table)},this.cacheConfig);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ye({alias:Re(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var hn=class r extends H{constructor(e){super(r.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=r.buildCount(e.source,e.filters)}sql;token;static[E]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return I`(select count(*) from ${e}${I.raw(" where ").if(t)}${t})`}static buildCount(e,t){return I`select count(*) as count from ${e}${I.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}};var pn=class{constructor(e,t,n,i,s,o,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=i,this.tableConfig=s,this.dialect=o,this.session=a}static[E]="PgRelationalQueryBuilder";findMany(e){return new dn(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new dn(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},dn=class extends Ce{constructor(e,t,n,i,s,o,a,h,d){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=i,this.tableConfig=s,this.dialect=o,this.session=a,this.config=h,this.mode=d}static[E]="PgRelationalQuery";_prepare(e){return we.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(i,s)=>{let o=i.map(a=>Hr(this.schema,this.tableConfig,a,t.selection,s));return this.mode==="first"?o[0]:o})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return we.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var mn=class extends Ce{constructor(e,t,n,i){super(),this.execute=e,this.sql=t,this.query=n,this.mapBatchResult=i}static[E]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var Lt=class{constructor(e,t,n){if(this.dialect=e,this.session=t,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[i,s]of Object.entries(this._.schema))this.query[i]=new pn(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[i],s,e,t);this.$cache={invalidate:async i=>{}}}static[E]="PgDatabase";query;$with=(e,t)=>{let n=this;return{as:s=>(typeof s=="function"&&(s=s(new Nt(n.dialect))),new Proxy(new St(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new ye({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new hn({source:e,filters:t,session:this.session})}$cache;with(...e){let t=this;function n(d){return new xe({fields:d??void 0,session:t.session,dialect:t.dialect,withList:e})}function i(d){return new xe({fields:d??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function s(d,f){return new xe({fields:f??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:d}})}function o(d){return new br(d,t.session,t.dialect,e)}function a(d){return new yr(d,t.session,t.dialect,e)}function h(d){return new gr(d,t.session,t.dialect,e)}return{select:n,selectDistinct:i,selectDistinctOn:s,update:o,insert:a,delete:h}}select(e){return new xe({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new xe({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new xe({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new br(e,this.session,this.dialect)}insert(e){return new yr(e,this.session,this.dialect)}delete(e){return new gr(e,this.session,this.dialect)}refreshMaterializedView(e){return new fn(e,this.session,this.dialect)}authToken;execute(e){let t=typeof e=="string"?I.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(t),i=this.session.prepareQuery(n,void 0,void 0,!1);return new mn(()=>i.execute(void 0,this.authToken),t,n,s=>i.mapResult(s,!0))}transaction(e,t){return this.session.transaction(e,t)}};var go=class{static[E]="Cache"},Rt=class extends go{strategy(){return"all"}static[E]="NoopCache";async get(e){}async put(e,t,n,i){}async onMutate(e){}};async function yo(r,e){let t=`${r}-${JSON.stringify(e)}`,i=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",i);return[...new Uint8Array(s)].map(h=>h.toString(16).padStart(2,"0")).join("")}var it=class r extends Error{constructor(e,t,n){super(`Failed query: ${e}
params: ${t}`),this.query=e,this.params=t,this.cause=n,Error.captureStackTrace(this,r),n&&(this.cause=n)}};var gn=class{constructor(e,t,n,i){this.query=e,this.cache=t,this.queryMetadata=n,this.cacheConfig=i,t&&t.strategy()==="all"&&i===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static[E]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,t,n){if(this.cache===void 0||B(this.cache,Rt)||this.queryMetadata===void 0)try{return await n()}catch(i){throw new it(e,t,i)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await n()}catch(i){throw new it(e,t,i)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[i]=await Promise.all([n(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return i}catch(i){throw new it(e,t,i)}if(!this.cacheConfig)try{return await n()}catch(i){throw new it(e,t,i)}if(this.queryMetadata.type==="select"){let i=await this.cache.get(this.cacheConfig.tag??await yo(e,t),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(i===void 0){let s;try{s=await n()}catch(o){throw new it(e,t,o)}return await this.cache.put(this.cacheConfig.tag??await yo(e,t),s,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),s}return i}try{return await n()}catch(i){throw new it(e,t,i)}}},yn=class{constructor(e){this.dialect=e}static[E]="PgSession";execute(e,t){return we.startActiveSpan("drizzle.operation",()=>we.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let n=await this.execute(e,t);return Number(n[0].count)}},bn=class extends Lt{constructor(e,t,n,i=0){super(e,t,n),this.schema=n,this.nestedIndex=i}static[E]="PgTransaction";rollback(){throw new kr}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),I.raw(t.join(" "))}setTransaction(e){return this.session.execute(I`set transaction ${this.getTransactionConfigSQL(e)}`)}};var wn={arrayMode:!1,fullResults:!0},bo={arrayMode:!0,fullResults:!0},wo=class extends gn{constructor(e,t,n,i,s,o,a,h,d){super(t,i,s,o),this.client=e,this.logger=n,this.fields=a,this._isResponseInArrayMode=h,this.customResultMapper=d,this.clientQuery=e.query??e}static[E]="NeonHttpPreparedQuery";clientQuery;async execute(e={},t=this.authToken){let n=jr(this.query.params,e);this.logger.logQuery(this.query.sql,n);let{fields:i,clientQuery:s,query:o,customResultMapper:a}=this;if(!i&&!a)return this.queryWithCache(o.sql,n,async()=>s(o.sql,n,t===void 0?wn:{...wn,authToken:t}));let h=await this.queryWithCache(o.sql,n,async()=>await s(o.sql,n,t===void 0?bo:{...bo,authToken:t}));return this.mapResult(h)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let t=e.rows;return this.customResultMapper?this.customResultMapper(t):t.map(n=>_a(this.fields,n,this.joinsNotNullableMap))}all(e={}){let t=jr(this.query.params,e);return this.logger.logQuery(this.query.sql,t),this.clientQuery(this.query.sql,t,this.authToken===void 0?wn:{...wn,authToken:this.authToken}).then(n=>n.rows)}values(e={},t){let n=jr(this.query.params,e);return this.logger.logQuery(this.query.sql,n),this.clientQuery(this.query.sql,n,{arrayMode:!0,fullResults:!0,authToken:t}).then(i=>i.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Sn=class extends yn{constructor(e,t,n,i={}){super(t),this.client=e,this.schema=n,this.options=i,this.clientQuery=e.query??e,this.logger=i.logger??new Qr,this.cache=i.cache??new Rt}static[E]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(e,t,n,i,s,o,a){return new wo(this.client,e,this.logger,this.cache,o,a,t,i,s)}async batch(e){let t=[],n=[];for(let s of e){let o=s._prepare(),a=o.getQuery();t.push(o),n.push(this.clientQuery(a.sql,a.params,{fullResults:!0,arrayMode:o.isResponseInArrayMode()}))}return(await this.client.transaction(n,bo)).map((s,o)=>t[o].mapResult(s,!0))}async query(e,t){return this.logger.logQuery(e,t),await this.clientQuery(e,t,{arrayMode:!0,fullResults:!0})}async queryObjects(e,t){return this.clientQuery(e,t,{arrayMode:!1,fullResults:!0})}async count(e,t){let n=await this.execute(e,t);return Number(n.rows[0].count)}async transaction(e,t={}){throw new Error("No transactions support in neon-http driver")}},qc=class extends bn{static[E]="NeonHttpTransaction";async transaction(e){throw new Error("No transactions support in neon-http driver")}};var So=class{constructor(e,t,n={}){this.client=e,this.dialect=t,this.options=n,this.initMappers()}static[E]="NeonHttpDriver";createSession(e){return new Sn(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}initMappers(){qe.setTypeParser(qe.builtins.TIMESTAMPTZ,e=>e),qe.setTypeParser(qe.builtins.TIMESTAMP,e=>e),qe.setTypeParser(qe.builtins.DATE,e=>e),qe.setTypeParser(qe.builtins.INTERVAL,e=>e),qe.setTypeParser(1231,e=>e),qe.setTypeParser(1115,e=>e),qe.setTypeParser(1185,e=>e),qe.setTypeParser(1187,e=>e),qe.setTypeParser(1182,e=>e)}};function vn(r,e,t,n){return new Proxy(r,{get(i,s){let o=i[s];return typeof o!="function"&&(typeof o!="object"||o===null)?o:n?vn(o,e,t):s==="query"?vn(o,e,t,!0):new Proxy(o,{apply(a,h,d){let f=a.call(h,...d);return typeof f=="object"&&f!==null&&"setToken"in f&&typeof f.setToken=="function"&&f.setToken(e),t(a,s,f)}})}})}var vo=class extends Lt{static[E]="NeonHttpDatabase";$withAuth(e){return this.authToken=e,vn(this,e,(t,n,i)=>n==="with"?vn(i,e,(s,o,a)=>a):i)}async batch(e){return this.session.batch(e)}};function _t(r,e={}){let t=new at({casing:e.casing}),n;e.logger===!0?n=new Fr:e.logger!==!1&&(n=e.logger);let i;if(e.schema){let h=Ou(e.schema,Bu);i={fullSchema:e.schema,schema:h.tables,tableNamesMap:h.tableNamesMap}}let o=new So(r,t,{logger:n,cache:e.cache}).createSession(i),a=new vo(t,o,i);return a.$client=r,a.$cache=e.cache,a.$cache&&(a.$cache.invalidate=e.cache?.onMutate),a}function En(...r){if(typeof r[0]=="string"){let e=xt(r[0]);return _t(e,r[1])}if(qa(r[0])){let{connection:e,client:t,...n}=r[0];if(t)return _t(t,n);if(typeof e=="object"){let{connectionString:s,...o}=e,a=xt(s,o);return _t(a,n)}let i=xt(e);return _t(i,n)}return _t(r[0],r[1])}(r=>{function e(t){return _t({},t)}r.mock=e})(En||(En={}));var Eo={};ga(Eo,{mealInputType:()=>Dc,mealStatus:()=>Bc,mealsTable:()=>Zd,usersTable:()=>Tn});var Tn=Hs("users",{id:Et().primaryKey().defaultRandom(),name:ze({length:255}).notNull(),email:ze({length:255}).notNull().unique(),password:ze({length:255}).notNull(),goal:ze({length:8}).notNull(),gender:ze({length:6}).notNull(),birthDate:Vr("birth_date").notNull(),height:Xe().notNull(),weight:Xe().notNull(),activityLevel:Xe("activity_level").notNull(),calories:Xe().notNull(),proteins:Xe().notNull(),carbohydrates:Xe().notNull(),fats:Xe().notNull()}),Bc=Si("meal_status",["uploading","processing","success","failed"]),Dc=Si("meal_input_type",["audio","picture"]),Zd=Hs("meals",{id:Et().primaryKey().defaultRandom(),userId:Et("user_id").notNull().references(()=>Tn.id,{onDelete:"cascade"}),status:Bc().notNull(),inputType:Dc("input_type").notNull(),inputFileKey:ze("input_file_key",{length:255}).notNull(),name:ze({length:255}).notNull(),icon:ze({length:100}).notNull(),foods:zr(),createdAt:Kr("created_at").notNull().defaultNow()});var Mc=En(process.env.DATABASE_URL,{schema:Eo});function jc(r){return{statusCode:200,body:r}}function kc(r){return{statusCode:401,body:r}}var An=class{static async handle({userId:e}){let t=await Mc.query.usersTable.findFirst({columns:{id:!0,email:!0,name:!0,calories:!0,proteins:!0,carbohydrates:!0,fats:!0},where:Tt(Tn.id,e)});return jc({user:t})}};function Fc(r){let e=JSON.parse(r.body??"{}"),t=r.pathParameters??{},n=r.queryStringParameters??{};return{body:e,params:t,queryParams:n}}var la=Ip(bp());function wp(r){try{let{sub:e}=(0,la.verify)(r,process.env.JWT_SECRET);return e??null}catch{return null}}function Sp(r){let e=Fc(r),{authorization:t}=r.headers;if(!t)throw new Error("Access token not provided.");let[,n]=t.split(" "),i=wp(n);if(console.log(n),!i)throw new Error("Invalid access token.");return{...e,userId:i}}async function iS(r){try{let e=Sp(r),t=await An.handle(e);return ai(t)}catch{return ai(kc({error:"Invalid access token."}))}}0&&(module.exports={handler});
/*! Bundled license information:

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
